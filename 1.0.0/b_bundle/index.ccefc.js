System.register("chunks:///_virtual/addspace.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager2.ts","./Constant2.ts","./EventManager2.ts","./ButtonClickHandler2.ts","./SDKManager.ts"],(function(e){var t,i,a,n,r,s,o,l,c,u,g,d,h,p,m,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){a=e.cclegacy,n=e.Button,r=e.ProgressBar,s=e.Label,o=e.Node,l=e._decorator,c=e.Component,u=e.Tween,g=e.tween},function(e){d=e.GameManager},function(e){h=e.default},function(e){p=e.eventManager},function(e){m=e.ButtonClickHandler},function(e){f=e.SDKManager}],execute:function(){var b,D,y,C,B,G,v,k,P,w,_;a._RF.push({},"e35548FtltE45a7/E3IbWcJ","addspace",void 0);const{ccclass:z,property:M}=l;e("addspace",(b=z("addspace"),D=M(n),y=M(r),C=M(s),B=M(o),b((k=t((v=class extends c{constructor(...e){super(...e),i(this,"btn_get",k,this),i(this,"progressBar",P,this),i(this,"jindu",w,this),i(this,"redIcon",_,this),this.gameData=void 0}start(){this.gameData=d.loadProgress(),m.handleBtnClickWithSound1(this.btn_get,(()=>{this.onGetClick()}),this),this.playProgress(0)}onCloseClick(){this.node.destroy()}onGetClick(){this.gameData.endGeziLock&&(this.gameData.endGeZiJiliCount<2?f.instance.showRewardVideo(this,(()=>{this.gameData.endGeZiJiliCount++,d.saveProgress(this.gameData),this.playProgress()})):(this.gameData.endGeziLock=!1,d.saveProgress(this.gameData),p.emit(h.REFRESH_GEZI),this.node.destroy()))}playProgress(e=.3){let t=this.gameData.endGeZiJiliCount/2;u.stopAllByTarget(this.progressBar),g(this.progressBar).to(e,{progress:t}).start(),this.redIcon.active=this.gameData.endGeZiJiliCount>=2,this.jindu.string=`${this.gameData.endGeZiJiliCount}/2`}}).prototype,"btn_get",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(v.prototype,"progressBar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(v.prototype,"jindu",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(v.prototype,"redIcon",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=v))||G));a._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["cc"],(function(s){var u,o,e,i,t,c;return{setters:[function(s){u=s.Node,o=s.director,e=s.AudioSource,i=s.AudioClip,t=s.assetManager,c=s.cclegacy}],execute:function(){c._RF.push({},"da245hQeYBK74C5UCysiPmg","AudioManager",void 0);class n{static get inst(){return null==this._inst&&(this._inst=new n),this._inst}constructor(){this._musicSource=void 0,this._soundSource=void 0,this._musicVolume=1,this._soundVolume=1;let s=new u;s.name="__audioMgr__",o.getScene().addChild(s),o.addPersistRootNode(s),this._musicSource=s.addComponent(e),this._musicSource.loop=!1,this._soundSource=s.addComponent(e),this._soundSource.loop=!1}get musicSource(){return this._musicSource}get soundSource(){return this._soundSource}set musicVolume(s){this._musicVolume=s,this._musicSource.volume=this._musicVolume}set soundVolume(s){this._soundVolume=s}playOneShot(s,u=1,o="b_bundle"){if(s instanceof i)this._soundSource.playOneShot(s,u*this._soundVolume);else{t.getBundle(o).load(s,((s,o)=>{s?console.log(s):this._soundSource.playOneShot(o,u*this._soundVolume)}))}}play(s,u=!1,o=1,e="b_bundle"){if(s instanceof i)this._musicSource.stop(),this._musicSource.clip=s,this._musicSource.loop=u,this._musicSource.volume=o*this._musicVolume,this._musicSource.play();else{t.getBundle(e).load(s,((s,e)=>{s?console.log(s):(this._musicSource.stop(),this._musicSource.clip=e,this._musicSource.loop=u,this._musicSource.volume=o*this._musicVolume,this._musicSource.play())}))}}stop(){this._musicSource.stop()}pause(){this._musicSource.pause()}resume(){this._musicSource.play()}}s("default",n),n._inst=void 0,c._RF.pop()}}}));

System.register("chunks:///_virtual/b_bundle",["./Constant2.ts","./ReportManager.ts","./game.ts","./loading2.ts","./mask.ts","./gameDataTypes.ts","./Congratulations.ts","./FlyBoxDialog.ts","./HalfDialog.ts","./MarqueeController.ts","./OpenDiamond.ts","./OpenTask.ts","./RotaryTable.ts","./SignInUI.ts","./TaskItem2.ts","./VictoryAccolade.ts","./addspace.ts","./confirmAgain.ts","./doubleReward.ts","./flyBox.ts","./flyBoxNode.ts","./inputinfo.ts","./levelselect.ts","./levelstatic.ts","./marqueeUpdate.ts","./move.ts","./paymethod.ts","./pending.ts","./rank.ts","./record.ts","./startover.ts","./toast.ts","./wallet.ts","./result.ts","./AudioManager.ts","./ButtonClickHandler2.ts","./CurrencyFormatter.ts","./EventManager2.ts","./LayerScale2.ts","./List.ts","./ListItem.ts","./RateManager.ts","./RepeatRotate.ts","./SignInManager.ts","./TaskData.ts","./gameAlg.ts","./gameManager2.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ButtonClickHandler2.ts",["cc","./AudioManager.ts","./Constant2.ts"],(function(t){var n,c,e,l,i;return{setters:[function(t){n=t.cclegacy,c=t.tween,e=t.v3},function(t){l=t.default},function(t){i=t.default}],execute:function(){n._RF.push({},"7034eP+KuhL3L5dNtv9y0z5","ButtonClickHandler",void 0);class a{static handleBtnClickWithSound1(t,n,c){t.zoomScale=.8,t.duration=.1,t.node.on("click",(()=>{const t=Date.now();t-a.lastClickTime<500||(a.lastClickTime=t,l.inst.playOneShot(i.SOUND_BTN),n.call(c))}),this)}static handleBtnClickWithSound2(t,n,o){t.zoomScale=1,t.duration=.1,t.node.on("click",(()=>{const s=Date.now();s-a.lastClickTime<500||(c(t.node).to(.1,{scale:e(.8,.8,.8)}).to(.1,{scale:e(1,1,1)}).start(),a.lastClickTime=s,l.inst.playOneShot(i.SOUND_BTN),n.call(o))}),this)}static clearEvent(t){t.node.off("click")}}t("ButtonClickHandler",a),a.lastClickTime=0,n._RF.pop()}}}));

System.register("chunks:///_virtual/confirmAgain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager2.ts","./gameManager2.ts","./Constant2.ts","./ButtonClickHandler2.ts","./BundleLoader.ts","./RateManager.ts"],(function(e){var t,n,a,i,r,o,l,s,u,c,b,h,p,d,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){a=e.cclegacy,i=e.Button,r=e.Sprite,o=e.Label,l=e._decorator,s=e.Component,u=e.instantiate},function(e){c=e.eventManager},function(e){b=e.GameManager},function(e){h=e.default},function(e){p=e.ButtonClickHandler},function(e){d=e.BundleLoader},function(e){f=e.default}],execute:function(){var m,g,_,y,k,S,D,M,C,F,O,A,B;a._RF.push({},"460aaQUKTdIaLfO3mxG7k1O","confirmAgain",void 0);const{ccclass:I,property:N}=l;e("confirmAgain",(m=I("confirmAgain"),g=N(i),_=N(i),y=N(r),k=N(o),S=N(o),m((C=t((M=class extends s{constructor(...e){super(...e),n(this,"btn_re",C,this),n(this,"btn_make",F,this),n(this,"icon",O,this),n(this,"name_label",A,this),n(this,"phone_label",B,this),this.gameData=void 0}start(){this.gameData=b.loadProgress(),d.loadSpriteFrame("b_bundle",`resources/textures/popup/${this.gameData.bindInfo.channelID}`).then((e=>{this.icon.spriteFrame=e})).catch((e=>{console.error("Failed to load sprite data:",e)})),this.name_label.string=this.gameData.bindInfo.name,this.phone_label.string=this.gameData.bindInfo.phoneNumber,p.handleBtnClickWithSound1(this.btn_make,(()=>{this.onMake()}),this),p.handleBtnClickWithSound1(this.btn_re,(()=>{d.loadPrefab("b_bundle",h.INPUT_INFO_PRE).then((e=>{u(e).parent=this.node.parent,this.node.destroy()})).catch((e=>{console.error("Failed to load prefab data:",e)}))}),this)}async onMake(){if(b.getGameData().money<h.CASH_MONEY){let e=h.CASH_NOT_INFO,t=await f.instance.getSign();e=e.replace("%s",t[0]+(h.CASH_MONEY*Number(t[1])).toFixed(2)),c.emit(h.SHOW_TOAST,e)}}}).prototype,"btn_re",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(M.prototype,"btn_make",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(M.prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(M.prototype,"name_label",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(M.prototype,"phone_label",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=M))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/Congratulations.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BundleLoader.ts","./RateManager.ts","./CurrencyFormatter.ts","./Constant2.ts"],(function(t){var n,e,o,r,a,s,i,l,c,u,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){o=t.cclegacy,r=t.RichText,a=t._decorator,s=t.Component,i=t.tween},function(t){l=t.BundleLoader},function(t){c=t.default},function(t){u=t.CurrencyFormatter},function(t){d=t.default}],execute:function(){var h,g,y,f,p;o._RF.push({},"548f8ZmvjBM8YuDoq6Vugv4","Congratulations",void 0);const{ccclass:m,property:C}=a;t("Congratulations",(h=m("Congratulations"),g=C(r),h((p=n((f=class extends s{constructor(...t){super(...t),e(this,"msg",p,this),this.jsonData=null}start(){this.init(),this.playAnim()}async init(){this.jsonData=await l.loadJson("b_bundle","resources/data/rank"),await this.initMsg()}async initMsg(){let t=this.jsonData.length,n=Math.floor(Math.random()*(t-0))+0;n>=t&&(n=0);let e=this.jsonData[n],o=await c.instance.getSign(),r="",a=e.withdrawals*Number(o[1]),s=u.formatCurrency(a,Number(o[3]),3==o[2]);r=o[0]+` ${s}`;const i=`Congrats <color=#616bd7>${e.player}</color> successfully withdrew<br/><color=#ff4e00>${r}</color>`;this.msg.string=i}playAnim(){this.node.y+=400,i(this.node).to(.3,{y:0}).delay(d.WAITTIME).to(.3,{y:400}).call((()=>{this.node.removeAllChildren(),this.node.destroy()})).start()}}).prototype,"msg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=f))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/Constant2.ts",["cc"],(function(e){var _;return{setters:[function(e){_=e.cclegacy}],execute:function(){_._RF.push({},"e489907R35P5rxTjARpWlmr","Constant",void 0);class E{}e("default",E),E.LEVEL_1_2_TYPE=[7,25,35],E.SIMPLE_CENG=20,E.ITEM_FLY_TIME=.2,E.SHADOM_NUM=3,E.FREE_GEZI=7,E.MAX_GEZI=8,E.MAX_ITEM=36,E.ADD_MONEY_1_2=3,E.ADD_MONEY_3=.3,E.ELIM_REWARD=3,E.LIMITLEVEL_AD=[30,100,200],E.REMOVE_AD=[6,5,4],E.FORCE_AD=3,E.REMOVE_AD_COIN=3.5,E.REMOVE_AD_DIAMOND=3,E.BUY_MOVE=100,E.BUY_ROLLBACK=100,E.BUY_REFRESH=100,E.BUY_ADDGEZI=500,E.BUY_FUHUO=100,E.FLYBOX_TIME=15,E.FLYBOX_INTERVAL=70,E.PEDING_NUM=8e3,E.SUBMIT_MONEY=[8.88,98.76,197.52,296.28],E.DAILY_SPEED_NUM=1,E.SHOW_TOAST="show_toast",E.SHOW_LUCKY_BOX="show_lucky_box",E.REFRESH_BUTTOM="refresh_buttom",E.REFRESH_TOP="refresh_top",E.REFRESH_GEZI="refresh_gezi",E.REFRESH_TASK_RED_DOT="refresh_task_red_dot",E.REFRESH_TASK_MAIN_RED_DOT="refresh_task_main_red_dot",E.REFRESH_INPUT="refresh_input",E.MONEY_FLY="money_fly",E.DIAMOND_SHAKE="diamond_shake",E.REFRESHACCOLADE="refresh_accolade",E.SHOW_WALLET="show_wallet",E.SHOW_WITHDRAW="show_withdraw",E.CLOSE_WALLET="close_wallet",E.ACTIVE_RANK_SYSTEM="active_rank_system",E.SOUND_AD="resources/sounds/ad",E.SOUND_BG="resources/sounds/bg",E.SOUND_BTN="resources/sounds/click_btn",E.SOUND_ITEM="resources/sounds/click_item",E.SOUND_LOSE="resources/sounds/lose",E.SOUND_REMOVE="resources/sounds/remove",E.SOUND_REWARD="resources/sounds/reward",E.SOUND_START="resources/sounds/start",E.SOUND_WIN="resources/sounds/win",E.ADD_SPACE_PRE="prefabs/addspace",E.RESULT_PRE="prefabs/result",E.INPUT_INFO_PRE="prefabs/inputinfo",E.LEVEL_SELECT_PRE="prefabs/levelselect",E.LEVEL_STATIC_PRE="prefabs/levelstatic",E.LUCK_BOX_PRE="prefabs/luckbox",E.FLY_BOX_DIALOG_PRE="prefabs/flyBoxDialog",E.MOVE_PRE="prefabs/move",E.RANK_INFO_PRE="prefabs/rankinfo",E.RANK_ITEM_PRE="prefabs/rankitem",E.FLY_BOX_PRE="prefabs/flyBox",E.START_OVER_PRE="prefabs/startover",E.TASK_PRE="prefabs/task",E.TASKITEM_PRE="prefabs/taskitem",E.TOAST_PRE="prefabs/toast",E.PAY_METHOD="prefabs/paymethod",E.CONFIRM_AGAIN="prefabs/confirmAgain",E.MASK_TIPS="prefabs/Mask_tips",E.MASK="prefabs/Mask",E.VICTORYACCOLADE_PRE="prefabs/victoryAccolade",E.CONGRATS_PRE="prefabs/Congratulations",E.HALFDIALOG_PRE="prefabs/halfDialog",E.CASHSUCCESS_PRE="prefabs/cashSuccess",E.SIGNIN_PRE="prefabs/signIn",E.WALLET_PRE="prefabs/wallet",E.RECORD_PRE="prefabs/record",E.PENDING_PRE="prefabs/Pending",E.FIRST_LOSE="first_lose",E.ALREADY_USED="Already used",E.NO_MOBILITY="No mobility",E.NO_ENOUGH_DIAMONDS="Diamonds not enough",E.PASS_LEVEL_3="Pass level 3 to withdraw funds",E.ENTER_NAME="Please enter your name",E.ENTER_EMAIL="Please check your email again",E.ENTER_PHONE="Please check your phone number again",E.MAX_DAILY="The maximum daily claim limit has been reached",E.CHECK_INFO="Please check the information",E.CAN_NOT_CHECK_ACCOLADE="Insufficient total number of completions",E.PASS_THIS_LEVEL="Pass this level to withdraw all",E.SELECT_WITHDRAW_AMOUNT="Please select a withdrawal amount first",E.PASS_LEVEL_TO_UNLOCK="Please pass level %d to unblock",E.NO_SPEED_UP_AVAILABLE_TODAY="No Speed Up Available Today",E.isTestModel=!1,E.marqueeInterval=[10,20],E.doubleDuration=60,E.doubleFirstInterval=30,E.doubleInterval=60,E.doubleRewardInfo="Watch an ad win double\nawards in 1 minute",E.DOUBLEREWARD_PRE="prefabs/doubleReward",E.ROTARYTABLE_PRE="prefabs/rotaryTable",E.USEMATCH_NUM=2,E.MSG_WHEEL_TOAST="Fortune Wheel not ready",E.MSG_WHEEL_ENOUGH="Spin wheel to earn rewards！",E.MSG_WHEEL_NOT_ENOUGH="Remove %d more times to get 1 spin!",E.WAITTIME=2,E.LEVEL1_REWARD_MULTIPLIER=1,E.LEVEL2_REWARD_MULTIPLIER=1,E.LEVEL3_REWARD_MULTIPLIER=1,E.MAXADEARNMOENY=200,E.START_MONEY=100,E.CASH_MONEY=600,E.CASH_NOT_INFO="Collect %s rewards to withdraw all money",E.SHOW_CASH_SUCCESS="show_cash_success",E.FAIL_INFO="After collecting %s,you can withdraw all your money",_._RF.pop()}}}));

System.register("chunks:///_virtual/CurrencyFormatter.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"180f5LEktNDFprnURAxlAoz","CurrencyFormatter",void 0);t("CurrencyFormatter",class{static formatCurrency(t,r,e=!1){let n;{const r=100;return n=Math.round(t*r)/r,n.toFixed(2)}}static formatIndonesianLargeNumber(t){const r=t/1e6;return t%1e6==0?`${r}M`:`${r.toFixed(2)}M`}}),r._RF.pop()}}}));

System.register("chunks:///_virtual/doubleReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonClickHandler2.ts","./SDKManager.ts"],(function(e){var t,n,i,c,s,a,o,r,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,c=e.Button,s=e._decorator,a=e.Component,o=e.Vec3,r=e.tween},function(e){l=e.ButtonClickHandler},function(e){u=e.SDKManager}],execute:function(){var d,h,p,b,g;i._RF.push({},"accc2nYcENC4YaUpS4gUixA","doubleReward",void 0);const{ccclass:w,property:R}=s;e("doubleReward",(d=w("doubleReward"),h=R(c),d((g=t((b=class extends a{constructor(...e){super(...e),n(this,"btn_receive",g,this),this.callbackTarget=null}start(){l.handleBtnClickWithSound1(this.btn_receive,(()=>{u.instance.showRewardVideo(this,(()=>{this.onReward(),this.close()}),20,(()=>{this.close()}),(()=>{this.close()}))}),this)}onReward(){this.callbackTarget&&this.callbackTarget.onDoubleReward()}close(){const e=this.node.getChildByName("mask");e&&(e.active=!1);const t=new o(0,0,0),n=new o(1.1,1.1,1.1);r(this.node).to(.1,{scale:n},{easing:"sineOut"}).to(.25,{scale:t},{easing:"sineOut"}).call((()=>{this.node.destroy()})).start()}}).prototype,"btn_receive",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=b))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager2.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"19e66oifz9DdITkPeyxifUn","EventManager",void 0);class n{constructor(){this._eventMap=new Map}static get instance(){return n._instance||(n._instance=new n),n._instance}on(e,t,n){this._eventMap.has(e)||this._eventMap.set(e,new Set);this._eventMap.get(e).add({callback:t,target:n})}off(e,t){if(!this._eventMap.has(e))return;const n=this._eventMap.get(e);if(t)for(const e of n)e.callback!==t&&e.target!==t||n.delete(e);else n.clear()}emit(e,t){if(!this._eventMap.has(e))return;const n=this._eventMap.get(e);new Set(n).forEach((n=>{try{n.callback.call(n.target,t)}catch(t){console.error(`Event ${e} handler error:`,t)}}))}once(e,t,n){this.on(e,(e=>{t.call(n,e)}),n)}}e("EventManager",n),n._instance=void 0;e("eventManager",n.instance);t._RF.pop()}}}));

System.register("chunks:///_virtual/flyBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant2.ts","./EventManager2.ts","./ButtonClickHandler2.ts"],(function(t){var e,i,n,s,o,r,a,h,l,d,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t._decorator,o=t.Component,r=t.view,a=t.Vec3,h=t.UITransform,l=t.Button},function(t){d=t.default},function(t){c=t.eventManager},function(t){u=t.ButtonClickHandler}],execute:function(){var p,f,y,m;n._RF.push({},"03a87de8KhMQZFbC8Ll9ghG","flyBox",void 0);const{ccclass:g,property:v}=s;t("flyBox",g("flyBox")((y=e((f=class extends o{constructor(...t){super(...t),i(this,"amplitude",y,this),i(this,"frequency",m,this),this.speed=0,this.startY=0,this.screenWidth=0,this.elapsedTime=0}start(){var t;this.startY=this.node.position.y,this.screenWidth=r.getVisibleSize().width,this.speed=this.screenWidth/d.FLYBOX_TIME;const e=new a(-(null==(t=this.node.getComponent(h))?void 0:t.width)-350||-100,this.startY,0);this.node.setPosition(e),this.elapsedTime=0,u.handleBtnClickWithSound1(this.node.getComponent(l),(()=>{this.node.destroy(),c.emit(d.SHOW_LUCKY_BOX)}),this)}update(t){var e;this.elapsedTime+=t;const i=this.node.position.x+this.speed*t,n=this.startY+Math.sin(this.elapsedTime*this.frequency)*this.amplitude;this.node.setPosition(i,n,0),i>this.screenWidth+((null==(e=this.node.getComponent(h))?void 0:e.width)||100)&&this.node.destroy()}}).prototype,"amplitude",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),m=e(f.prototype,"frequency",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),p=f))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/FlyBoxDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonClickHandler2.ts","./SDKManager.ts","./gameManager2.ts","./Constant2.ts","./EventManager2.ts","./LayerScale2.ts","./RateManager.ts"],(function(t){var e,i,n,s,r,a,l,o,h,d,u,c,p,g,y,b,m,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Label,r=t.Button,a=t.SpriteFrame,l=t.Node,o=t._decorator,h=t.Component,d=t.tween,u=t.v3},function(t){c=t.ButtonClickHandler},function(t){p=t.SDKManager},function(t){g=t.GameManager},function(t){y=t.default},function(t){b=t.eventManager},function(t){m=t.LayerScale},function(t){f=t.default}],execute:function(){var w,S,M,A,k,E,_,B,R,v,D,x,P,F,C;n._RF.push({},"54ea3KjeVpHMYPAlZbpLrmV","FlyBoxDialog",void 0);const{ccclass:L,property:X}=o;t("FlyBoxDialog",(w=L("FlyBoxDialog"),S=X(s),M=X({type:r}),A=X({type:r}),k=X({type:a}),E=X({type:l}),_=X(s),w((v=e((R=class extends h{constructor(...t){super(...t),i(this,"luckyDiamondValue",v,this),i(this,"btn_lucky_receive",D,this),i(this,"btn_close",x,this),i(this,"icon",P,this),i(this,"point",F,this),i(this,"labelBound",C,this),this.updataCallback=null,this.singleReward=0,this.singleReward2=0,this.rewardBound=1,this.limitArray=[-375,-180,-40,62,201,400],this.boundArray=[3,5,10,5,3],this.targetPos=null,this.signArry=[],this.adStopX=0,this.speed=0,this.MAXSPEED=300,this.dir=1,this.isStoping=!1,this.reduceSpeed=0}start(){this.adStopX=82*Math.random()-30}onEnable(){this.scheduleOnce((()=>{this.node.getChildByName("MarqueeNode").active=!0}),.5)}onDestroy(){var t;this.updataCallback&&(null==(t=this.updataCallback)||t.call(this),this.updataCallback=null)}setCallback(t){this.updataCallback=t}initData(t){this.targetPos=t}async setModel(t){const e=g.loadProgress();this.rewardBound=this.boundArray[2],this.singleReward=2,this.signArry=await f.instance.getSign();let i=(Math.floor(this.singleReward*Number(this.signArry[1])*100)/100).toFixed(2);this.singleReward2=Math.round(100*Number(i))/100,this.luckyDiamondValue.string="+"+this.signArry[0]+(this.singleReward2*this.rewardBound).toFixed(2),c.handleBtnClickWithSound1(this.btn_lucky_receive,(()=>{p.instance.showRewardVideo(this,(()=>{c.clearEvent(this.btn_lucky_receive),c.clearEvent(this.btn_close),this.onStopAnim()}))}),this),c.handleBtnClickWithSound1(this.btn_close,(()=>{e.level>2&&p.instance.showInterstitial(),c.clearEvent(this.btn_lucky_receive),c.clearEvent(this.btn_close),this.onSingleReward()}),this),this.btn_close.node.setScale(0,0,0),d(this.btn_close.node).delay(y.WAITTIME).to(.2,{scale:u(1,1,1)}).start()}onRewardLucky(){this.node.getComponent(m).close();const t=g.loadProgress();let e=this.singleReward*this.rewardBound;t.money+=e,t.adEarnMoney+=e,g.saveProgress(t),b.emit(y.REFRESH_TOP);let i=this.signArry[0]+(this.singleReward2*this.rewardBound).toFixed(2);b.emit(y.MONEY_FLY,[i,null])}onSingleReward(){this.node.getComponent(m).close();const t=g.loadProgress();let e=this.singleReward;t.money+=e,t.adEarnMoney+=e,g.saveProgress(t),b.emit(y.REFRESH_TOP);let i=this.signArry[0]+this.singleReward2.toFixed(2);b.emit(y.MONEY_FLY,[i,null])}update(t){if(this.isStoping||(this.speed<this.MAXSPEED&&(this.speed+=1.5),this.speed>this.MAXSPEED&&(this.speed=this.MAXSPEED)),!(this.speed<=0)){if(this.isStoping&&(this.speed=this.MAXSPEED,Math.abs(this.point.x-this.adStopX)<10&&(this.speed=0)),this.speed<=0)return this.refrehMsg(),void this.onRewardLucky();this.point.x+=this.speed*t*this.dir,this.point.x<=this.limitArray[0]?(this.dir*=-1,this.point.x=this.limitArray[0]):this.point.x>=this.limitArray[this.limitArray.length-1]&&(this.dir*=-1,this.point.x=this.limitArray[this.limitArray.length-1]),this.refrehMsg()}}refrehMsg(){this.checkBound();let t=Math.round(100*this.singleReward2)*this.rewardBound/100;this.luckyDiamondValue.string="+"+this.signArry[0]+t.toFixed(2),this.labelBound.string=this.rewardBound.toString()}checkBound(){let t=0;for(let e=1;e<=this.limitArray.length-1;e++){let i=this.limitArray[e];if(this.point.x<=i){t=e-1;break}}this.rewardBound=this.boundArray[t]}onStopAnim(){this.isStoping=!0}}).prototype,"luckyDiamondValue",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(R.prototype,"btn_lucky_receive",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(R.prototype,"btn_close",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(R.prototype,"icon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(R.prototype,"point",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(R.prototype,"labelBound",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=R))||B));n._RF.pop()}}}));

System.register("chunks:///_virtual/flyBoxNode.ts",["cc","./Constant2.ts","./BundleLoader.ts"],(function(t){var e,n,s,a,o,c;return{setters:[function(t){e=t.cclegacy,n=t.Component,s=t.instantiate,a=t._decorator},function(t){o=t.default},function(t){c=t.BundleLoader}],execute:function(){var l;e._RF.push({},"c32f5JEUnlPZKTc5bAkReKr","flyBoxNode",void 0);const{ccclass:d,property:r}=a;t("flyBoxNode",d("flyBoxNode")(l=class extends n{onLoad(){this.startFly()}startFly(){this.unschedule(this.spawnInstance),this.schedule(this.spawnInstance,o.FLYBOX_INTERVAL)}stopFlay(){this.unschedule(this.spawnInstance)}spawnInstance(){c.loadPrefab("b_bundle",o.FLY_BOX_PRE).then((t=>{s(t).parent=this.node.parent.getChildByName("flyBoxNode")})).catch((t=>{console.error("Failed to load prefab data:",t)}))}})||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./result.ts","./levelselect.ts","./flyBoxNode.ts","./startover.ts","./rank.ts","./wallet.ts","./OpenDiamond.ts","./levelstatic.ts","./toast.ts","./Constant2.ts","./EventManager2.ts","./gameManager2.ts","./gameAlg.ts","./move.ts","./CurrencyFormatter.ts","./ButtonClickHandler2.ts","./TaskData.ts","./BundleLoader.ts","./OpenTask.ts","./SDKManager.ts","./AudioManager.ts","./doubleReward.ts","./RotaryTable.ts","./FlyBoxDialog.ts","./DataManager.ts","./VictoryAccolade.ts","./inputinfo.ts","./ReportManager.ts"],(function(t){var e,i,o,s,a,n,l,r,h,d,m,c,g,u,p,b,y,f,D,S,_,C,v,w,N,P,A,I,k,x,T,R,B,E,M,z,G,F,O,L,W,U,$,H,V,K,Y,J,Z,X,j,q,Q,tt,et;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,s=t.Button,a=t.Prefab,n=t.Node,l=t.SpriteFrame,r=t.JsonAsset,h=t._decorator,d=t.Component,m=t.instantiate,c=t.tween,g=t.director,u=t.view,p=t.Sprite,b=t.Vec3,y=t.UITransform,f=t.Mask,D=t.Label,S=t.sp,_=t.v3,C=t.Layers,v=t.Graphics,w=t.Color,N=t.Tween,P=t.size,A=t.EditBox},function(t){I=t.result},function(t){k=t.levelselect},function(t){x=t.flyBoxNode},function(t){T=t.startover},function(t){R=t.RankManager},function(t){B=t.wallet},function(t){E=t.OpenDiamond},function(t){M=t.levelstatic},function(t){z=t.toast},function(t){G=t.default},function(t){F=t.eventManager},function(t){O=t.GameManager},function(t){L=t.GameAlg},function(t){W=t.move},function(t){U=t.CurrencyFormatter},function(t){$=t.ButtonClickHandler},function(t){H=t.TaskData},function(t){V=t.BundleLoader},function(t){K=t.OpenTask},function(t){Y=t.SDKManager},function(t){J=t.default},function(t){Z=t.doubleReward},function(t){X=t.RotaryTable},function(t){j=t.FlyBoxDialog},function(t){q=t.DataManager},function(t){Q=t.VictoryAccolade},function(t){tt=t.inputinfo},function(t){et=t.ReportManager}],execute:function(){var it,ot,st,at,nt,lt,rt,ht,dt,mt,ct,gt,ut,pt,bt,yt,ft,Dt,St,_t,Ct,vt,wt,Nt,Pt,At,It,kt,xt,Tt,Rt,Bt,Et,Mt,zt,Gt,Ft,Ot,Lt,Wt,Ut,$t,Ht,Vt,Kt,Yt,Jt,Zt,Xt,jt,qt,Qt,te,ee,ie,oe,se,ae,ne,le,re,he,de,me,ce,ge,ue,pe,be,ye,fe,De,Se;o._RF.push({},"ee0d8UHIdVBso7lKh44pyzf","game",void 0);const{ccclass:_e,property:Ce}=h;t("game",(it=_e("game"),ot=Ce({type:s}),st=Ce({type:s}),at=Ce({type:s}),nt=Ce({type:s}),lt=Ce({type:a}),rt=Ce({type:a}),ht=Ce({type:a}),dt=Ce({type:a}),mt=Ce({type:a}),ct=Ce({type:n}),gt=Ce({type:n}),ut=Ce({type:n}),pt=Ce({type:n}),bt=Ce({type:n}),yt=Ce({type:n}),ft=Ce({type:n}),Dt=Ce({type:s}),St=Ce({type:s}),_t=Ce({type:s}),Ct=Ce({type:s}),vt=Ce({type:s}),wt=Ce({type:[l],tooltip:"第1,2关的道具类型直接写死,界面可以马上显示，不用等预加载"}),Nt=Ce({type:[l]}),Pt=Ce({type:[l]}),At=Ce(r),It=Ce({type:s}),kt=Ce({type:s}),xt=Ce({type:s}),Tt=Ce({type:n}),Rt=Ce({type:s}),Bt=Ce({type:n}),Et=Ce({type:n}),Mt=Ce({type:a}),zt=Ce({type:s}),Gt=Ce({type:n}),it((Lt=e((Ot=class t extends d{constructor(...t){super(...t),i(this,"btn_move",Lt,this),i(this,"btn_refresh",Wt,this),i(this,"btn_reset",Ut,this),i(this,"btn_rollback",$t,this),i(this,"bigBox",Ht,this),i(this,"smallBox",Vt,this),i(this,"shouPre",Kt,this),i(this,"MaskPrefab",Yt,this),i(this,"MaskTipsPrefab",Jt,this),i(this,"content",Zt,this),i(this,"bottom",Xt,this),i(this,"top",jt,this),i(this,"gezi",qt,this),i(this,"money_node",Qt,this),i(this,"diamond_node",te,this),i(this,"bottomExtra",ee,this),i(this,"btn_rank",ie,this),i(this,"btn_task",oe,this),i(this,"btn_diamond",se,this),i(this,"btn_withdraw",ae,this),i(this,"btn_input",ne,this),i(this,"level_1_2_spriteFrames",le,this),i(this,"box_sp",re,this),i(this,"boxshad_sp",he,this),i(this,"rateJson",de,this),i(this,"btn_rotaryTable",me,this),i(this,"btn_doubleReward",ce,this),i(this,"btn_group",ge,this),i(this,"group",ue,this),i(this,"btn_accolade",pe,this),i(this,"start_money_icon",be,this),i(this,"left_node",ye,this),i(this,"cashPrefab",fe,this),i(this,"btn_signIn",De,this),i(this,"btn_wallet",Se,this),this._originalAddMoneyPos=void 0,this._originalAddDiamondPos=void 0,this.items=[],this.boxNodes=[],this.geziPositions=[],this.moneypoints=null,this.bottomSlots=Array(G.FREE_GEZI).fill(null),this.bottomGezi=[],this.bottomExtraGezi=[],this.originalExtraPositions=[],this.allitemPositions=Array.from({length:100},(()=>Array.from({length:100},(()=>[])))),this.clickMoveNumArry=[],this.clickRollbackNumArry=[],this.clickRefreshNumArry=[],this.guideMask=null,this.canClickTypeArry=[],this.flyBoxComp=void 0,this.gameData=void 0,this.levelData=null,this.shadowNameSuffixes=[],this.historyStack=[],this.moveNum=0,this.step=0,this.MASKNode=null,this.MASKTIPSNode=null,this.showGuide=!0,this.signArry=[],this.isBundleLoading=!1,this.isBundleLoaded=!1,this.rewardData=[],this.fortuneWheelData=[],this.levelJson=null,this.victoryAccoladeData=[],this.bBundleName="",this.rankUpdateInterval=3600,this.lastRankUpdateTime=0,this.isRankUpdateScheduled=!1,this.isClickCooling=!1,this.is_tip=!1,this.isGroupAnim=!1,this.isOpenGroup=!1,this.playDuration=0,this.playStep=0,this.playRevive=0,this.gameEndState="",this.isPlaying=!0,this.record_duration=0,this.RECORD_DURATION=5}loadBundleResources(){this.isBundleLoading||this.isBundleLoaded||(this.isBundleLoading=!0,console.log("开始后台加载b_bundle资源..."),V.loadRemoteBundleAllRes("b_bundle",(t=>{t.success?(console.log("b_bundle Prefab资源加载完成"),V.loadItemsAllRes("b_bundle",(t=>{t.success?(console.log("b_bundle Items图片资源加载完成"),this.isBundleLoaded=!0,this.isBundleLoading=!1):t.failed&&(console.error("b_bundle Items图片资源加载失败"),this.isBundleLoading=!1)}))):t.failed&&(console.error("b_bundle Prefab资源加载失败"),this.isBundleLoading=!1)})))}showToast(t){V.loadPrefab("b_bundle",G.TOAST_PRE).then((e=>{const i=m(e);i.getComponent(z).setString(t),i.parent=this.node})).catch((t=>{console.error("Failed to load prefab data:",t)}))}getSign(){let t="$",e=1,i=1,o=.1,s=Y.instance.getCountry();for(let a=0;a<this.rateJson.json.length;a++){const n=this.rateJson.json[a];n.country_code==String(s)&&(t=n.sign,e=n.rate,i=n.type,o=n.min_units)}return[t,e,i,o]}showWalletBtn(){this.btn_wallet&&(this.gameData=O.loadProgress(),this.btn_wallet.active=!0,this.gameData.wallentMoney+=this.gameData.money,this.gameData.money=0,O.saveProgress(this.gameData),this.refreshTop(),this.showLevelSelect((()=>{this.gameData=O.loadProgress(),Y.instance.reportEvent("Level_",this.gameData.level.toString()),this.gameData.level+=1,O.setIsPlaying(!0),O.saveProgress(this.gameData),this.gameEndState="success",this.restartGame()})))}initRankChangeSystem(){this.gameData&&(this.lastRankUpdateTime=this.gameData.lastRankUpdateTime||0,this.schedule(this.checkRankUpdate,60))}checkRankUpdate(){const t=Date.now();(t-this.lastRankUpdateTime)/1e3>=this.rankUpdateInterval&&(this.gameData=O.loadProgress(),this.updateUserRank(),this.lastRankUpdateTime=t,this.gameData.lastRankUpdateTime=t,O.saveProgress(this.gameData))}updateUserRank(){const t=this.gameData.pendingNum;let e;if(1===t)e=this.calculateBackwardRank(t);else{e=Math.random()<.6?this.calculateForwardRank(t):this.calculateBackwardRank(t)}this.gameData=O.loadProgress(),e=Math.max(1,Math.floor(e)),e=Math.min(G.PEDING_NUM,Math.floor(e));const i=this.gameData.pendingNum;this.gameData.pendingNum=e,O.saveProgress(this.gameData),console.log(`排名更新: ${i} -> ${e}`)}calculateForwardRank(t){const e=.01*t,i=.03*t;let o=t-(Math.random()*(i-e)+e);return o=Math.max(1,o),t>1&&o>=t&&(o=t-1),o}calculateBackwardRank(t){let e=t+.02*t;return 1===t&&(e=Math.max(2,e)),e}start(){this.gameData=O.loadProgress(),G.isTestModel&&(this.gameData.level=3,this.gameData.money=0,this.gameData.showGuide=!1,this.gameData.diamonds=9999,O.saveProgress(this.gameData)),this.start_money_icon.active=!1,this.gameData.submitTimestamp>0&&this.initRankChangeSystem(),this.reportGameStart(),this.initTest(),this.initData(),this.initFortuneWheelData(),this.btn_group.node.getChildByName("group_off_icon").active=!0,this.btn_group.node.getChildByName("group_on_icon").active=!1,this.group.setScale(0,0,1),this.signArry=this.getSign();let t=localStorage.getItem(G.FIRST_LOSE);t&&null!=t||(t="0",localStorage.setItem(G.FIRST_LOSE,t)),this.shadowNameSuffixes=Array.from({length:G.SHADOM_NUM},((t,e)=>`_shadow${e+1}`)),!O.getIsPlaying()&&this.gameData.level<2&&(this.gameData.level=1,this.gameData.money=0,this.gameData.showGuide=!0,this.gameData.items=[],this.gameData.itemCount=[0,0,0],this.gameData.itemUseCount=[0,0,0],this.gameData.historyStack=[],this.gameData.bottomSlots=Array(this.gameData.endGeziLock?G.FREE_GEZI:G.MAX_GEZI).fill(null),this.gameData.bottomExtraData=[],O.saveProgress(this.gameData)),this.btn_doubleReward.node.setScale(0,0,0),this.initDoubleReward(),this.initBtnRotaryTable(),this.refreshTop(),this.initBg(),this.initGeziPositions(),this.initBtns(),this.updateTaskRedDot(),this.historyStack=this.gameData.historyStack;const e=this.top.getChildByName("AddMoneyNode");this._originalAddMoneyPos=e.position.clone();const i=this.top.getChildByName("AddDiamondNode");this._originalAddDiamondPos=i.position.clone(),this.levelJson=q.instance.levelJson,this.levelJson?this.createGame():V.loadJson("b_bundle","resources/data/level").then((t=>{this.levelJson=t,this.createGame()})).catch((t=>{console.error("Failed to load level data:",t)})),J.inst.play(G.SOUND_BG,!0,.1),this.initOriginalExtraPositions(),F.on(G.SHOW_TOAST,(t=>{this.showToast(t)}),this),F.on(G.REFRESH_BUTTOM,(t=>{this.canClickTypeArry&&(0==t?this.canClickTypeArry[t]=this.canClickTypeArry[t]-1:(this.gameData=O.loadProgress(),this.canClickTypeArry[t]=this.canClickTypeArry[t]+1,this.gameData.itemCount[t-1]++,O.saveProgress(this.gameData))),this.refreshBottom()}),this),F.on(G.REFRESH_TOP,(t=>{this.refreshTop()}),this),F.on(G.REFRESH_GEZI,(t=>{this.refreshLockGezi()}),this),F.on(G.REFRESH_INPUT,(t=>{this.showInputView()}),this),F.on(G.MONEY_FLY,(t=>{this.showMoneyFlyView(t)}),this),F.on(G.DIAMOND_SHAKE,(t=>{this.showDiamondShake(t)}),this),F.on(G.REFRESHACCOLADE,(()=>{this.onRefreshVictoryAccolade()}),this),F.on(G.SHOW_CASH_SUCCESS,(()=>{this.showCashSuccess()}),this),F.on(G.SHOW_WALLET,(()=>{this.showWalletBtn()}),this),F.on(G.CLOSE_WALLET,(()=>{this.closeWalletView()}),this),F.on(G.ACTIVE_RANK_SYSTEM,(()=>{this.initRankChangeSystem()}),this),F.on(G.SHOW_WITHDRAW,(()=>{this.OpenLevelStatic("Withdraw",(()=>{}),"result")}),this),this.flyBoxComp=this.node.getChildByName("flyBoxNode").getComponent(x),F.on(G.SHOW_LUCKY_BOX,(t=>{this.flyBoxComp&&(this.flyBoxComp.stopFlay(),V.loadPrefab("b_bundle",G.FLY_BOX_DIALOG_PRE).then((t=>{const e=m(t);this.node.addChild(e);const i=e.getComponent(j);i.setModel("Lucky");let o=this.top.getChildByName("diamond").getChildByName("money").getWorldPosition();i.initData(o),i.setCallback((()=>{this.flyBoxComp.startFly()}))})).catch((t=>{console.error("Failed to load prefab data:",t)})))}),this),F.on(G.REFRESH_TASK_MAIN_RED_DOT,(()=>{this.updateTaskRedDot()}),this),this.clickMoveNumArry[this.gameData.level]=this.gameData.itemUseCount[0],this.clickRollbackNumArry[this.gameData.level]=this.gameData.itemUseCount[1],this.clickRefreshNumArry[this.gameData.level]=this.gameData.itemUseCount[2],this.canClickTypeArry=[void 0,this.gameData.itemCount[0],this.gameData.itemCount[1],this.gameData.itemCount[2]];const o=this.gezi.children[this.gezi.children.length-1];if(o.getChildByName("node").active=!1,this.gameData.endGeziLock){o.getChildByName("node").active=!0;const t=o.getChildByName("node").getChildByName("zhanwei");this.startSmoothJump(t),t.on("click",(()=>{this.showGuide||(J.inst.playOneShot(G.SOUND_BTN),V.loadPrefab("b_bundle",G.ADD_SPACE_PRE).then((t=>{const e=m(t);this.node.addChild(e)})).catch((t=>{console.error("Failed to load prefab data:",t)})))}),this)}}createGame(){this.levelData=this.levelJson[this.gameData.level-1],this.initGameData(),this.refreshBottom(),this.createBigBoxes(),this.initBottomExtraSlots(),this.initBottomSlots(),(this.gameData.level>=3||!this.gameData.showGuide)&&(this.showGuide=!1),this.showGuide&&(1==this.gameData.level?this.showGuideView():2==this.gameData.level&&(this.step=7,this.showMask())),c(g.getScene()).delay(.5).call((()=>{this.showCongratsView(),this.gameData.level>=2&&(this.btn_wallet.active=!0)})).delay(.5).call((()=>{V.preloadRes(this.bBundleName)})).start()}refreshLockGezi(){if(!this.gezi)return;this.gameData=O.getGameData();this.gezi.children[this.gezi.children.length-1].getChildByName("node").active=!1,this.bottomSlots.push(null),this.gameData.bottomSlots=this.bottomSlots,O.saveProgress(this.gameData)}startSmoothJump(t){let e=t.position.y;c(t).to(.4,{y:e+50},{easing:"sineOut"}).to(.4,{y:e},{easing:"sineIn"}).union().repeatForever().start()}initBg(){const t=this.node.getChildByName("bg");if(!t)return;const e=u.getVisibleSize(),i=t.getComponent(p);if(!i||!i.spriteFrame)return;const o=i.spriteFrame.originalSize,s=e.width/o.width,a=e.height/o.height,n=Math.max(s,a);t.setScale(n,n,1)}initGeziPositions(){this.geziPositions=[];for(let t=0;t<G.MAX_GEZI;t++)this.geziPositions.push(this.gezi.getChildByName(`${t+1}`).getPosition())}createSideNodeAnimation(t,e,i=!1){const o=t.position.clone();return c(t).to(.5,{position:new b(o.x+e,o.y,o.z)}).call((()=>{i&&this.reshuffleItems()})).delay(1).to(.5,{position:o})}closeWalletView(){if(!this.node)return;const t=this.node.getChildByName("walletPrefab");t&&t.destroy()}initBtns(){this.btn_move&&$.handleBtnClickWithSound1(this.btn_move,(()=>{this.clearGuide(),this.clickMoveNumArry[this.gameData.level]>=this.levelData.maxMoveNum?F.emit(G.SHOW_TOAST,G.ALREADY_USED):this.canClickTypeArry[1]<=0?this.showBottomPrefab(1):this.move()}),this),this.btn_rollback&&$.handleBtnClickWithSound1(this.btn_rollback,(()=>{this.clearGuide(),this.rollback()}),this),this.btn_refresh&&$.handleBtnClickWithSound1(this.btn_refresh,(()=>{var t,e;if(this.clearGuide(),this.clickRefreshNumArry[this.gameData.level]>=this.levelData.maxRefreshNum)return void F.emit(G.SHOW_TOAST,G.ALREADY_USED);if(1!=this.canClickTypeArry[3])return void this.showBottomPrefab(3);const i=this.node.getChildByName("door1"),o=this.node.getChildByName("door2");this.createSideNodeAnimation(i,null==(t=i.getComponent(y))?void 0:t.width).start(),this.createSideNodeAnimation(o,-(null==(e=o.getComponent(y))?void 0:e.width),!0).start()}),this),this.btn_reset&&$.handleBtnClickWithSound1(this.btn_reset,(()=>{2==this.gameData.level&&(this.hideMask(),this.gameData.showGuide=!1),V.loadPrefab("b_bundle",G.START_OVER_PRE).then((t=>{const e=m(t);this.node.addChild(e);e.getComponent(T).initData((()=>{this.showLevelSelect((()=>{O.setIsPlaying(!0),this.gameEndState="replay",this.restartGame()}),this.gameData.level)}))})).catch((t=>{console.error("Failed to load prefab data:",t)}))}),this),$.handleBtnClickWithSound1(this.btn_rank,(()=>{V.loadPrefab("b_bundle",G.RANK_INFO_PRE).then((t=>{const e=m(t);e.getComponent(R).initData(this.signArry),this.node.addChild(e)})).catch((t=>{console.error("Failed to load prefab data:",t)}))}),this),$.handleBtnClickWithSound1(this.btn_wallet.getComponent(s),(()=>{2==this.gameData.level&&(this.hideMask(),this.gameData.showGuide=!1),V.loadPrefab("b_bundle",G.WALLET_PRE).then((t=>{const e=m(t);e.name="walletPrefab";e.getComponent(B).initData(this.signArry),this.node.addChild(e)})).catch((t=>{console.error("Failed to load prefab data:",t)}))}),this),this.btn_task&&$.handleBtnClickWithSound1(this.btn_task,(()=>{V.loadPrefab("b_bundle",G.TASK_PRE).then((t=>{const e=m(t),i=e.getComponent(K);let o=this.top.getChildByName("diamond").getChildByName("money").getWorldPosition();i.initData(o),this.node.addChild(e)})).catch((t=>{console.error("Failed to load prefab data:",t)}))}),this),this.btn_diamond&&this.btn_diamond.node.on("click",(()=>{this.showGuide||(J.inst.playOneShot(G.SOUND_BTN),V.loadPrefab("b_bundle",G.LUCK_BOX_PRE).then((t=>{const e=m(t);this.node.addChild(e);const i=e.getComponent(E);i.setModel("Daily");let o=this.top.getChildByName("diamond").getChildByName("money").getWorldPosition();i.initData(o)})).catch((t=>{console.error("Failed to load prefab data:",t)})))}),this),this.btn_withdraw&&$.handleBtnClickWithSound2(this.btn_withdraw,(()=>{if(this.showGuide){const t=this.node.getChildByName("shou");t&&t.removeFromParent(),this.hideMask(),this.restoreTopPos()}this.OpenLevelStatic("Withdraw",(()=>{}),"game")}),this),this.btn_input&&$.handleBtnClickWithSound1(this.btn_input,(()=>{this.showInputView()}),this),this.btn_rotaryTable&&$.handleBtnClickWithSound1(this.btn_rotaryTable,(()=>{this.showRotaryTable()}),this),this.btn_doubleReward&&$.handleBtnClickWithSound1(this.btn_doubleReward,(()=>{this.showDoubleReward()}),this),this.btn_group&&$.handleBtnClickWithSound1(this.btn_group,(()=>{this.onGroup()}),this),this.btn_accolade&&$.handleBtnClickWithSound1(this.btn_accolade,(()=>{this.onVictoryAccolade()}),this)}showInputView(){if(!this.node)return;let t;this.gameData=O.loadProgress(),t=this.gameData.bindInfo&&this.gameData.bindInfo.channelID>0?G.CONFIRM_AGAIN:G.INPUT_INFO_PRE,V.loadPrefab("b_bundle",t).then((t=>{const e=m(t);this.node.addChild(e),e.getComponent(tt).target=this})).catch((t=>{console.error("Failed to load prefab:",t)}))}OpenLevelStatic(t,e,i){this.node&&V.loadPrefab("b_bundle",G.LEVEL_STATIC_PRE).then((o=>{const s=m(o);this.node.addChild(s);s.getComponent(M).selectLayer(this.signArry,t,e,i)})).catch((t=>{console.error("Failed to load prefab data:",t)}))}reshuffleItems(){this.gameData=O.getGameData(),this.canClickTypeArry[3]=0,this.gameData.itemCount[2]=0,F.emit(G.REFRESH_BUTTOM,0),this.clickRefreshNumArry[this.gameData.level]++,this.gameData.itemUseCount[2]++,O.saveProgress(this.gameData);const t=[];for(let e=0;e<this.levelData.rows;e++)for(let i=0;i<3*this.levelData.columns;i++)for(let o=0;o<this.items[e][i].length;o++)null!==this.items[e][i][o]&&void 0!==this.items[e][i][o]&&t.push({type:this.items[e][i][o],row:e,col:i,layer:o});for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e].type,t[i].type]=[t[i].type,t[e].type]}const e=new Map;for(const i of t){const t=`${i.row}-${i.col}`;e.has(t)||e.set(t,new Map),e.get(t).set(i.layer,i.type)}for(let t=0;t<this.levelData.rows;t++)for(let i=0;i<3*this.levelData.columns;i++){const o=`${t}-${i}`;if(!e.has(o))continue;e.get(o).forEach(((e,o)=>{this.items[t][i][o]=e}));const s=t*this.levelData.columns+Math.floor(i/3),a=this.boxNodes[s];if(!a)continue;const n=i%3+1;V.loadSpriteFrame("b_bundle",`resources/textures/items/${this.getIconNum(this.items[t][i][0])}`).then((t=>{a.getChildByName(`${n}`).getComponent(p).spriteFrame=t})).catch((t=>{console.error("Failed to load sprite data:",t)}));for(let e=1;e<=Math.min(G.SHADOM_NUM,this.items[t][i].length-1);e++){const o=this.items[t][i][e],s=`${n}${this.shadowNameSuffixes[e-1]}`;a.getChildByName(s)&&V.loadSpriteFrame("b_bundle",`resources/textures/items/${this.getIconNum(o)}_shadow`).then((t=>{const e=a.getChildByName(s).getComponent(p);e.spriteFrame=t,e.node.active=!0})).catch((t=>{console.error("Failed to load sprite data:",t)}))}for(let e=Math.max(1,this.items[t][i].length);e<=G.SHADOM_NUM;e++){const t=`${n}${this.shadowNameSuffixes[e-1]}`;a.getChildByName(t)&&(a.getChildByName(t).active=!1)}}this.gameData.items=this.items,O.saveProgress(this.gameData)}showBottomPrefab(t){V.loadPrefab("b_bundle",G.MOVE_PRE).then((e=>{const i=m(e);i.getComponent(W).setItemType(t),this.node.addChild(i),i.getComponent("move").target=this})).catch((t=>{console.error("Failed to load prefab data:",t)}))}refreshBottom(){if(!this.btn_move||!this.btn_rollback||!this.btn_refresh)return;[{btn:this.btn_move,index:1},{btn:this.btn_rollback,index:2},{btn:this.btn_refresh,index:3}].forEach((({btn:t,index:e})=>{const i=t.node.getChildByName("jia"),o=t.node.getChildByName("red");i.active=!1,o.active=!1,this.canClickTypeArry[e]<=0&&(i.active=!0),this.canClickTypeArry[e]>=1&&(o.active=!0)}))}initGameData(){const t=new L({level:this.levelData.level,rows:this.levelData.rows,cols:this.levelData.columns,boxInfo:this.levelData.boxes,maxLayers:this.levelData.maxLayers,layersItemTypesCount:this.levelData.layersItemTypesCount,allItemTypes:G.MAX_ITEM,gridLayerRange:this.levelData.gridLayerRange});let e=!1;if(this.gameData.level>=2&&this.gameData.items.length>0&&(this.items=this.gameData.items,e=!0),!e){if(this.items=t.generateBoardData(),this.gameData.level>=2){let t=[];for(let e=1;e<=36;e++)t.push(e);t.sort((()=>Math.random()-.5));for(let e=0;e<this.items.length;e++){let i=this.items[e];for(let o=0;o<i.length;o++){let s=i[o];for(let i=0;i<s.length;i++)this.items[e][o][i]<=0||(this.items[e][o][i]=t[this.items[e][o][i]-1])}}}this.gameData.items=this.items;let e=0;for(let t of this.items)for(let i of t)e+=i.length;this.gameData.totalGroup=e/3,this.gameData.removedGroup=0,O.saveProgress(this.gameData)}console.log("======this.items",this.items),localStorage.setItem("item",JSON.stringify(this.items)),this.bottomSlots=this.gameData.bottomSlots}createBigBoxes(){const t=this.levelData.boxes;this.boxNodes=[],this.content.removeAllChildren();for(let e=0;e<this.levelData.rows;e++){let i=this.items[e];for(let o=0;o<this.levelData.columns;o++){const s=t[e*this.levelData.columns+o];if(0===s.z){const t="small"===this.levelData.boxType?m(this.smallBox):m(this.bigBox);t.setPosition(s.x,s.y,0),t.getChildByName("box_bg").getComponent(p).spriteFrame=this.box_sp[o+1],t.getChildByName("mask").getChildByName("box_shad").getComponent(p).spriteFrame=this.boxshad_sp[o+1];const a=t.getChildByName("mask").getComponent(f);a.enabled=!0,0==e&&(a.enabled=!1);for(let s=0;s<3;s++){const a=3*o+s;if(i[a].length>0){const o=i[a][0],n=t.getChildByName(`${s+1}`);let l=new b(n.getPosition().x,n.getPosition().y,0);this.allitemPositions[e][a]=l,n.itemIdx={from:0,index:0,row:e,colIdx:a},n.on("click",(t=>{this.onItemClick(t,n.itemIdx)}),this);const r=n.getComponent(p);let h=G.LEVEL_1_2_TYPE.indexOf(o);-1!==h?(r.spriteFrame=this.level_1_2_spriteFrames[h],n.active=!0):V.loadSpriteFrame("b_bundle",`resources/textures/items/${this.getIconNum(o)}`).then((t=>{r.spriteFrame=t,n.active=!0})).catch((t=>{console.error("Failed to load sprite data:",t)}));for(let e=1;e<=Math.min(G.SHADOM_NUM,i[a].length-1);e++){const o=i[a][e],n=`${s+1}${this.shadowNameSuffixes[e-1]}`;t.getChildByName(n)&&V.loadSpriteFrame("b_bundle",`resources/textures/items/${this.getIconNum(o)}_shadow`).then((e=>{const i=t.getChildByName(n).getComponent(p);i.spriteFrame=e,i.node.active=!0})).catch((t=>{console.error("Failed to load sprite data:",t)}))}for(let e=i[a].length;e<=G.SHADOM_NUM;e++){const i=`${s+1}${this.shadowNameSuffixes[e-1]}`;t.getChildByName(i)&&(t.getChildByName(i).active=!1)}}}let n=e*this.levelData.columns+o;this.content.insertChild(t,n),this.boxNodes.push(t)}else this.boxNodes.push(null)}}}onItemClick(t,e){if(this.gameData=O.getGameData(),this.isClickCooling)return;this.isClickCooling=!0,J.inst.playOneShot(G.SOUND_ITEM),console.log("Item clicked: ",e);let i=this.bottomSlots.findIndex((t=>null===t));if(-1===i)return void this.gameFailure();const o=e.colIdx%3+1,s=e.row*this.levelData.columns+Math.floor(e.colIdx/3),a=this.boxNodes[s];if(!a)return void console.warn(`Box node not found for index: ${s}`);if(this.gameData.clickItemCount++,1===e.from){this.moveNum--;let e=this.bottomExtraGezi.indexOf(t.node);this.bottomExtraGezi.splice(e,1),this.updateExtraItemPositions(),this.gameData.bottomExtraData.splice(e,1)}const n=Number(1===e.from?e.itemType:this.items[e.row][e.colIdx][0]);console.log("Item clicked: item_type = "+n);const l=this.bottomSlots.lastIndexOf(n);let r=0;const h=[];if(-1!==l){for(let t=l+1;t<this.bottomSlots.length;t++)null!==this.bottomSlots[t]&&h.push(t);i=l+1,r=this.gezi.getChildByName(`${i+1}`).getPosition().x-this.gezi.getChildByName(`${i}`).getPosition().x}const d=this.gezi.getChildByName(`${i+1}`).getWorldPosition();let g=this.content.inverseTransformPoint(new b,d);const u=a.getChildByName(`${o}`);h.length>0?(this.bottomSlots.splice(i,0,n),this.bottomSlots.pop()):this.bottomSlots[i]=n,1!==e.from&&this.items[e.row][e.colIdx].splice(0,1);let y=m(u||t.node);console.log(y),y.itemIdx=e,1===e.from&&V.loadSpriteFrame("b_bundle",`resources/textures/items/${this.getIconNum(n)}`).then((t=>{y.getComponent(p).spriteFrame=t})).catch((t=>{console.error("Failed to load sprite data:",t)})),y.active=!0;let f=t.node.getWorldPosition();if(u?(this.content.addChild(y),y.setPosition(this.content.inverseTransformPoint(new b,f))):this.showGuide?(this.node.addChild(y),y.setPosition(this.node.inverseTransformPoint(new b,f)),g=this.node.inverseTransformPoint(new b,d)):(this.content.addChild(y),y.setPosition(this.content.inverseTransformPoint(new b,f))),y.off("click"),0===e.from&&Array.isArray(this.items[e.row][e.colIdx])&&this.items[e.row][e.colIdx].length>0){this.shadowNameSuffixes.map((t=>`${o}${t}`)).forEach((t=>{a.getChildByName(t)&&(a.getChildByName(t).active=!1)})),V.loadSpriteFrame("b_bundle",`resources/textures/items/${this.getIconNum(this.items[e.row][e.colIdx][0])}`).then((e=>{t.node.getComponent(p).spriteFrame=e,t.node.setScale(.8,.8),c(t.node).to(.1,{scale:new b(1,1,1)},{easing:"sineOut"}).start()})).catch((t=>{console.error("Failed to load sprite data:",t)}));for(let t=1;t<=Math.min(G.SHADOM_NUM,this.items[e.row][e.colIdx].length-1);t++){const i=this.items[e.row][e.colIdx][t];V.loadSpriteFrame("b_bundle",`resources/textures/items/${this.getIconNum(i)}_shadow`).then((e=>{let i=a.children.find((e=>e.name===`${o}_shadow${t}`));i.getComponent(p).spriteFrame=e,i.active=!0})).catch((t=>{console.error("Failed to load sprite data:",t)}))}}else t.node.active=!1;let D={insertIndex:this.gameData.clickItemCount,itemIdx:{row:e.row,col:e.colIdx},targetPos:[f,d],targetIdx:i,moveRight:r,bottomMoveRecord:[]};if(h.length>0){y.setScale(1,1);let t=0;for(let e of h){const i=this.bottomGezi[e];i&&i.isValid?c(i).to(.2,{position:i.position.add(new b(r,0,0))}).call((()=>{t++,t===h.length&&c(y).to(G.ITEM_FLY_TIME,{position:g}).call((()=>{this.isClickCooling=!1,this.checkEliminate(r)})).start()})).start():t++}this.bottomGezi.splice(i,0,y),console.log("插入到下方格子的位置:",i+1)}else y.setScale(1,1),c(y).to(G.ITEM_FLY_TIME,{position:g}).call((()=>{if(this.isClickCooling=!1,this.showGuide){const t=this.findNextSameItem(this.bottomSlots[i]);null!==t&&(console.log(`Found next same item at index: ${t}`),this.step<=2&&this.moveItemToGuideMask(t.boxIdx,t.boxItemIdx),this.showMask())}this.checkEliminate(r)})).start(),this.bottomGezi.push(y);for(let t of this.historyStack)t.targetIdx>=D.targetIdx&&t.targetIdx++;this.historyStack.push(D),this.historyStack.sort(((t,e)=>t.targetIdx-e.targetIdx));for(let t=0;t<this.historyStack.length;t++)this.historyStack[t].targetIdx=t;let S=-1;for(let t of this.historyStack)t.targetIdx<=S&&(t.targetIdx=S+1),S=t.targetIdx;console.log(" this.historyStack",this.historyStack),this.gameData.items=this.items,this.gameData.bottomSlots=this.bottomSlots,this.gameData.historyStack=this.historyStack,O.saveProgress(this.gameData)}playAddCoinAnim(t=null){if(J.inst.playOneShot(G.SOUND_REWARD),t>0){const{node:e,gameData:i}=this,o=this.top.getChildByName("AddMoneyNode"),s=this.top.getChildByName("tipNode"),a=this.top.getChildByName("money"),n=o.getChildByName("add_value").getComponent(D),l=this.signArry[0],r=(t||(i.level,G.ELIM_REWARD))*this.signArry[1];let h=U.formatCurrency(r,this.signArry[3],3==this.signArry[2]);n.string=`+${l} ${h}`,3!==i.level||this.is_tip||(s.active=!0,this.is_tip=!0),o.active=!0,o.setPosition(this._originalAddMoneyPos);const d=b.ONE.clone(),m=new b(.5,.5,.5);c(a).repeat(3,c().to(.1,{scale:m}).to(.1,{scale:d})).start(),c(o).to(1,{position:new b(this._originalAddMoneyPos.x,this._originalAddMoneyPos.y+50,this._originalAddMoneyPos.z)}).call((()=>{o.active=!1,s.active=!1})).start()}this.showGuide&&(this.step++,this.showMask())}showMoneyShake(t){if(!this.top)return;const e=this.top.getChildByName("AddMoneyNode");e.getChildByName("add_value").getComponent(D).string=t;const i=this.top.getChildByName("money");e.active=!0,e.setPosition(this._originalAddMoneyPos);const o=b.ONE.clone(),s=new b(.5,.5,.5);c(i).repeat(3,c().to(.1,{scale:s}).to(.1,{scale:o})).start(),c(e).to(1,{position:new b(this._originalAddMoneyPos.x,this._originalAddMoneyPos.y+50,this._originalAddMoneyPos.z)}).call((()=>{e.active=!1})).start()}showDiamondShake(t){if(!this.top)return;const e=this.top.getChildByName("AddDiamondNode");e.getChildByName("add_value").getComponent(D).string=t;const i=this.top.getChildByName("diamond");e.active=!0,e.setPosition(this._originalAddDiamondPos);const o=b.ONE.clone(),s=new b(.5,.5,.5);c(i).repeat(3,c().to(.1,{scale:s}).to(.1,{scale:o})).start(),c(e).to(1,{position:new b(this._originalAddDiamondPos.x,this._originalAddDiamondPos.y+50,this._originalAddDiamondPos.z)}).call((()=>{e.active=!1})).start()}async showMoneyFlyView(t){if(!this.node)return;J.inst.playOneShot(G.SOUND_REWARD);let e=this.top.getChildByName("money").getChildByName("money").getWorldPosition(),i=this.top.getChildByName("diamond").getChildByName("money").getWorldPosition();const o=this.node.getComponent(y).convertToNodeSpaceAR(e),s=this.node.getComponent(y).convertToNodeSpaceAR(i);if(t[1])for(let e=0;e<3;e++){let i=new n;const o=i.addComponent(p);i.setPosition(0+50*e,0),i.setScale(.7,.7),o.spriteFrame=this.top.getChildByName("diamond").getChildByName("money").getComponent(p).spriteFrame,i.parent=this.node,c(i).to(.5,{position:s}).call((()=>{i.destroy(),0==e&&this.showDiamondShake(t[1])})).start()}if(t[0])for(let e=0;e<3;e++){let i=new n;const s=i.addComponent(p);i.setPosition(0-50*e,0),i.setScale(.7,.7),s.spriteFrame=this.top.getChildByName("money").getChildByName("money").getComponent(p).spriteFrame,i.parent=this.node,c(i).to(.5,{position:o}).call((()=>{i.destroy(),0==e&&this.showMoneyShake(t[0])})).start()}}playFlyCoin(t,e=null){for(let i=t;i<t+3;i++){const t=this.bottomGezi[i];if(t&&t.isValid)if(this.gezi.getChildByName(`${i+1}`).getChildByName("animNode").getComponent(S.Skeleton).setAnimation(0,"newAnimation",!1),e>0){const e=this.node.getComponent(y).convertToNodeSpaceAR(this.moneypoints);V.loadSpriteFrame("b_bundle","resources/textures/game/money").then((e=>{t.getComponent(p).spriteFrame=e})).catch((t=>{console.error("Failed to load sprite data:",t)})),c(t).to(.5,{position:e}).call((()=>{console.log("消除成功，节点 已销毁",t.itemIdx),t.destroy()})).start()}else c(t).delay(.2).call((()=>{t.destroy()})).start()}setTimeout((()=>{this.playAddCoinAnim(e)}),500)}checkEliminate(t){this.gameData=O.loadProgress(),console.log("checkEliminate Bottom slots:",this.bottomSlots);for(let e=0;e<=7;e++){const i=this.bottomSlots[e],o=this.bottomSlots[e+1],s=this.bottomSlots[e+2];if(i&&i===o&&o===s){this.bottomSlots[e]=this.bottomSlots[e+1]=this.bottomSlots[e+2]=null,this.playStep++,this.gameData.level>=2&&(this.gameData.removeNum+=1,this.gameData.restMatchNum+=1,this.gameData.restMatchNum>=G.USEMATCH_NUM&&this.initBtnRotaryTable());let i=0;i=G.ELIM_REWARD,O.getIsDoubleState()&&(i*=2),i*=O.rewardMultiplier,this.gameData.totalRemoveNum++,this.gameData.totalRemoveNum>=6e3&&(i=0);let o=0;for(let t=0;t<G.LIMITLEVEL_AD.length;t++)if(this.gameData.level<=G.LIMITLEVEL_AD[t]){o=t;break}this.gameData.level>=2&&this.gameData.removeNum%G.REMOVE_AD[o]==0?(this.showResultPrefab(2),this.playFlyCoin(e,i)):this.playFlyCoin(e,i);const s=[];for(let t=e+3;t<this.bottomSlots.length;t++)null!==this.bottomSlots[t]&&s.push(t);let a=0;for(let i of s){const o=this.bottomGezi[i];o&&o.isValid?c(o).to(.2,{position:o.position.add(new b(3*-t,0,0))}).call((()=>{a++,a===s.length&&this.bottomGezi.splice(e,3)})).start():a++}0===s.length&&this.bottomGezi.splice(e,3),this.gameData.removedGroup++;let n=Math.round(.5*this.gameData.totalGroup);if(this.gameData.removedGroup==n&&this.showHalfDialog(),this.bottomSlots.splice(e,3),this.bottomSlots.push(null,null,null),this.historyStack.splice(-3),this.gameData.money+=i,J.inst.playOneShot(G.SOUND_REMOVE),this.showGuide){this.guideMask&&this.changeGeziPos();const t=this.node.getChildByName("shou");t&&t.removeFromParent()}O.saveProgress(this.gameData),F.emit(G.REFRESH_TASK_MAIN_RED_DOT),this.refreshTop();break}}let e=!0;for(let t=0;t<this.levelData.rows;t++){for(let i=0;i<3*this.levelData.columns;i++)if(this.items[t][i].length>0){e=!1;break}if(!e)break}const i=this.bottomSlots.every((t=>null!==t));if(this.gameData.bottomSlots=this.bottomSlots,this.gameData.historyStack=this.historyStack,O.saveProgress(this.gameData),e){let t=this.levelData.reward;this.showResultPrefab(1,(()=>{}),t)}i&&this.gameFailure()}showLevelSelect(t,e){let i=this.gameData.level+1;void 0!==e&&(i=e),V.loadPrefab("b_bundle",G.LEVEL_SELECT_PRE).then((e=>{const o=m(e);o.parent=this.node;o.getComponent(k).initData(i,(()=>{o.removeFromParent(),t()}))})).catch((t=>{console.error("Failed to load prefab data:",t)}))}restartGame(){this.reportGameEnd(),this.gameData=O.loadProgress(),this.gameData.endGeziLock=!0,this.gameData.endGeZiJiliCount=0,this.historyStack=[],this.items=[],this.boxNodes=[],this.geziPositions=[],this.moneypoints=null,this.bottomSlots=Array(this.gameData.endGeziLock?G.FREE_GEZI:G.MAX_GEZI).fill(null),this.bottomGezi=[],this.guideMask=null,this.bottomExtraGezi=[],this.originalExtraPositions=[],this.allitemPositions=[],this.clickMoveNumArry[this.gameData.level]=0,this.clickRollbackNumArry[this.gameData.level]=0,this.clickRefreshNumArry[this.gameData.level]=0,this.canClickTypeArry.fill(0,1,4),this.gameData.items=[],this.gameData.itemCount=[0,0,0],this.gameData.itemUseCount=[0,0,0],this.gameData.historyStack=[],this.gameData.bottomSlots=Array(this.gameData.endGeziLock?G.FREE_GEZI:G.MAX_GEZI).fill(null),this.gameData.bottomExtraData=[],O.saveProgress(this.gameData),localStorage.setItem(G.FIRST_LOSE,0),F.off(G.SHOW_TOAST),F.off(G.REFRESH_BUTTOM),F.off(G.REFRESH_TOP),F.off(G.REFRESH_TASK_MAIN_RED_DOT),g.loadScene("Game"),this.flyBoxComp.startFly(),g.getScene().getComponentInChildren(t).content.removeAllChildren()}findNextSameItem(t){for(let e=0;e<this.levelData.rows;e++)for(let i=0;i<3*this.levelData.columns;i++)if(this.items[e][i][0]===t)return{boxIdx:e*this.levelData.columns+Math.floor(i/3),boxItemIdx:i%3};return null}isGameOver(){return this.items.every((t=>null===t))}initOriginalExtraPositions(){this.originalExtraPositions=[],this.bottomExtra.children.forEach((t=>{this.originalExtraPositions.push(t.getWorldPosition())}))}updateExtraItemPositions(){for(let t=0;t<this.bottomExtraGezi.length;t++){const e=this.bottomExtraGezi[t],i=this.originalExtraPositions[t];e.setPosition(this.content.inverseTransformPoint(new b,i))}}move(t){const e=this.bottomSlots.findIndex((t=>null===t));if(0==e)return void F.emit(G.SHOW_TOAST,G.NO_MOBILITY);this.gameData=O.loadProgress(),this.canClickTypeArry[1]--,this.gameData.itemCount[0]=0,this.clickMoveNumArry[this.gameData.level]++,this.gameData.itemUseCount[0]++,F.emit(G.REFRESH_BUTTOM,0);let i=e;e>=3&&(i=3);let o=e;-1==e&&(o=this.bottomSlots.length,i=3);let s=0,a=0;i>1&&(a=120),this.historyStack.splice(0,i);for(let t=0;t<this.historyStack.length;t++)this.historyStack[t].targetIdx=t;const n=this.bottomExtra.getChildByName("1").getWorldPosition();let l=this.content.inverseTransformPoint(new b,n);for(let e=0;e<i;e++){let n=new b(l.x+a*(e+this.moveNum),l.y,l.z),r={...this.bottomGezi[e].itemIdx};r.from=1,r.itemType=this.bottomSlots[e],this.bottomExtraGezi.push(this.bottomGezi[e]),this.bottomSlots[e]=null;let h=this.bottomGezi[e];c(this.bottomGezi[e]).to(.2,{position:n}).call((()=>{if(h.once("click",(t=>{this.onItemClick(t,r)}),this),s++,s>=i){const t=o-i;for(let e=0;e<t;e++)c(this.bottomGezi[e]).to(.2,{position:new b(this.bottomGezi[e].getPosition().x-a*i,this.bottomGezi[e].getPosition().y,this.bottomGezi[e].getPosition().z)}).start()}})).call((()=>{t&&t()})).start()}let r=[...this.bottomSlots];this.bottomSlots=[...r.splice(i),...r.splice(0,i)],this.bottomGezi.splice(0,i),this.gameData.bottomExtraData=[];for(let t=0;t<this.bottomExtraGezi.length;t++){let e=this.bottomExtraGezi[t],i={type:e.getComponent(p).spriteFrame.name,itemIndex:{row:e.itemIdx.row,colIdx:e.itemIdx.colIdx}};this.gameData.bottomExtraData.push(i)}this.moveNum=this.moveNum+i,this.gameData.bottomSlots=this.bottomSlots,this.gameData.historyStack=this.historyStack,O.saveProgress(this.gameData)}showResultPrefab(t,e,i=null){V.loadPrefab("b_bundle",G.RESULT_PRE).then((o=>{const s=m(o);this.node.addChild(s);const a=s.getComponent(I);a&&"function"==typeof a.showResult&&a.showResult(t,e,i,this.signArry,this)})).catch((t=>{console.error("Failed to load prefab data:",t)}))}onTouchStart(t){t.propagationStopped=!0,console.log("透明层被点击")}changeGeziPos(){const t=this.gezi.getWorldPosition();this.gezi.parent=this.bottom,this.gezi.setPosition(this.bottom.getComponent(y).convertToNodeSpaceAR(t)),this.gezi.setSiblingIndex(1)}restoreTopPos(){let t=this.diamond_node.getWorldPosition();this.diamond_node.parent=this.top,this.diamond_node.setPosition(this.top.getComponent(y).convertToNodeSpaceAR(t)),this.diamond_node.setSiblingIndex(1);let e=this.money_node.getWorldPosition();this.money_node.parent=this.top,this.money_node.setPosition(this.top.getComponent(y).convertToNodeSpaceAR(e)),this.money_node.setSiblingIndex(1)}changeTopPos(){let t=this.diamond_node.getWorldPosition();this.diamond_node.parent=this.node,this.diamond_node.setPosition(this.node.getComponent(y).convertToNodeSpaceAR(t));let e=this.money_node.getWorldPosition();this.money_node.parent=this.node,this.money_node.setPosition(this.node.getComponent(y).convertToNodeSpaceAR(e))}clearGuide(){2==this.gameData.level&&(this.gameData=O.loadProgress(),this.hideMask(),this.gameData.showGuide=!1,O.saveProgress(this.gameData))}showMask(){let t=[this.gezi,this.gezi,this.gezi,this.gezi,this.start_money_icon,this.gezi,this.top,this.btn_wallet],e=["","Click the item to move it to the empty space below","Keep clicking! 3 identical items will be eliminated","Keep clicking! 3 identical items will be eliminated","","Each elimination can get cash","The money you get at each level is accumulated, and you can withdraw it after collecting the target amount","After passing, choose a platform to withdraw!"];if(7==this.step&&(this.btn_wallet.active=!0),this.MASKNode){if(4==this.step)return t[this.step].active=!0,t[this.step].setSiblingIndex(999),t[this.step].setScale(0,0,0),this.MASKTIPSNode.active=!1,void c(t[this.step]).to(.2,{scale:_(1,1,1)}).call((()=>{$.handleBtnClickWithSound2(t[this.step].getChildByName("icon").getComponent(s),(()=>{this.gameData=O.loadProgress(),t[this.step].active=!1,$.clearEvent(t[this.step].getChildByName("icon").getComponent(s)),this.gameData.money+=G.START_MONEY,O.saveProgress(this.gameData),this.showMoneyFlyView([this.signArry[0]+(G.START_MONEY*Number(10*this.signArry[1])/10).toFixed(2),null]),this.refreshTop(),setTimeout((()=>{this.step++,this.changeTopPos(),this.showMask(),this.addTopShouNode(),this.guideMask.destroy(),this.guideMask=null}),1300),c(t[this.step]).to(.2,{scale:_(0,0,1)}).start()}),this)})).start();this.MASKTIPSNode.active=!0;const i=t[this.step].getWorldPosition();this.MASKNode.setPosition(this.node.getComponent(y).convertToNodeSpaceAR(i)),this.MASKTIPSNode.getChildByName("Label").getComponent(D).string=e[this.step]}else{this.MASKNode=m(this.MaskPrefab),this.MASKNode.parent=this.node;const i=t[this.step].getWorldPosition();this.MASKNode.setPosition(this.node.getComponent(y).convertToNodeSpaceAR(i));const o=this.boxNodes.findIndex((t=>null!==t));1==this.gameData.level&&this.showGuide&&this.moveItemToGuideMask(o,0),this.MASKNode.getChildByName("bg").on("click",(()=>{this.clearGuide()}),this),this.MASKTIPSNode||(this.MASKTIPSNode=m(this.MaskTipsPrefab),this.MASKTIPSNode.setPosition(0,500),this.MASKTIPSNode.parent=this.node),this.MASKTIPSNode.getChildByName("Label").getComponent(D).string=e[this.step],7==this.step&&(this.MASKTIPSNode.setPosition(0,0),this.MASKNode.setPosition(this.node.getComponent(y).convertToNodeSpaceAR(new b(i.x-450,i.y,0))))}}hideMask(){this.MASKNode&&this.MASKNode.destroy(),this.MASKTIPSNode&&this.MASKTIPSNode.destroy(),this.showGuide=!1}showGuideView(){this.guideMask&&(this.guideMask.destroy(),this.guideMask=null,this.guideMask.off(n.EventType.TOUCH_START)),this.guideMask=new n("TransparentLayer"),this.guideMask.layer=C.Enum.UI_2D;this.guideMask.addComponent(y).contentSize=u.getVisibleSize();const t=this.guideMask.addComponent(v);t.fillColor=new w(0,0,0,0),t.rect(-u.getVisibleSize().width/2,-u.getVisibleSize().height/2,u.getVisibleSize().width,u.getVisibleSize().height),t.fill(),this.guideMask.on(n.EventType.TOUCH_START,this.onTouchStart,this),this.node.addChild(this.guideMask);const e=this.gezi.getWorldPosition();this.gezi.parent=this.node,this.gezi.setPosition(this.node.getComponent(y).convertToNodeSpaceAR(e)),this.showMask()}addTopShouNode(){let t=this.node.getChildByName("shou");if(!t){t=m(this.shouPre),t.setScale(-.6,.6),t.setParent(this.node);let e=this.top.getWorldPosition();const i=this.node.getComponent(y).convertToNodeSpaceAR(e);t.setPosition(i.x+100,i.y-50),t.setSiblingIndex(100)}}addItemShouNode(t){if(!this.showGuide)return;let e=this.node.getChildByName("shou");e||(e=m(this.shouPre),e.setScale(.6,.6),e.setParent(this.node));const i=u.getVisibleSize();let o;if(t.getComponent(y).convertToWorldSpaceAR(new b(0,0,0)).x<i.width/2){e.getComponent(y).anchorPoint.set(1,1),e.setScale(-.6,.6),o=t.getWorldPosition();let i=this.node.getComponent(y).convertToNodeSpaceAR(o);e.setPosition(i.x+100,i.y)}else{e.getComponent(y).anchorPoint.set(1,1),e.setScale(.6,.6),o=t.getWorldPosition();let i=this.node.getComponent(y).convertToNodeSpaceAR(o);e.setPosition(i.x-100,i.y)}e.setSiblingIndex(100)}moveItemToGuideMask(t,e){this.step++;const i=this.boxNodes[t].getChildByName(`${e+1}`),o=i.getWorldPosition();this.node.addChild(i),i.setPosition(this.node.getComponent(y).convertToNodeSpaceAR(o)),i.setSiblingIndex(102),this.addItemShouNode(i)}hideGuide(){this.guideMask&&(this.guideMask.active=!1)}refreshColIdx(t,e){const i=t*this.levelData.columns+Math.floor(e/3),o=this.boxNodes[i],s=this.items[t][e][0],a=this.items[t][e][1];if(s){const t=e%3+1;V.loadSpriteFrame("b_bundle",`resources/textures/items/${this.getIconNum(s)}`).then((e=>{const i=o.getChildByName(`${t}`);i.getComponent(p).spriteFrame=e,i.active=!0})).catch((t=>{console.error("Failed to load sprite data:",t)}));const i=o.getChildByName(`${t}_shadow`);if(i)if(a){const t=i.getComponent(p);V.loadSpriteFrame("b_bundle",`resources/textures/items/${this.getIconNum(a)}_shadow`).then((e=>{t.spriteFrame=e,i.active=!0})).catch((t=>{console.error("Failed to load sprite data:",t)}))}else i.active=!1}}getOriginalItemNode(t,e){const i=t*this.levelData.columns+Math.floor(e/3),o=e%3+1;return this.boxNodes[i].getChildByName(`${o}`)}rollback(){if(this.clickRollbackNumArry[this.gameData.level]>=this.levelData.maxRollBackNum)return void F.emit(G.SHOW_TOAST,G.ALREADY_USED);if(1!=this.canClickTypeArry[2])return void this.showBottomPrefab(2);if(0===this.historyStack.length)return void console.log("没有可回退的历史记录");this.gameData=O.loadProgress(),this.canClickTypeArry[2]=0,this.gameData.itemCount[1]=0,F.emit(G.REFRESH_BUTTOM,0),this.clickRollbackNumArry[this.gameData.level]++,this.gameData.itemUseCount[1]++,O.saveProgress(this.gameData);let t=0,e=0;for(let i=0;i<this.historyStack.length;i++){let o=this.historyStack[i];o.insertIndex>e&&(e=o.insertIndex,t=i)}const i=this.historyStack.splice(t,1)[0];this.items[i.itemIdx.row][i.itemIdx.col].splice(0,0,this.bottomSlots[i.targetIdx]);const o=this.getOriginalItemNode(i.itemIdx.row,i.itemIdx.col).getWorldPosition(),s=this.bottomGezi[i.targetIdx];this.bottomGezi.splice(i.targetIdx,1),this.bottomSlots.splice(i.targetIdx,1),this.bottomSlots.push(null),s&&c(s).to(G.ITEM_FLY_TIME,{position:this.content.inverseTransformPoint(new b,o)}).call((()=>{if(s.destroy(),this.refreshColIdx(i.itemIdx.row,i.itemIdx.col),i.bottomMoveRecord.length>0){let t=0;for(let e of i.bottomMoveRecord)c(this.bottomGezi[e.geziIdx]).to(.2,{position:this.bottomGezi[e.geziIdx].position.add(new b(-e.moveX,0,0))}).call((()=>{this.bottomSlots[e.geziIdx]=this.bottomSlots[e.geziIdx+1],t++,t===i.bottomMoveRecord.length&&(this.bottomSlots[e.geziIdx+1]=null)})).start()}})).start();for(let e=t;e<this.historyStack.length;e++)this.historyStack[e].targetIdx--;for(let e=t;e<this.bottomGezi.length;e++){let t=this.bottomGezi[e];const i=this.gezi.getChildByName(`${e+1}`).getWorldPosition();let o=this.content.inverseTransformPoint(new b,i);N.stopAllByTarget(t),c(t).to(G.ITEM_FLY_TIME,{position:o}).start()}this.gameData.items=this.items,this.gameData.bottomSlots=this.bottomSlots,this.gameData.historyStack=this.historyStack,O.saveProgress(this.gameData)}refreshTop(){if(!this.node)return;this.gameData=O.loadProgress(),this.moneypoints||(this.moneypoints=this.top.getChildByName("money").getChildByName("money").getWorldPosition());let t=this.top.getChildByName("money").getChildByName("value").getComponent(D),e=this.signArry[1]*this.gameData.money,i=U.formatCurrency(e,this.signArry[3],3==this.signArry[2]);t.string=this.signArry[0]+` ${i}`,this.top.getChildByName("diamond").getChildByName("value").getComponent(D).string=this.gameData.diamonds.toString()}updateTaskRedDot(){if(!this.node)return;this.top.getChildByName("btn_task").getChildByName("redDot").active=H.getInstance().checkTaskBtnRedDot()}loadGameProgress(){const t=localStorage.getItem("gameData");if(t)try{const e=JSON.parse(t);e.items&&e.bottomSlots&&(this.items=e.items,this.bottomSlots=e.bottomSlots)}catch(t){console.warn("读取进度失败:",t)}}gameFailure(){0==localStorage.getItem(G.FIRST_LOSE)?(this.gameData=O.loadProgress(),this.OpenLevelStatic("Resurrection",(t=>{"Buy"==t?(localStorage.setItem(G.FIRST_LOSE,1),this.gameData.diamonds-=G.BUY_FUHUO,O.saveProgress(this.gameData),F.emit(G.REFRESH_BUTTOM,1),F.emit(G.REFRESH_TOP),this.move((()=>{this.updateExtraItemPositions(),this.isClickCooling=!1})),1==this.clickMoveNumArry[this.gameData.level]&&(this.clickMoveNumArry[this.gameData.level]=0),1==this.gameData.itemUseCount[0]&&(this.gameData.itemUseCount[0]=0),O.saveProgress(this.gameData),localStorage.setItem("record_revive","1")):"AD"==t?(localStorage.setItem(G.FIRST_LOSE,1),O.saveProgress(this.gameData),F.emit(G.REFRESH_BUTTOM,1),this.move((()=>{this.updateExtraItemPositions(),this.isClickCooling=!1})),1==this.clickMoveNumArry[this.gameData.level]&&(this.clickMoveNumArry[this.gameData.level]=0),1==this.gameData.itemUseCount[0]&&(this.gameData.itemUseCount[0]=0),O.saveProgress(this.gameData),localStorage.setItem("record_revive","1")):this.showResultPrefab(0,(()=>{this.gameEndState="fail",this.restartGame()}))}))):this.showResultPrefab(0,(()=>{this.gameEndState="fail",this.restartGame()}))}async initData(){let t=(await V.loadText("b_bundle","resources/data/reward")).text.split("\r\n");for(let e=2;e<t.length;e++){let i=[],o=t[e].split(",");if(!(o.length<3)){for(let t=0;t<o.length;t++){let e=o[t];i.push(Number(e))}this.rewardData.push(i)}}let e=(await V.loadText("b_bundle","resources/data/adEarn")).text.split("\r\n"),i=[];for(let t=1;t<e.length;t++){let o=[],s=e[t].split(",");for(let t=0;t<s.length;t++){let e=s[t];o.push(Number(e))}i.push(o)}if(O.adEarnData=i,this.gameData.level>=2){let t=(await V.loadText("b_bundle","resources/data/victoryAccolade")).text.split("\r\n");for(let e=1;e<t.length;e++){let i=[],o=t[e].split(",");for(let t=0;t<o.length;t++){let e=o[t];i.push(Number(e))}this.victoryAccoladeData.push(i)}}this.onRefreshVictoryAccolade()}getRandom(t,e){t>e&&([t,e]=[e,t]);const i=Math.random()*(e-t)+t;return Number(i.toFixed(2))}getRandomReward(t){let e=this.rewardData.length,i=this.rewardData[e-1][1],o=this.rewardData[e-1][2];for(let e of this.rewardData){if(t<=e[0]){i=e[1],o=e[2];break}}return this.getRandom(i,o)}getMaxReward(t){let e=this.rewardData.length,i=this.rewardData[e-1][2];for(let e of this.rewardData){if(t<=e[0]){i=e[2];break}}return i}async showRotaryTable(){let t=await V.loadPrefab("b_bundle",G.ROTARYTABLE_PRE);const e=m(t);this.node.addChild(e);const i=e.getComponent(X);i.callbackTarget=this,i.baseMoney=this.getMaxReward(this.gameData.removeNum);let o=[];for(let t of this.fortuneWheelData)o.push([...t]);i.fortuneWheelData=o}initDoubleReward(){}async showDoubleReward(){if(O.getIsDoubleState())return;let t=await V.loadPrefab("b_bundle",G.DOUBLEREWARD_PRE);const e=m(t);this.node.addChild(e);e.getComponent(Z).callbackTarget=this}playDoubleRewardAnim(){N.stopAllByTarget(this.btn_doubleReward.node),c(this.btn_doubleReward.node).to(.5,{scale:_(1.05,1.05,1)}).to(.5,{scale:_(.95,.95,1)}).union().repeatForever().start()}waitToShowBtnDoubleReward(){this.btn_doubleReward.node.setScale(0,0,0),c(this.node).delay(G.doubleInterval).call((()=>{this.btn_doubleReward.node.setScale(.5,.5,1),this.playDoubleRewardAnim()})).start()}onDoubleReward(t=G.doubleDuration){if(t<1)return;this.gameData=O.loadProgress(),N.stopAllByTarget(this.btn_doubleReward.node),this.btn_doubleReward.node.setScale(1,1,1),O.setIsDoubleState(!0);let e=this.btn_doubleReward.node.getChildByName("coolingAnim").getComponent(p);N.stopAllByTarget(e),e.fillRange=t/G.doubleDuration;let i=this.btn_doubleReward.node.getChildByName("animL").getComponent(D);i.node.active=!0,i.string="00:60",c(e).to(t,{fillRange:0},{onUpdate(t,o){let s=Math.round(60*e.fillRange);i.string="00:"+(s<10?"0":"")+s.toString()}}).call((()=>{i.node.active=!1,O.setIsDoubleState(!1),this.waitToShowBtnDoubleReward()})).start(),this.gameData.doubleDuration=t,O.saveProgress(this.gameData),c(e).delay(1).call((()=>{this.gameData.doubleDuration-=1,this.gameData.doubleDuration<0&&(this.gameData.doubleDuration=0),O.saveProgress(this.gameData)})).union().repeat(t).start()}onGroup(){if(this.isGroupAnim)return;this.isGroupAnim=!0,this.isOpenGroup=!this.isOpenGroup;this.isOpenGroup;let t=this.isOpenGroup?1:0;N.stopAllByTarget(this.group);this.btn_group.node.getChildByName("group_on_icon").active=this.isOpenGroup,this.btn_group.node.getChildByName("group_off_icon").active=!this.isOpenGroup,c(this.group).to(.2,{scale:_(t,t,1)}).call((()=>{this.isGroupAnim=!1})).start()}getIconNum(t){return t}initBottomSlots(){for(let t=0;t<this.gameData.bottomSlots.length;t++){let e=this.gameData.bottomSlots[t];if(!e||null==e)continue;const i=this.gezi.getChildByName(`${t+1}`).getWorldPosition();let o=this.content.inverseTransformPoint(new b,i),a=this.gameData.historyStack[t];const l=new n("newNode");let r=l.addComponent(y);r.contentSize=P(112,148),r.setAnchorPoint(.5,0),l.itemIdx={from:0,index:0,row:a.itemIdx.row,colIdx:a.itemIdx.col};const h=l.addComponent(p);l.addComponent(s),V.loadSpriteFrame("b_bundle",`resources/textures/items/${this.getIconNum(e)}`).then((t=>{h.spriteFrame=t,l.active=!0})).catch((t=>{console.error("Failed to load sprite data:",t)})),this.content.addChild(l),l.setPosition(o),this.bottomGezi.push(l)}}initBottomExtraSlots(){for(let t=0;t<this.gameData.bottomExtraData.length;t++){let e=this.gameData.bottomExtraData[t],i=e.type;if(!i||null==i)continue;this.moveNum++;const o=this.bottomExtra.getChildByName("1").getWorldPosition();let a=this.content.inverseTransformPoint(new b,o),l=new b(a.x+120*t,a.y,a.z);const r=new n("newNode");let h=r.addComponent(y);h.contentSize=P(112,148),h.setAnchorPoint(.5,0),r.itemIdx={from:0,index:0,row:e.itemIndex.row,colIdx:e.itemIndex.colIdx};const d=r.addComponent(p);r.addComponent(s),V.loadSpriteFrame("b_bundle",`resources/textures/items/${this.getIconNum(Number(i))}`).then((t=>{d.spriteFrame=t,r.active=!0})).catch((t=>{console.error("Failed to load sprite data:",t)})),this.content.addChild(r),r.setPosition(l),this.bottomExtraGezi.push(r);let m={...r.itemIdx};m.from=1,m.itemType=i,r.once("click",(t=>{this.onItemClick(t,m)}),this),console.log(r)}}initBtnRotaryTable(){if(this.gameData.level<=2)return void(this.btn_rotaryTable.node.active=!1);let t=this.gameData.restMatchNum>=G.USEMATCH_NUM;this.btn_rotaryTable.node.getChildByName("redDot").active=t}async initFortuneWheelData(){let t=(await V.loadText("b_bundle","resources/data/fortuneWheel")).text.split("\r\n");for(let e=1;e<t.length;e++){let i=[],o=t[e].split(",");if(!(o.length<3)){for(let t=0;t<o.length;t++){let e=o[t];0==t?i.push(e):i.push(Number(e))}this.fortuneWheelData.push(i)}}}onRefreshVictoryAccolade(){if(this.gameData.level<2)return void(this.btn_accolade.node.active=!1);let t=this.gameData.checkedAccoladeIndex,e=this.victoryAccoladeData[t][0],i=this.gameData.level-1,o=i>=e;this.btn_accolade.node.getChildByName("redDot").active=o,this.btn_accolade.node.getChildByName("info").getComponent(D).string=i+"/"+e}getCanBeCheckAccolade(){let t=this.gameData.checkedAccoladeIndex,e=this.victoryAccoladeData[t][0];return this.gameData.level-1>=e}async onVictoryAccolade(){if(this.getCanBeCheckAccolade()){let t=await V.loadPrefab("b_bundle",G.VICTORYACCOLADE_PRE);const e=m(t);e.getComponent(Q).target=this,e.parent=this.node}else F.emit(G.SHOW_TOAST,G.CAN_NOT_CHECK_ACCOLADE)}getAccoladeRewardMoeny(){let t=this.gameData.checkedAccoladeIndex;return this.victoryAccoladeData[t][1]}async showCongratsView(){if(this.gameData.level<3)return;let t=await V.loadPrefab("b_bundle",G.CONGRATS_PRE),e=m(t);this.top.addChild(e)}async showHalfDialog(){}async showCashSuccess(){}initTest(){let t=this.top.getChildByName("testNode");if(!t)return;let e=t.getChildByName("EditBox").getComponent(A),i=t.getChildByName("Button").getComponent(s);e.string=this.gameData.level.toString(),$.handleBtnClickWithSound2(i,(()=>{this.EnterTestLevel()}),this)}EnterTestLevel(){let t=this.top.getChildByName("testNode");if(!t)return;let e=t.getChildByName("EditBox").getComponent(A);this.gameData=O.loadProgress(),this.gameData.level=Number(e.string),O.saveProgress(this.gameData),this.restartGame()}playLeftNodeAnim(t=!0){let e=this.gameData.money,i=G.CASH_MONEY-e;if(i<=0)return;let o=this.left_node;N.stopAllByTarget(o),t&&(o.active=!0,c(o).to(.2,{scale:_(1,1,1)}).delay(1.5).to(.2,{scale:_(0,0,1)}).start());let s=o.getChildByName("tip2").getChildByName("str").getComponent(D),a=U.formatCurrency(i*this.signArry[1],this.signArry[3],3==this.signArry[2]),n=this.signArry[0]+` ${a}`;s.string="Only %s left to withdraw".replace("%s",n)}initSignInButton(){this.gameData.level<=3?this.btn_signIn.node.active=!1:(this.btn_signIn.node.active=!0,$.handleBtnClickWithSound2(this.btn_signIn,(()=>{this.showSignInView()}),this))}async showSignInView(){}reportGameStart(){let t=0;if(localStorage.getItem("record_playDuration")&&(this.playDuration=Number(localStorage.getItem("record_playDuration"))),0==this.playDuration){localStorage.getItem("record_playTimes"+this.gameData.level)&&(t=Number(localStorage.getItem("record_playTimes"+this.gameData.level))),t++,localStorage.setItem("record_playTimes"+this.gameData.level,t.toString());let e=this.gameData.userID;et.reportEvent(e,"level_start",this.gameData.level)}localStorage.getItem("record_step")&&(this.playStep=Number(localStorage.getItem("record_step")))}reportGameEnd(){this.isPlaying=!1;let t=this.gameData.level;"success"==this.gameEndState&&(t-=1);let e=this.gameData.userID;localStorage.getItem("record_revive")&&Number(localStorage.getItem("record_revive")),"success"==this.gameEndState?et.reportEvent(e,"level_complete",t):et.reportEvent(e,"level_fail",t),localStorage.setItem("record_playDuration","0"),localStorage.setItem("record_revive","0"),localStorage.setItem("record_step","0")}update(t){this.isPlaying&&(this.record_duration+=t,this.record_duration>this.RECORD_DURATION&&(this.record_duration=0,this.saveRecordPlayDuration()),this.playDuration+=t)}saveRecordPlayDuration(){localStorage.setItem("record_playDuration",this.playDuration.toString())}}).prototype,"btn_move",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wt=e(Ot.prototype,"btn_refresh",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ut=e(Ot.prototype,"btn_reset",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$t=e(Ot.prototype,"btn_rollback",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ht=e(Ot.prototype,"bigBox",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vt=e(Ot.prototype,"smallBox",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kt=e(Ot.prototype,"shouPre",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yt=e(Ot.prototype,"MaskPrefab",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jt=e(Ot.prototype,"MaskTipsPrefab",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zt=e(Ot.prototype,"content",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xt=e(Ot.prototype,"bottom",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jt=e(Ot.prototype,"top",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qt=e(Ot.prototype,"gezi",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qt=e(Ot.prototype,"money_node",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=e(Ot.prototype,"diamond_node",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=e(Ot.prototype,"bottomExtra",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=e(Ot.prototype,"btn_rank",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=e(Ot.prototype,"btn_task",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=e(Ot.prototype,"btn_diamond",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=e(Ot.prototype,"btn_withdraw",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=e(Ot.prototype,"btn_input",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=e(Ot.prototype,"level_1_2_spriteFrames",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),re=e(Ot.prototype,"box_sp",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),he=e(Ot.prototype,"boxshad_sp",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),de=e(Ot.prototype,"rateJson",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=e(Ot.prototype,"btn_rotaryTable",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=e(Ot.prototype,"btn_doubleReward",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=e(Ot.prototype,"btn_group",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=e(Ot.prototype,"group",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=e(Ot.prototype,"btn_accolade",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=e(Ot.prototype,"start_money_icon",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=e(Ot.prototype,"left_node",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=e(Ot.prototype,"cashPrefab",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=e(Ot.prototype,"btn_signIn",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=e(Ot.prototype,"btn_wallet",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ft=Ot))||Ft));o._RF.pop()}}}));

System.register("chunks:///_virtual/gameAlg.ts",["cc","./Constant2.ts"],(function(t){var s,e;return{setters:[function(t){s=t.cclegacy},function(t){e=t.default}],execute:function(){s._RF.push({},"c5a2dyzn9tNprd/cYA/x0GM","gameAlg",void 0);t("GameAlg",class{constructor(t){if(this.LEVEL=void 0,this.ROWS=void 0,this.COLS=void 0,this.MAX_LAYERS=void 0,this.ALL_ITEM_TYPES=void 0,this.BOX_INFO=void 0,this.LAYERS_ITEM_TYPES_COUNT=void 0,this.GRID_LAYER_RANGE=void 0,this.FIXED_LEVEL_TYPES=e.LEVEL_1_2_TYPE,this.gridLayers=[],this.LEVEL=t.level,this.ROWS=t.rows,this.COLS=t.cols,this.MAX_LAYERS=t.maxLayers,this.ALL_ITEM_TYPES=t.allItemTypes,this.BOX_INFO=t.boxInfo,this.LAYERS_ITEM_TYPES_COUNT=t.layersItemTypesCount,this.GRID_LAYER_RANGE=t.gridLayerRange,this.LAYERS_ITEM_TYPES_COUNT.length!==this.MAX_LAYERS)throw new Error("layersItemTypesCount数组长度必须等于maxLayers")}generateGridLayers(){if(this.gridLayers.length>0)return this.gridLayers;for(let t=0;t<this.ROWS;t++){const s=[];for(let e=0;e<this.COLS;e++)if(0===this.BOX_INFO[t*this.COLS+e].z){const[r,o]=this.GRID_LAYER_RANGE[t*this.COLS+e],i=r+Math.floor(Math.random()*(o-r+1));s.push(i)}else s.push(0);this.gridLayers.push(s)}return this.gridLayers}generateLayerItemTypes(t){if(0===t&&this.LEVEL<2)return[...this.FIXED_LEVEL_TYPES];const s=this.LAYERS_ITEM_TYPES_COUNT[t],e=Array.from({length:this.ALL_ITEM_TYPES},((t,s)=>s+1)),r=[];for(;r.length<s;){const t=Math.floor(Math.random()*e.length);r.push(e.splice(t,1)[0])}return r}generateLayerPool(t,s){const e=this.generateLayerItemTypes(t),r=[],o=3*Math.floor(s/e.length/3);for(const t of e)r.push(...Array(o).fill(t));let i=s-o*e.length;const n=[...e].sort((()=>Math.random()-.5));for(;i>0;)for(const t of n){if(i<=0)break;const s=Math.min(3,i);r.push(...Array(s).fill(t)),i-=s}for(let t=r.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[r[t],r[s]]=[r[s],r[t]]}return r}generateBoardData(){const t=Array.from({length:this.ROWS},(()=>Array.from({length:3*this.COLS},(()=>[])))),s=this.generateGridLayers(),e=new Array(this.MAX_LAYERS).fill(0);for(let t=0;t<this.ROWS;t++)for(let r=0;r<this.COLS;r++){const o=s[t][r];if(o>0)for(let t=0;t<o;t++)t<this.MAX_LAYERS&&(e[t]+=3)}const r=[];for(let t=0;t<this.MAX_LAYERS;t++)e[t]>0&&(r[t]=this.generateLayerPool(t,e[t]));const o=new Array(this.MAX_LAYERS).fill(0);for(let e=0;e<this.ROWS;e++)for(let i=0;i<this.COLS;i++){const n=s[e][i];if(0===n)continue;const h=3*i;for(let s=0;s<n&&!(s>=this.MAX_LAYERS);s++)for(let i=0;i<3;i++){const n=r[s][o[s]++];t[e][h+i].push(n)}}return this.shuffleBoardExceptFirstLayer(t),t}shuffleBoardExceptFirstLayer(t){const s=[],r=[];for(let o=0;o<this.ROWS;o++)for(let i=0;i<3*this.COLS;i++){const n=t[o][i];let h=e.SIMPLE_CENG;1!=this.LEVEL&&(h=0);for(let t=h;t<n.length;t++)s.push(n[t]),r.push([o,i,t])}this.shuffleArray(s);for(let e=0;e<s.length;e++){const[o,i,n]=r[e];t[o][i][n]=s[e]}}shuffleArray(t){for(let s=t.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1));[t[s],t[e]]=[t[e],t[s]]}}printLayerStatistics(t){const s={};for(let t=0;t<this.MAX_LAYERS;t++){s[t]={};for(let e=1;e<=this.ALL_ITEM_TYPES;e++)s[t][e]=0}for(let e=0;e<this.ROWS;e++)for(let r=0;r<3*this.COLS;r++){const o=t[e][r];for(let t=0;t<o.length;t++){const e=o[t];s[t]&&void 0!==s[t][e]&&s[t][e]++}}console.log("===== Board层数道具类型统计 =====");for(let t=0;t<this.MAX_LAYERS;t++){console.log(`--- Layer ${t} ---`);const e=Object.keys(s[t]).map(Number).filter((e=>s[t][e]>0)).sort(((t,s)=>t-s));if(0===e.length){console.log("(无道具)");continue}for(const r of e)console.log(`道具类型 ${r}: ${s[t][r]}个`);const r=e.reduce(((e,r)=>e+s[t][r]),0);console.log(`总计: ${r}个道具\n,道具类型数量: ${e.length}个`)}}countItemTypes(t){const s=new Map;for(let e=0;e<this.ROWS;e++)for(let r=0;r<3*this.COLS;r++){const o=t[e][r];for(const t of o){if(null==t)continue;const e=s.get(t)||0;s.set(t,e+1)}}const e=Array.from(s.entries()).sort(((t,s)=>t[0]-s[0]));return new Map(e)}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/gameDataTypes.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"542b1rRDupFVYRQ7Y675UXo","gameDataTypes",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/gameManager2.ts",["cc","./Constant2.ts"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy},function(e){a=e.default}],execute:function(){t._RF.push({},"504a3X9ofZHLJ5tqZ69JHdD","gameManager",void 0);const o={level:1,score:0,diamonds:50,money:0,moveCount:0,rollBackCount:0,refreshCount:0,showGuide:!0,removeNum:0,endGeziLock:!0,bindInfo:{channelID:0,name:"",phoneNumber:""},wallentMoney:0,pendingNum:8e3,lastRankUpdateTime:0,submitTimestamp:0,submitChannel:"PayPal",doubleDuration:0,items:[],itemCount:[0,0,0],itemUseCount:[0,0,0],historyStack:[],bottomSlots:Array(a.FREE_GEZI).fill(null),clickItemCount:0,bottomExtraData:[],restMatchNum:0,totalLayerCount:0,adEarnMoney:0,checkedAccoladeIndex:0,totalGroup:0,removedGroup:0,totalRemoveNum:0,endGeZiJiliCount:0,playTimes:0,userID:"1"};class n{static saveProgress(e){try{n.Data=e,localStorage.setItem(n.KEY,JSON.stringify(e))}catch(e){console.warn("保存进度失败:",e)}}static loadProgress(){const e=localStorage.getItem(n.KEY);if(e)try{let t=JSON.parse(e),a={...o};return void 0===t.adEarnMoney||null===t.adEarnMoney?t.adEarnMoney=a.adEarnMoney:void 0===t.checkedAccoladeIndex||null===t.checkedAccoladeIndex?t.checkedAccoladeIndex=a.checkedAccoladeIndex:void 0===t.totalGroup||null===t.totalGroup?t.totalGroup=a.totalGroup:void 0===t.removedGroup||null===t.removedGroup?t.removedGroup=a.removedGroup:void 0===t.totalRemoveNum||null===t.totalRemoveNum?t.totalRemoveNum=a.totalRemoveNum:void 0===t.endGeZiJiliCount||null===t.endGeZiJiliCount?t.endGeZiJiliCount=a.endGeZiJiliCount:void 0!==t.playTimes&&null!==t.playTimes||(t.playTimes=a.playTimes),t}catch(e){console.warn("读取进度失败:",e)}return console.warn("没有找到游戏进度，返回默认值"),{...o}}static getGameData(){if(null!=n.Data)return n.Data;try{return n.Data=n.loadProgress(),n.Data}catch(e){console.warn("getGameData 读取进度失败:",e)}}static clearProgress(){localStorage.removeItem(n.KEY)}static setIsPlaying(e){this.is_playing=e}static getIsPlaying(){return this.is_playing}static setIsDoubleState(e){this.isDoubleState=e}static getIsDoubleState(){return this.isDoubleState}static get rewardMultiplier(){let e=n.loadProgress();return 1==e.level?a.LEVEL1_REWARD_MULTIPLIER:2==e.level?a.LEVEL2_REWARD_MULTIPLIER:3==e.level?a.LEVEL3_REWARD_MULTIPLIER:1}static getAdRewardMoney(){let e=a.MAXADEARNMOENY-n.loadProgress().adEarnMoney,t=0,o=0,l=n.adEarnData;for(let a=0;a<l.length;a++)if(e>=l[a][0]){l[a][1]>0?t+=l[a][0]:o+=l[a][2];break}return t<=0&&(t=e*o),t=Math.round(100*t)/100,t}}e("GameManager",n),n.KEY="gameData",n.Data=void 0,n.is_playing=!1,n.isDoubleState=!1,n.adEarnData=[],t._RF.pop()}}}));

System.register("chunks:///_virtual/HalfDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager2.ts"],(function(e){var t,a,r,l,i,n,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){r=e.cclegacy,l=e.Label,i=e._decorator,n=e.Component},function(e){o=e.GameManager}],execute:function(){var c,s,u,g,p;r._RF.push({},"eb17447i5tLF56goYc37HMW","HalfDialog",void 0);const{ccclass:f,property:b}=i;e("halfDialog",(c=f("halfDialog"),s=b(l),c((p=t((g=class extends n{constructor(...e){super(...e),a(this,"label",p,this)}start(){let e=o.getGameData().level+45+Math.round(5*Math.random()),t=this.label.string,a=e;this.label.string=t.replace("%d",a.toString())}}).prototype,"label",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=g))||u));r._RF.pop()}}}));

System.register("chunks:///_virtual/inputinfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager2.ts","./Constant2.ts","./EventManager2.ts","./ButtonClickHandler2.ts","./BundleLoader.ts"],(function(e){var t,i,n,o,a,s,l,r,h,g,d,c,u,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Button,a=e.ToggleContainer,s=e.EditBox,l=e._decorator,r=e.Component,h=e.instantiate},function(e){g=e.GameManager},function(e){d=e.default},function(e){c=e.eventManager},function(e){u=e.ButtonClickHandler},function(e){m=e.BundleLoader}],execute:function(){var f,p,b,B,_,E,C,v,y,N,x,I,D,T,k;n._RF.push({},"05a541ZMF9FbIl/GZWf76fG","inputinfo",void 0);const{ccclass:O,property:P}=l;e("inputinfo",(f=O("inputinfo"),p=P(o),b=P(o),B=P(a),_=P(s),E=P(s),C=P(s),f((N=t((y=class extends r{constructor(...e){super(...e),i(this,"btn_confim",N,this),i(this,"btn_help",x,this),i(this,"group",I,this),i(this,"emailEditBox",D,this),i(this,"phoneEditBox",T,this),i(this,"nameEditBox",k,this),this.gameData=void 0,this.emailRegex=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,this.phoneRegex=/^(?:[0-9] ?){5,14}[0-9]$/,this.target=null}start(){u.handleBtnClickWithSound1(this.btn_confim,(()=>{this.onConfim()}),this),u.handleBtnClickWithSound1(this.btn_help,(()=>{m.loadPrefab("b_bundle",d.PAY_METHOD).then((e=>{h(e).parent=this.node})).catch((e=>{console.error("Failed to load prefab data:",e)}))}),this),this.group.node.children.forEach((e=>{e.on("toggle",this.toggle_cb,this)}))}onEnable(){this.gameData=g.loadProgress();let e=0;if(this.gameData.bindInfo){e=this.gameData.bindInfo.channelID;let t=this.gameData.bindInfo.name,i=this.gameData.bindInfo.phoneNumber;e=e<=0?0:e-1,this.group.toggleItems.forEach((e=>{e.isChecked=!1})),t&&""!=t&&(this.nameEditBox.string=t),i&&""!=i&&(0==e?this.emailEditBox.string=i:this.phoneEditBox.string=i)}const t=this.group.toggleItems[e];t.isChecked=!0,this.toggle_cb(t)}toggle_cb(e){if(this.node.getChildByName("hei_1").active=!0,this.node.getChildByName("hei_2").active=!0,this.node.getChildByName("hei_3").active=!0,this.node.getChildByName("select_1").active=!1,this.node.getChildByName("select_2").active=!1,this.node.getChildByName("select_3").active=!1,this.node.getChildByName("inputinfobg1").active=!1,this.node.getChildByName("inputinfobg2").active=!1,e.isChecked)switch(e.node.name){case"Toggle1":this.node.getChildByName("inputinfobg1").active=!0,this.node.getChildByName("hei_1").active=!1,this.node.getChildByName("select_1").active=!0;break;case"Toggle2":this.node.getChildByName("inputinfobg2").active=!0,this.node.getChildByName("hei_2").active=!1,this.node.getChildByName("select_2").active=!0;break;case"Toggle3":this.node.getChildByName("inputinfobg2").active=!0,this.node.getChildByName("hei_3").active=!1,this.node.getChildByName("select_3").active=!0}}onCloseClick(){this.node.destroy()}onConfim(){if(!this.nameEditBox.string.trim())return void c.emit(d.SHOW_TOAST,d.ENTER_NAME);const e=this.group.toggleItems.find((e=>e.isChecked));if(!e)return;let t=!1;switch(e.node.name){case"Toggle1":const e=this.emailEditBox.string.trim();if(t=this.validateEmail(e),!t)return console.log("Email is 无效!"),void c.emit(d.SHOW_TOAST,d.ENTER_EMAIL);break;case"Toggle2":case"Toggle3":const i=this.phoneEditBox.string.trim();if(t=this.validatePhoneNumber(i),!t)return c.emit(d.SHOW_TOAST,d.ENTER_PHONE),void console.log("Phone number is 无效!")}t&&(console.log("this.group.toggleItems.indexOf(selectedToggle)",this.group.toggleItems.indexOf(e)),this.gameData.bindInfo.channelID=this.group.toggleItems.indexOf(e)+1,this.gameData.bindInfo.name=this.nameEditBox.string.trim(),"Toggle1"===e.node.name?(console.log("Email is 有效!"),this.gameData.bindInfo.phoneNumber=this.emailEditBox.string.trim()):(this.gameData.bindInfo.phoneNumber=this.phoneEditBox.string.trim(),console.log("Phone number is 有效!")),this.target&&this.target.isValid&&(this.target.gameData=this.gameData),g.saveProgress(this.gameData),m.loadPrefab("b_bundle",d.CONFIRM_AGAIN).then((e=>{h(e).parent=this.node.parent,this.node.destroy()})).catch((e=>{console.error("Failed to load prefab:",e)})))}validateEmail(e){return!!e&&this.emailRegex.test(e)}validatePhoneNumber(e){if(!e)return!1;const t=e.replace(/\s/g,"");return this.phoneRegex.test(t)}}).prototype,"btn_confim",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(y.prototype,"btn_help",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(y.prototype,"group",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(y.prototype,"emailEditBox",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(y.prototype,"phoneEditBox",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(y.prototype,"nameEditBox",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/LayerScale2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonClickHandler2.ts"],(function(e){var t,s,n,i,a,c,o,l,r;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Button,a=e._decorator,c=e.Component,o=e.Vec3,l=e.tween},function(e){r=e.ButtonClickHandler}],execute:function(){var u,d,h,p,g;n._RF.push({},"8c7fc2m9JpJzrgo6LgjSc2p","LayerScale",void 0);const{ccclass:y,property:w}=a;e("LayerScale",(u=y("LayerScale"),d=w(i),u((g=t((p=class extends c{constructor(...e){super(...e),s(this,"btn_close",g,this)}start(){const e=new o(0,0,0),t=new o(1.1,1.1,1.1),s=new o(1,1,1),n=new o(1e3,1e3,1e3),i=(new o).set(o.ONE).divide(t),a=this.node.getChildByName("mask");a&&(a.setScale(n),l(a).to(.25,{scale:i},{easing:"sineOut"}).to(.25,{scale:s},{easing:"sineOut"}).start()),this.node.setScale(e),l(this.node).to(.25,{scale:t},{easing:"sineOut"}).to(.25,{scale:s},{easing:"sineOut"}).start(),this.btn_close&&r.handleBtnClickWithSound1(this.btn_close,(()=>{a&&(a.active=!1),l(this.node).to(.1,{scale:t},{easing:"sineOut"}).to(.25,{scale:e},{easing:"sineOut"}).call((()=>{this.node.destroy()})).start()}),this)}close(){const e=new o(0,0,0),t=new o(1.1,1.1,1.1),s=(new o(1,1,1),this.node.getChildByName("mask"));s&&(s.active=!1),l(this.node).to(.1,{scale:t},{easing:"sineOut"}).to(.25,{scale:e},{easing:"sineOut"}).call((()=>{this.node.destroy()})).start()}}).prototype,"btn_close",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=p))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/levelselect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./Constant2.ts","./BundleLoader.ts"],(function(e){var t,i,o,l,n,a,s,r,c,u,d,h,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,l=e.Node,n=e._decorator,a=e.Component,s=e.Label,r=e.Sprite,c=e.UITransform,u=e.tween,d=e.Vec3},function(e){h=e.default},function(e){p=e.default},function(e){m=e.BundleLoader}],execute:function(){var v,g,N,f,y,b,C,w,_;o._RF.push({},"02681Hbuj1NnKylbCe9EN50","levelselect",void 0);const{ccclass:S,property:B}=n,A=.5;e("levelselect",(v=S("levelselect"),g=B(l),N=B(l),f=B(l),v((C=t((b=class extends a{constructor(...e){super(...e),i(this,"leftNode",C,this),i(this,"rightNode",w,this),i(this,"levelNode",_,this),this._animationCompleteCallback=null}initData(e,t){this.leftNode.getChildByName("value").getComponent(s).string=e.toString(),t&&(this._animationCompleteCallback=t),h.inst.playOneShot(p.SOUND_START),this.showRightNode(),this.showLeftNode(),this.showTopLevels(e)}showTopLevels(e){const t=e%4||4;for(let n=1;n<=4;n++){var i;const a=this.levelNode.getChildByName(`level${n}`);if(!a)continue;const c=t===n,u=c?"resources/textures/popup/9":"resources/textures/popup/14";let d;var o,l;if(m.loadSpriteFrame("b_bundle",u).then((e=>{a.getComponent(r).spriteFrame=e})).catch((e=>{console.error("Failed to load sprite data:",e)})),c)d=e,(null==(o=a.getChildByName("value_bg"))?void 0:o.active)&&(a.getChildByName("value_bg").active=!0),this.scheduleOnce((()=>this.playItemAnimation(a)),.05);else d=t>n?e-(t-n):e+(n-t),(null==(l=a.getChildByName("value_bg"))?void 0:l.active)&&(a.getChildByName("value_bg").active=!1),this.playItemAnimation(a);(null==(i=a.getChildByName("value"))?void 0:i.getComponent(s)).string=d.toString()}}showLeftNode(){var e;this.createSideNodeAnimation(this.leftNode,(null==(e=this.leftNode.getComponent(c))?void 0:e.width)||600,!0).call((()=>{var e;null==(e=this._animationCompleteCallback)||e.call(this),this._animationCompleteCallback=null})).start()}showRightNode(){var e;this.createSideNodeAnimation(this.rightNode,-((null==(e=this.rightNode.getComponent(c))?void 0:e.width)||600),!1).start()}playItemAnimation(e){const t=e.position.clone();u(e).to(A,{position:new d(t.x,t.y-600,t.z)}).delay(.5).to(A,{position:t}).start()}createSideNodeAnimation(e,t,i){const o=e.position.clone();return u(e).to(A,{position:new d(o.x+t,o.y,o.z)}).delay(.5).to(A,{position:o})}}).prototype,"leftNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(b.prototype,"rightNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(b.prototype,"levelNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/levelstatic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager2.ts","./Constant2.ts","./EventManager2.ts","./ButtonClickHandler2.ts","./SDKManager.ts","./CurrencyFormatter.ts","./RateManager.ts"],(function(t){var e,i,n,a,l,r,o,s,h,u,c,d,b,_,w,g,m,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Button,l=t.Node,r=t.Label,o=t._decorator,s=t.Component,h=t.Vec3,u=t.tween,c=t.Color},function(t){d=t.GameManager},function(t){b=t.default},function(t){_=t.eventManager},function(t){w=t.ButtonClickHandler},function(t){g=t.SDKManager},function(t){m=t.CurrencyFormatter},function(t){f=t.default}],execute:function(){var C,p,y,v,N,S,k,O,H,M,D,W,B,L,z,A,E,T,F,R,U,P,Y,x,V,X,G;n._RF.push({},"2810aaPgL1MxoY+JeVlh8r9","levelstatic",void 0);const{ccclass:I,property:$}=o;t("levelstatic",(C=I("levelstatic"),p=$(a),y=$(a),v=$(l),N=$(l),S=$(a),k=$(a),O=$(a),H=$(r),M=$(r),D=$(r),W=$(r),B=$(l),C((A=e((z=class extends s{constructor(...t){super(...t),i(this,"btn_close",A,this),i(this,"btn_withdraw",E,this),i(this,"tiXian_Node",T,this),i(this,"fuHuo_Node",F,this),i(this,"btn_get",R,this),i(this,"btn_receive",U,this),i(this,"btn_close1",P,this),i(this,"get_label",Y,this),i(this,"withdraw_num_label",x,this),i(this,"rate_num_label",V,this),i(this,"withdrawMsg_label",X,this),i(this,"shou_Node",G,this),this.gameData=void 0,this.itemtype=0,this.from="",this._Callback=null}start(){const t=this.node.getChildByName("mask"),e=new h(0,0,0),i=new h(1.1,1.1,1.1);this.gameData=d.loadProgress(),w.handleBtnClickWithSound1(this.btn_close,(()=>{null!=this._Callback&&(this._Callback("Close"),this._Callback=null),t&&(t.active=!1),u(this.node).to(.1,{scale:i},{easing:"sineOut"}).to(.25,{scale:e},{easing:"sineOut"}).call((()=>{this.node.destroy()})).start()}),this),w.handleBtnClickWithSound1(this.btn_close1,(()=>{if("game"!=this.from)return this.node.destroy(),void _.emit(b.SHOW_WALLET);null!=this._Callback&&(this._Callback("Close"),this._Callback=null),t&&(t.active=!1),u(this.node).to(.1,{scale:i},{easing:"sineOut"}).to(.25,{scale:e},{easing:"sineOut"}).call((()=>{this.node.destroy()})).start()}),this),w.handleBtnClickWithSound1(this.btn_withdraw,(()=>{"game"==this.from?_.emit(b.SHOW_TOAST,b.PASS_THIS_LEVEL):(this.node.destroy(),_.emit(b.SHOW_WALLET))}),this)}onEnable(){this.scheduleOnce((()=>{this.node.getChildByName("MarqueeNode").active=!0}),.5)}selectLayer(t,e,i,n){this.from=n,this.shou_Node.active=!1;let a=Math.floor(900+1100*Math.random())*t[1],l=m.formatCurrency(a,t[3],3==t[2]);if(this.rate_num_label.string=t[0]+` ${l}`,"Resurrection"==e)this.tiXian_Node.active=!1,this.fuHuo_Node.active=!0,this._Callback=i,this.setResurrectionLayer();else{this.tiXian_Node.active=!0,this.fuHuo_Node.active=!1,this.setWithdrawLayer(),this.gameData=d.loadProgress();let e=this.gameData.money*t[1],i=m.formatCurrency(e,t[3],3==t[2]);this.withdraw_num_label.string=t[0]+` ${i}`;let a=this.withdrawMsg_label.string;this.withdrawMsg_label.string=a.replace("%d",t[0]+(b.CASH_MONEY*t[1]).toFixed(2)),this.gameData.level<=1&&(this.shou_Node.active=!0),this.btn_withdraw.normalColor=new c(255,255,255),this.btn_withdraw.hoverColor=new c(255,255,255),this.btn_withdraw.pressedColor=new c(255,255,255),this.btn_withdraw.disabledColor=new c(255,255,255),n&&"game"==n&&(this.btn_withdraw.normalColor=new c(150,150,150),this.btn_withdraw.hoverColor=new c(150,150,150),this.btn_withdraw.pressedColor=new c(150,150,150),this.btn_withdraw.disabledColor=new c(150,150,150))}}setResurrectionLayer(){this.get_label.getComponent(r).string=`(${b.BUY_FUHUO})`,w.handleBtnClickWithSound1(this.btn_get,(()=>{this.gameData.diamonds<b.BUY_FUHUO?_.emit(b.SHOW_TOAST,b.NO_ENOUGH_DIAMONDS):(this._Callback("Buy"),this._Callback=null,this.onCloseClick())}),this),w.handleBtnClickWithSound1(this.btn_receive,(()=>{g.instance.showRewardVideo(this,(()=>{this.onReward()}))}),this)}setWithdrawLayer(){}onCloseClick(){this.node.destroy()}async onWithdrawClick(){if(d.getGameData().money<b.CASH_MONEY){let t=b.CASH_NOT_INFO,e=await f.instance.getSign();t=t.replace("%s",e[0]+(b.CASH_MONEY*Number(e[1])).toFixed(2)),_.emit(b.SHOW_TOAST,t)}this.node.destroy()}onReward(){this.node.destroy(),this._Callback("AD"),this._Callback=null}}).prototype,"btn_close",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(z.prototype,"btn_withdraw",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(z.prototype,"tiXian_Node",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(z.prototype,"fuHuo_Node",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(z.prototype,"btn_get",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(z.prototype,"btn_receive",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(z.prototype,"btn_close1",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(z.prototype,"get_label",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(z.prototype,"withdraw_num_label",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(z.prototype,"rate_num_label",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(z.prototype,"withdrawMsg_label",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(z.prototype,"shou_Node",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=z))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/List.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./ListItem.ts"],(function(t){var e,i,s,l,o,n,a,h,r,c,_,d,u,m,p,g,I,y,f,T,S,v,w,z;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,l=t.ScrollView,o=t.Enum,n=t.Node,a=t.Prefab,h=t.CCFloat,r=t.EventHandler,c=t.CCBoolean,_=t.CCInteger,d=t._decorator,u=t.Component,m=t.Layout,p=t.isValid,g=t.UITransform,I=t.instantiate,y=t.NodePool,f=t.Vec3,T=t.Size,S=t.Widget,v=t.tween},function(t){w=t.DEV},function(t){z=t.default}],execute:function(){var b,D,N,E,P,L,G,C,O,R,U,A,B,M,k,x,V,F,H,X,Y,Z,W,j,q,K,J,Q,$,tt,et,it,st,lt,ot,nt,at,ht,rt,ct,_t,dt,ut;s._RF.push({},"1465aK3BeFERYvLMRafKnXR","List",void 0);const{ccclass:mt,property:pt,disallowMultiple:gt,menu:It,executionOrder:yt,requireComponent:ft}=d;var Tt=function(t){return t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB",t}(Tt||{}),St=function(t){return t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE",t}(St||{}),vt=function(t){return t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT",t}(vt||{});t("default",(b=gt(),D=It("List"),N=ft(l),E=yt(-5e3),P=pt({type:o(Tt),tooltip:w}),L=pt({type:n,tooltip:w,visible(){return this.templateType==Tt.NODE}}),G=pt({type:a,tooltip:w,visible(){return this.templateType==Tt.PREFAB}}),C=pt({}),O=pt({type:o(St),tooltip:w}),R=pt({type:h,range:[0,1,.1],tooltip:w,slide:!0,visible(){return this._slideMode==St.PAGE}}),U=pt({type:r,tooltip:w,visible(){return this._slideMode==St.PAGE}}),A=pt({}),B=pt({type:c,tooltip:w}),M=pt({tooltip:w,visible(){let t=this.slideMode==St.NORMAL;return t||(this.cyclic=!1),t}}),k=pt({tooltip:w,visible(){return this.virtual}}),x=pt({tooltip:w,visible(){let t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}}),V=pt({type:_}),F=pt({type:_,range:[0,6,1],tooltip:w,slide:!0}),H=pt({type:_,range:[0,12,1],tooltip:w,slide:!0}),X=pt({type:r,tooltip:w}),Y=pt({type:o(vt),tooltip:w}),Z=pt({type:r,tooltip:w,visible(){return this.selectedMode>vt.NONE}}),W=pt({tooltip:w,visible(){return this.selectedMode==vt.SINGLE}}),j=pt({serializable:!1}),mt(q=b(q=D(q=N(q=E((J=e((K=class extends u{constructor(...t){super(...t),i(this,"templateType",J,this),i(this,"tmpNode",Q,this),i(this,"tmpPrefab",$,this),i(this,"_slideMode",tt,this),i(this,"pageDistance",et,this),i(this,"pageChangeEvent",it,this),i(this,"_virtual",st,this),i(this,"cyclic",lt,this),i(this,"lackCenter",ot,this),i(this,"lackSlide",nt,this),i(this,"_updateRate",at,this),i(this,"frameByFrameRenderNum",ht,this),i(this,"renderEvent",rt,this),i(this,"selectedMode",ct,this),i(this,"selectedEvent",_t,this),i(this,"repeatEventSingle",dt,this),this._selectedId=-1,this._lastSelectedId=void 0,this.multSelected=void 0,this._forceUpdate=!1,this._align=void 0,this._horizontalDir=void 0,this._verticalDir=void 0,this._startAxis=void 0,this._alignCalcType=void 0,this.content=void 0,this._contentUt=void 0,this.firstListId=void 0,this.displayItemNum=void 0,this._updateDone=!0,this._updateCounter=void 0,this._actualNumItems=void 0,this._cyclicNum=void 0,this._cyclicPos1=void 0,this._cyclicPos2=void 0,i(this,"_numItems",ut,this),this._inited=!1,this._scrollView=void 0,this._layout=void 0,this._resizeMode=void 0,this._topGap=void 0,this._rightGap=void 0,this._bottomGap=void 0,this._leftGap=void 0,this._columnGap=void 0,this._lineGap=void 0,this._colLineNum=void 0,this._lastDisplayData=void 0,this.displayData=void 0,this._pool=void 0,this._itemTmp=void 0,this._itemTmpUt=void 0,this._needUpdateWidget=!1,this._itemSize=void 0,this._sizeType=void 0,this._customSize=void 0,this.frameCount=void 0,this._aniDelRuning=!1,this._aniDelCB=void 0,this._aniDelItem=void 0,this._aniDelBeforePos=void 0,this._aniDelBeforeScale=void 0,this.viewTop=void 0,this.viewRight=void 0,this.viewBottom=void 0,this.viewLeft=void 0,this._doneAfterUpdate=!1,this.elasticTop=void 0,this.elasticRight=void 0,this.elasticBottom=void 0,this.elasticLeft=void 0,this.scrollToListId=void 0,this.adhering=!1,this._adheringBarrier=!1,this.nearestListId=void 0,this.curPageNum=0,this._beganPos=void 0,this._scrollPos=void 0,this._curScrollIsTouch=void 0,this._scrollToListId=void 0,this._scrollToEndTime=void 0,this._scrollToSo=void 0,this._lack=void 0,this._allItemSize=void 0,this._allItemSizeNoEdge=void 0,this._scrollItem=void 0,this._thisNodeUt=void 0}set slideMode(t){this._slideMode=t}get slideMode(){return this._slideMode}set virtual(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()}get virtual(){return this._virtual}set updateRate(t){t>=0&&t<=6&&(this._updateRate=t)}get updateRate(){return this._updateRate}set selectedId(t){let e,i=this;switch(i.selectedMode){case vt.SINGLE:{if(!i.repeatEventSingle&&t==i._selectedId)return;let s;if(e=i.getItemByListId(t),i._selectedId>=0?i._lastSelectedId=i._selectedId:i._lastSelectedId=null,i._selectedId=t,e&&(s=e.getComponent(z),s.selected=!0),i._lastSelectedId>=0&&i._lastSelectedId!=i._selectedId){let t=i.getItemByListId(i._lastSelectedId);t&&(t.getComponent(z).selected=!1)}i.selectedEvent&&r.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems);break}case vt.MULT:{if(e=i.getItemByListId(t),!e)return;let s=e.getComponent(z);i._selectedId>=0&&(i._lastSelectedId=i._selectedId),i._selectedId=t;let l=!s.selected;s.selected=l;let o=i.multSelected.indexOf(t);l&&o<0?i.multSelected.push(t):!l&&o>=0&&i.multSelected.splice(o,1),i.selectedEvent&&r.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems,l);break}}}get selectedId(){return this._selectedId}set numItems(t){let e=this;if(e.checkInited(!1))if(null==t||t<0)console.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=St.PAGE||(e.curPageNum=e.nearestListId);else{e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems);let t=e.content.getComponent(m);if(t&&(t.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){let t=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum;for(let i=0;i<t;i++)e._createOrUpdateItem2(i);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(let t=0;t<e._numItems;t++)e._createOrUpdateItem2(t);e.displayItemNum=e._numItems}}}get numItems(){return this._actualNumItems}get scrollView(){return this._scrollView}onLoad(){this._init()}onDestroy(){let t=this;p(t._itemTmp)&&t._itemTmp.destroy(),p(t.tmpNode)&&t.tmpNode.destroy(),t._pool&&t._pool.clear()}onEnable(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))}onDisable(){this._unregisterEvent()}_registerEvent(){let t=this;t.node.on(n.EventType.TOUCH_START,t._onTouchStart,t),t.node.on("touch-up",t._onTouchUp,t),t.node.on(n.EventType.TOUCH_CANCEL,t._onTouchCancelled,t),t.node.on("scroll-began",t._onScrollBegan,t),t.node.on("scroll-ended",t._onScrollEnded,t),t.node.on("scrolling",t._onScrolling,t),t.node.on(n.EventType.SIZE_CHANGED,t._onSizeChanged,t)}_unregisterEvent(){let t=this;t.node.off(n.EventType.TOUCH_START,t._onTouchStart,t),t.node.off("touch-up",t._onTouchUp,t),t.node.off(n.EventType.TOUCH_CANCEL,t._onTouchCancelled,t),t.node.off("scroll-began",t._onScrollBegan,t),t.node.off("scroll-ended",t._onScrollEnded,t),t.node.off("scrolling",t._onScrolling,t),t.node.off(n.EventType.SIZE_CHANGED,t._onSizeChanged,t)}_init(){let t=this;if(!t._inited)if(t._thisNodeUt=t.node.getComponent(g),t._scrollView=t.node.getComponent(l),t.content=t._scrollView.content,t._contentUt=t.content.getComponent(g),t.content){switch(t._layout=t.content.getComponent(m),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(I(t.templateType==Tt.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=St.ADHERING&&t._slideMode!=St.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new y,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case m.Type.HORIZONTAL:switch(t._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case m.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case m.Type.VERTICAL:switch(t._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case m.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case m.Type.GRID:switch(t._startAxis){case m.AxisDirection.HORIZONTAL:switch(t._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case m.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case m.AxisDirection.VERTICAL:switch(t._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case m.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else console.error(t.node.name+"'s ScrollView unset content!")}_processAutoScrolling(t){const e=1e-4,i=new f;let s=this._scrollView;const o=s._isNecessaryAutoScrollBrake(),n=o?.05:1;s._autoScrollAccumulatedTime+=t*(1/n);let a=Math.min(1,s._autoScrollAccumulatedTime/s._autoScrollTotalTime);var h;s._autoScrollAttenuate&&(h=a,a=(h-=1)*h*h*h*h+1);const r=s._autoScrollTargetDelta.clone();r.multiplyScalar(a);const c=s._autoScrollStartPosition.clone();c.add(r);let _=Math.abs(a-1)<=e;if(Math.abs(a-1)<=s.getScrollEndedEventTiming()&&!s._isScrollEndedWithThresholdEventFired&&(s._dispatchEvent(l.EventType.SCROLL_ENG_WITH_THRESHOLD),s._isScrollEndedWithThresholdEventFired=!0),s.elastic){const t=c.clone();t.subtract(s._autoScrollBrakingStartPosition),o&&t.multiplyScalar(n),c.set(s._autoScrollBrakingStartPosition),c.add(t)}else{const t=c.clone();t.subtract(s._getContentPosition());const l=s._getHowMuchOutOfBoundary(t);l.equals(i,e)||(c.add(l),_=!0)}_&&(s._autoScrolling=!1);const d=new f(c);d.subtract(s._getContentPosition()),s._clampDelta(d),s._moveContent(d,_),s._dispatchEvent(l.EventType.SCROLLING),s._autoScrolling||(s._isBouncing=!1,s._scrolling=!1,s._dispatchEvent(l.EventType.SCROLL_ENDED))}setTemplateItem(t){if(!t)return;let e=this;if(e._itemTmp=t,e._itemTmpUt=t.getComponent(g),e._resizeMode==m.ResizeMode.CHILDREN)e._itemSize=e._layout.cellSize;else{let i=t.getComponent(g);e._itemSize=new T(i.width,i.height)}let i=t.getComponent(z),s=!1;switch(i||(s=!0),s&&(e.selectedMode=vt.NONE),i=t.getComponent(S),i&&i.enabled&&(e._needUpdateWidget=!0),e.selectedMode==vt.MULT&&(e.multSelected=[]),e._align){case m.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case m.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case m.Type.GRID:switch(e._startAxis){case m.AxisDirection.HORIZONTAL:let t=e._contentUt.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((t+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case m.AxisDirection.VERTICAL:let i=e._contentUt.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((i+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}checkInited(t=!0){return!!this._inited||(t&&console.error("List initialization not completed!"),!1)}_resizeContent(){let t,e=this;switch(e._align){case m.Type.HORIZONTAL:if(e._customSize){let i=e._getFixedSize(null);t=e._leftGap+i.val+e._itemSize.width*(e._numItems-i.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case m.Type.VERTICAL:if(e._customSize){let i=e._getFixedSize(null);t=e._topGap+i.val+e._itemSize.height*(e._numItems-i.count)+e._lineGap*(e._numItems-1)+e._bottomGap}else t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case m.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case m.AxisDirection.HORIZONTAL:let i=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*i+e._lineGap*(i-1)+e._bottomGap;break;case m.AxisDirection.VERTICAL:let s=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*s+e._columnGap*(s-1)+e._rightGap}}let i=e.content.getComponent(m);if(i&&(i.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){let t=e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width;e._cyclicPos1=0,t-=e._cyclicPos1,e._cyclicNum=Math.ceil(t/e._allItemSizeNoEdge)+1;let i=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+i,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+i*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=i*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width);let s=e._lack&&e.lackCenter||!e.lackSlide?.1:0,l=e._lack?(e._sizeType?e._thisNodeUt.height:e._thisNodeUt.width)-s:e.cyclic?e._cyclicAllItemSize:e._allItemSize;l<0&&(l=0),e._sizeType?e._contentUt.height=l:e._contentUt.width=l}_onScrolling(t=null){if(null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)return void this.frameCount--;if(this.frameCount=this._updateRate,this._aniDelRuning)return;if(this.cyclic){let t=this.content.getPosition();t=this._sizeType?t.y:t.x;let e=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),i=this._sizeType?new f(0,e,0):new f(e,0,0),s=this.content.getPosition();switch(this._alignCalcType){case 1:t>-this._cyclicPos1?(s.set(-this._cyclicPos2,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i))):t<-this._cyclicPos2&&(s.set(-this._cyclicPos1,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)));break;case 2:t<this._cyclicPos1?(s.set(this._cyclicPos2,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):t>this._cyclicPos2&&(s.set(this._cyclicPos1,s.y,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i)));break;case 3:t<this._cyclicPos1?(s.set(s.x,this._cyclicPos2,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):t>this._cyclicPos2&&(s.set(s.x,this._cyclicPos1,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i)));break;case 4:t>-this._cyclicPos1?(s.set(s.x,-this._cyclicPos2,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(i))):t<-this._cyclicPos2&&(s.set(s.x,-this._cyclicPos1,s.z),this.content.setPosition(s),this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)))}}let e,i,s,l;if(this._calcViewPos(),this._sizeType?(e=this.viewTop,s=this.viewBottom):(i=this.viewRight,l=this.viewLeft),this._virtual){let t;this.displayData=[];let o=0,n=this._numItems-1;if(this._customSize){let a=!1;for(;o<=n&&!a;o++)switch(t=this._calcItemPos(o),this._align){case m.Type.HORIZONTAL:t.right>=l&&t.left<=i?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0);break;case m.Type.VERTICAL:t.bottom<=e&&t.top>=s?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0);break;case m.Type.GRID:switch(this._startAxis){case m.AxisDirection.HORIZONTAL:t.bottom<=e&&t.top>=s?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0);break;case m.AxisDirection.VERTICAL:t.right>=l&&t.left<=i?this.displayData.push(t):0!=o&&this.displayData.length>0&&(a=!0)}}}else{let t=this._itemSize.width+this._columnGap,a=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:o=(l-this._leftGap)/t,n=(i-this._leftGap)/t;break;case 2:o=(-i-this._rightGap)/t,n=(-l-this._rightGap)/t;break;case 3:o=(-e-this._topGap)/a,n=(-s-this._topGap)/a;break;case 4:o=(s-this._bottomGap)/a,n=(e-this._bottomGap)/a}for(o=Math.floor(o)*this._colLineNum,n=Math.ceil(n)*this._colLineNum,n--,o<0&&(o=0),n>=this._numItems&&(n=this._numItems-1);o<=n;o++)this.displayData.push(this._calcItemPos(o))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;let a=this._lastDisplayData.length,h=this.displayItemNum!=a;if(h&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(((t,e)=>t-e)),h=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[a-1]),this._forceUpdate||h)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(let t=0;t<this.displayItemNum;t++)this._createOrUpdateItem(this.displayData[t]);this._forceUpdate=!1}this._calcNearestItem()}}_calcViewPos(){let t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this._thisNodeUt.width,this.elasticRight=this.viewRight>this._contentUt.width?Math.abs(this.viewRight-this._contentUt.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this._thisNodeUt.width,this.elasticLeft=this.viewLeft<-this._contentUt.width?Math.abs(this.viewLeft+this._contentUt.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this._thisNodeUt.height,this.elasticBottom=this.viewBottom<-this._contentUt.height?Math.abs(this.viewBottom+this._contentUt.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this._thisNodeUt.height,this.elasticTop=this.viewTop>this._contentUt.height?Math.abs(this.viewTop-this._contentUt.height):0,this.viewTop-=this.elasticTop}}_calcItemPos(t){let e,i,s,l,o,n,a,h;switch(this._align){case m.Type.HORIZONTAL:switch(this._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){let i=this._getFixedSize(t);o=this._leftGap+(this._itemSize.width+this._columnGap)*(t-i.count)+(i.val+this._columnGap*i.count);let s=this._customSize[t];e=s>0?s:this._itemSize.width}else o=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter){o-=this._leftGap,o+=this._contentUt.width/2-this._allItemSizeNoEdge/2}return n=o+e,{id:t,left:o,right:n,x:o+this._itemTmpUt.anchorX*e,y:this._itemTmp.y};case m.HorizontalDirection.RIGHT_TO_LEFT:if(this._customSize){let i=this._getFixedSize(t);n=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-i.count)-(i.val+this._columnGap*i.count);let s=this._customSize[t];e=s>0?s:this._itemSize.width}else n=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(this.lackCenter){n+=this._rightGap,n-=this._contentUt.width/2-this._allItemSizeNoEdge/2}return o=n-e,{id:t,right:n,left:o,x:o+this._itemTmpUt.anchorX*e,y:this._itemTmp.y}}break;case m.Type.VERTICAL:switch(this._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:if(this._customSize){let e=this._getFixedSize(t);s=-this._topGap-(this._itemSize.height+this._lineGap)*(t-e.count)-(e.val+this._lineGap*e.count);let l=this._customSize[t];i=l>0?l:this._itemSize.height}else s=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter){s+=this._topGap,s-=this._contentUt.height/2-this._allItemSizeNoEdge/2}return l=s-i,{id:t,top:s,bottom:l,x:this._itemTmp.x,y:l+this._itemTmpUt.anchorY*i};case m.VerticalDirection.BOTTOM_TO_TOP:if(this._customSize){let e=this._getFixedSize(t);l=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-e.count)+(e.val+this._lineGap*e.count);let s=this._customSize[t];i=s>0?s:this._itemSize.height}else l=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(this.lackCenter){l-=this._bottomGap,l+=this._contentUt.height/2-this._allItemSizeNoEdge/2}return s=l+i,{id:t,top:s,bottom:l,x:this._itemTmp.x,y:l+this._itemTmpUt.anchorY*i}}case m.Type.GRID:{let e=Math.floor(t/this._colLineNum);switch(this._startAxis){case m.AxisDirection.HORIZONTAL:switch(this._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:s=-this._topGap-(this._itemSize.height+this._lineGap)*e,l=s-this._itemSize.height,h=l+this._itemTmpUt.anchorY*this._itemSize.height;break;case m.VerticalDirection.BOTTOM_TO_TOP:l=this._bottomGap+(this._itemSize.height+this._lineGap)*e,s=l+this._itemSize.height,h=l+this._itemTmpUt.anchorY*this._itemSize.height}switch(a=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:a+=this._itemTmpUt.anchorX*this._itemSize.width,a-=this._contentUt.anchorX*this._contentUt.width;break;case m.HorizontalDirection.RIGHT_TO_LEFT:a+=(1-this._itemTmpUt.anchorX)*this._itemSize.width,a-=(1-this._contentUt.anchorX)*this._contentUt.width,a*=-1}return{id:t,top:s,bottom:l,x:a,y:h};case m.AxisDirection.VERTICAL:switch(this._horizontalDir){case m.HorizontalDirection.LEFT_TO_RIGHT:o=this._leftGap+(this._itemSize.width+this._columnGap)*e,n=o+this._itemSize.width,a=o+this._itemTmpUt.anchorX*this._itemSize.width,a-=this._contentUt.anchorX*this._contentUt.width;break;case m.HorizontalDirection.RIGHT_TO_LEFT:n=-this._rightGap-(this._itemSize.width+this._columnGap)*e,o=n-this._itemSize.width,a=o+this._itemTmpUt.anchorX*this._itemSize.width,a+=(1-this._contentUt.anchorX)*this._contentUt.width}switch(h=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case m.VerticalDirection.TOP_TO_BOTTOM:h-=(1-this._itemTmpUt.anchorY)*this._itemSize.height,h+=(1-this._contentUt.anchorY)*this._contentUt.height;break;case m.VerticalDirection.BOTTOM_TO_TOP:h-=this._itemTmpUt.anchorY*this._itemSize.height,h+=this._contentUt.anchorY*this._contentUt.height,h*=-1}return{id:t,left:o,right:n,x:a,y:h}}break}}}_calcExistItemPos(t){let e=this.getItemByListId(t);if(!e)return null;let i=e.getComponent(g),s=e.getPosition(),l={id:t,x:s.x,y:s.y};return this._sizeType?(l.top=s.y+i.height*(1-i.anchorY),l.bottom=s.y-i.height*i.anchorY):(l.left=s.x-i.width*i.anchorX,l.right=s.x+i.width*(1-i.anchorX)),l}getItemPos(t){return this._virtual||this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)}_getFixedSize(t){if(!this._customSize)return null;null==t&&(t=this._numItems);let e=0,i=0;for(let s in this._customSize)parseInt(s)<t&&(e+=this._customSize[s],i++);return{val:e,count:i}}_onScrollBegan(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft}_onScrollEnded(){let t=this;if(t._curScrollIsTouch=!1,null!=t.scrollToListId){let e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&v(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}t._onScrolling(),t._slideMode!=St.ADHERING||t.adhering?t._slideMode==St.PAGE&&(null!=t._beganPos&&t._curScrollIsTouch?this._pageAdhere():t.adhere()):t.adhere()}_onTouchStart(t,e){if(this._scrollView._hasNestedViewGroup(t,e))return;if(this._curScrollIsTouch=!0,!(t.eventPhase===Event.AT_TARGET&&t.target===this.node)){let e=t.target;for(;null==e._listId&&e.parent;)e=e.parent;this._scrollItem=null!=e._listId?e:t.target}}_onTouchUp(){let t=this;t._scrollPos=null,t._slideMode==St.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==St.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null}_onTouchCancelled(t,e){let i=this;i._scrollView._hasNestedViewGroup(t,e)||t.simulate||(i._scrollPos=null,i._slideMode==St.ADHERING?(i.adhering&&(i._adheringBarrier=!0),i.adhere()):i._slideMode==St.PAGE&&(null!=i._beganPos?i._pageAdhere():i.adhere()),this._scrollItem=null)}_onSizeChanged(){this.checkInited(!1)&&this._onScrolling()}_onItemAdaptive(t){let e=t.getComponent(g);if(!this._sizeType&&e.width!=this._itemSize.width||this._sizeType&&e.height!=this._itemSize.height){this._customSize||(this._customSize={});let i=this._sizeType?e.height:e.width;this._customSize[t._listId]!=i&&(this._customSize[t._listId]=i,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}}_pageAdhere(){let t=this;if(!t.cyclic&&(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0))return;let e=t._sizeType?t.viewTop:t.viewLeft,i=(t._sizeType?t._thisNodeUt.height:t._thisNodeUt.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>i){let i=.5;switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(i):t.nextPage(i);break;case 2:case 3:t._beganPos<e?t.prePage(i):t.nextPage(i)}}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}adhere(){let t=this;if(!t.checkInited())return;if(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)return;t.adhering=!0,t._calcNearestItem();let e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t._thisNodeUt.height:t._thisNodeUt.width);t.scrollTo(t.nearestListId,.7,e)}update(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){let t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum;for(let e=this._updateCounter;e<t;e++){let t=this.displayData[e];t&&this._createOrUpdateItem(t)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==St.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){let t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum;for(let e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==St.PAGE&&(this.curPageNum=this.nearestListId)}_createOrUpdateItem(t){let e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(new f(t.x,t.y,0)),this._resetItemSize(e),this.renderEvent&&r.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{let i=this._pool.size()>0;if(e=i?this._pool.get():I(this._itemTmp),i&&p(e)||(e=I(this._itemTmp),i=!1),e._listId!=t.id){e._listId=t.id,e.getComponent(g).setContentSize(this._itemSize)}if(e.setPosition(new f(t.x,t.y,0)),this._resetItemSize(e),this.content.addChild(e),i&&this._needUpdateWidget){let t=e.getComponent(S);t&&t.updateAlignment()}e.setSiblingIndex(this.content.children.length-1);let s=e.getComponent(z);e.listItem=s,s&&(s.listId=t.id,s.list=this,s._registerEvent()),this.renderEvent&&r.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)}_createOrUpdateItem2(t){let e,i=this.content.children[t];i?this._forceUpdate&&this.renderEvent&&(i._listId=t,e&&(e.listId=t),this.renderEvent&&r.emitEvents([this.renderEvent],i,t%this._actualNumItems)):(i=I(this._itemTmp),i._listId=t,this.content.addChild(i),e=i.getComponent(z),i.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&r.emitEvents([this.renderEvent],i,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)}_updateListItem(t){if(t&&this.selectedMode>vt.NONE){let e=t.node;switch(this.selectedMode){case vt.SINGLE:t.selected=this.selectedId==e._listId;break;case vt.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}}_resetItemSize(t){}_updateItemPos(t){let e=isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y)}setMultSelected(t,e){let i=this;if(i.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)i.multSelected=t;else{let s,l;if(e)for(let e=t.length-1;e>=0;e--)s=t[e],l=i.multSelected.indexOf(s),l<0&&i.multSelected.push(s);else for(let e=t.length-1;e>=0;e--)s=t[e],l=i.multSelected.indexOf(s),l>=0&&i.multSelected.splice(l,1)}i._forceUpdate=!0,i._onScrolling()}}getMultSelected(){return this.multSelected}hasMultSelected(t){return this.multSelected&&this.multSelected.indexOf(t)>=0}updateItem(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(let e=0,i=t.length;e<i;e++){let i=t[e],s=this.getItemByListId(i);s&&r.emitEvents([this.renderEvent],s,i%this._actualNumItems)}}}updateAll(){this.checkInited()&&(this.numItems=this.numItems)}getItemByListId(t){if(this.content)for(let e=this.content.children.length-1;e>=0;e--){let i=this.content.children[e];if(i._listId==t)return i}}_getOutsideItem(){let t,e=[];for(let i=this.content.children.length-1;i>=0;i--)t=this.content.children[i],this.displayData.find((e=>e.id==t._listId))||e.push(t);return e}_delRedundantItem(){if(this._virtual){let t=this._getOutsideItem();for(let e=t.length-1;e>=0;e--){let i=t[e];if(!this._scrollItem||i._listId!=this._scrollItem._listId){i.isCached=!0,this._pool.put(i);for(let t=this._lastDisplayData.length-1;t>=0;t--)if(this._lastDisplayData[t]==i._listId){this._lastDisplayData.splice(t,1);break}}}}else for(;this.content.children.length>this._numItems;)this._delSingleItem(this.content.children[this.content.children.length-1])}_delSingleItem(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null}aniDelItem(t,e,i){let s=this;if(!s.checkInited()||s.cyclic||!s._virtual)return console.error("This function is not allowed to be called!");if(!e)return console.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(s._aniDelRuning)return console.warn("Please wait for the current deletion to finish!");let l,o=s.getItemByListId(t);if(!o)return void e(t);l=o.getComponent(z),s._aniDelRuning=!0,s._aniDelCB=e,s._aniDelItem=o,s._aniDelBeforePos=o.position,s._aniDelBeforeScale=o.scale;let n=s.displayData[s.displayData.length-1].id,a=l.selected;l.showAni(i,(()=>{let i;if(n<s._numItems-2&&(i=n+1),null!=i){let t=s._calcItemPos(i);s.displayData.push(t),s._virtual?s._createOrUpdateItem(t):s._createOrUpdateItem2(i)}else s._numItems--;if(s.selectedMode==vt.SINGLE)a?s._selectedId=-1:s._selectedId-1>=0&&s._selectedId--;else if(s.selectedMode==vt.MULT&&s.multSelected.length){let e=s.multSelected.indexOf(t);e>=0&&s.multSelected.splice(e,1);for(let e=s.multSelected.length-1;e>=0;e--){s.multSelected[e]>=t&&s.multSelected[e]--}}if(s._customSize){s._customSize[t]&&delete s._customSize[t];let e,i={};for(let l in s._customSize){e=s._customSize[l];let o=parseInt(l);i[o-(o>=t?1:0)]=e}s._customSize=i}let l,h;for(let a=null!=i?i:n;a>=t+1;a--)if(o=s.getItemByListId(a),o){let i=s._calcItemPos(a-1);l=v(o).to(.2333,{position:new f(i.x,i.y,0)}),a<=t+1&&(h=!0,l.call((()=>{s._aniDelRuning=!1,e(t),delete s._aniDelCB}))),l.start()}h||(s._aniDelRuning=!1,e(t),s._aniDelCB=null)}),!0)}scrollTo(t,e=.5,i=null,s=!1){let l=this;if(!l.checkInited(!1))return;null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=l._numItems&&(t=l._numItems-1),!l._virtual&&l._layout&&l._layout.enabled&&l._layout.updateLayout();let o,n,a=l.getItemPos(t);if(!a)return w;switch(l._alignCalcType){case 1:o=a.left,o-=null!=i?l._thisNodeUt.width*i:l._leftGap,a=new f(o,0,0);break;case 2:o=a.right-l._thisNodeUt.width,o+=null!=i?l._thisNodeUt.width*i:l._rightGap,a=new f(o+l._contentUt.width,0,0);break;case 3:n=a.top,n+=null!=i?l._thisNodeUt.height*i:l._topGap,a=new f(0,-n,0);break;case 4:n=a.bottom+l._thisNodeUt.height,n-=null!=i?l._thisNodeUt.height*i:l._bottomGap,a=new f(0,-n+l._contentUt.height,0)}let h=l.content.getPosition();h=Math.abs(l._sizeType?h.y:h.x);let r=l._sizeType?a.y:a.x;Math.abs((null!=l._scrollPos?l._scrollPos:h)-r)>.5&&(l._scrollView.scrollToOffset(a,e),l._scrollToListId=t,l._scrollToEndTime=(new Date).getTime()/1e3+e,l._scrollToSo=l.scheduleOnce((()=>{if(l._adheringBarrier||(l.adhering=l._adheringBarrier=!1),l._scrollPos=l._scrollToListId=l._scrollToEndTime=l._scrollToSo=null,s){let e=l.getItemByListId(t);e&&v(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}}),e+.1),e<=0&&l._onScrolling())}_calcNearestItem(){let t,e,i,s,l,o,n=this;n.nearestListId=null,n._virtual&&n._calcViewPos(),i=n.viewTop,s=n.viewRight,l=n.viewBottom,o=n.viewLeft;let a=!1;for(let h=0;h<n.content.children.length&&!a;h+=n._colLineNum)if(t=n._virtual?n.displayData[h]:n._calcExistItemPos(h),t)switch(e=n._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,n._alignCalcType){case 1:t.right>=o&&(n.nearestListId=t.id,o>e&&(n.nearestListId+=n._colLineNum),a=!0);break;case 2:t.left<=s&&(n.nearestListId=t.id,s<e&&(n.nearestListId+=n._colLineNum),a=!0);break;case 3:t.bottom<=i&&(n.nearestListId=t.id,i<e&&(n.nearestListId+=n._colLineNum),a=!0);break;case 4:t.top>=l&&(n.nearestListId=t.id,l>e&&(n.nearestListId+=n._colLineNum),a=!0)}if(t=n._virtual?n.displayData[n.displayItemNum-1]:n._calcExistItemPos(n._numItems-1),t&&t.id==n._numItems-1)switch(e=n._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,n._alignCalcType){case 1:s>e&&(n.nearestListId=t.id);break;case 2:o<e&&(n.nearestListId=t.id);break;case 3:l<e&&(n.nearestListId=t.id);break;case 4:i>e&&(n.nearestListId=t.id)}}prePage(t=.5){this.checkInited()&&this.skipPage(this.curPageNum-1,t)}nextPage(t=.5){this.checkInited()&&this.skipPage(this.curPageNum+1,t)}skipPage(t,e){let i=this;if(i.checkInited())return i._slideMode!=St.PAGE?console.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=i._numItems||i.curPageNum!=t&&(i.curPageNum=t,i.pageChangeEvent&&r.emitEvents([i.pageChangeEvent],t),i.scrollTo(t,e)))}calcCustomSize(t){let e=this;if(!e.checkInited())return;if(!e._itemTmp)return console.error("Unset template item!");if(!e.renderEvent)return console.error("Unset Render-Event!");e._customSize={};let i=I(e._itemTmp),s=i.getComponent(g);e.content.addChild(i);for(let l=0;l<t;l++)r.emitEvents([e.renderEvent],i,l),s.height==e._itemSize.height&&s.width==e._itemSize.width||(e._customSize[l]=e._sizeType?s.height:s.width);return Object.keys(e._customSize).length||(e._customSize=null),i.removeFromParent(),i.destroy&&i.destroy(),e._customSize}}).prototype,"templateType",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Tt.NODE}}),Q=e(K.prototype,"tmpNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(K.prototype,"tmpPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(K.prototype,"_slideMode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return St.NORMAL}}),e(K.prototype,"slideMode",[O],Object.getOwnPropertyDescriptor(K.prototype,"slideMode"),K.prototype),et=e(K.prototype,"pageDistance",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),it=e(K.prototype,"pageChangeEvent",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r}}),st=e(K.prototype,"_virtual",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(K.prototype,"virtual",[B],Object.getOwnPropertyDescriptor(K.prototype,"virtual"),K.prototype),lt=e(K.prototype,"cyclic",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ot=e(K.prototype,"lackCenter",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nt=e(K.prototype,"lackSlide",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at=e(K.prototype,"_updateRate",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(K.prototype,"updateRate",[F],Object.getOwnPropertyDescriptor(K.prototype,"updateRate"),K.prototype),ht=e(K.prototype,"frameByFrameRenderNum",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rt=e(K.prototype,"renderEvent",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r}}),ct=e(K.prototype,"selectedMode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return vt.NONE}}),_t=e(K.prototype,"selectedEvent",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r}}),dt=e(K.prototype,"repeatEventSingle",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ut=e(K.prototype,"_numItems",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=K))||q)||q)||q)||q)||q));s._RF.pop()}}}));

System.register("chunks:///_virtual/ListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env"],(function(e){var t,i,n,s,o,l,r,a,c,d,h,p,u,m,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Sprite,o=e.Node,l=e.Enum,r=e.SpriteFrame,a=e._decorator,c=e.Component,d=e.Button,h=e.EventHandler,p=e.UITransform,u=e.tween,m=e.Vec3},function(e){b=e.DEV}],execute:function(){var g,f,v,y,_,C,w,S,E,F,I,N,T,z,k,D,H;n._RF.push({},"e7dc6ZAYPVLJKxNcW8aTO1J","ListItem",void 0);const{ccclass:L,property:M,disallowMultiple:O,menu:G,executionOrder:W}=a;var A=function(e){return e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH",e}(A||{});e("default",(g=O(),f=G("List Item"),v=W(-5001),y=M({type:s,tooltip:b}),_=M({type:o,tooltip:b}),C=M({type:l(A),tooltip:b}),w=M({type:o,tooltip:b,visible(){return this.selectedMode>A.NONE}}),S=M({type:r,tooltip:b,visible(){return this.selectedMode==A.SWITCH}}),E=M({tooltip:b}),L(F=g(F=f(F=v((N=t((I=class extends c{constructor(...e){super(...e),i(this,"icon",N,this),i(this,"title",T,this),i(this,"selectedMode",z,this),i(this,"selectedFlag",k,this),i(this,"selectedSpriteFrame",D,this),this._unselectedSpriteFrame=null,i(this,"adaptiveSize",H,this),this._selected=!1,this._btnCom=void 0,this.list=void 0,this._eventReg=!1,this.listId=void 0}set selected(e){if(this._selected=e,this.selectedFlag)switch(this.selectedMode){case A.TOGGLE:this.selectedFlag.active=e;break;case A.SWITCH:let t=this.selectedFlag.getComponent(s);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}}get selected(){return this._selected}get btnCom(){return this._btnCom||(this._btnCom=this.node.getComponent(d)),this._btnCom}onLoad(){if(this.selectedMode==A.SWITCH){let e=this.selectedFlag.getComponent(s);this._unselectedSpriteFrame=e.spriteFrame}}onDestroy(){this.node.off(o.EventType.SIZE_CHANGED,this._onSizeChange,this)}_registerEvent(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(o.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)}_onSizeChange(){this.list._onItemAdaptive(this.node)}createEvt(e,t,i=null){if(!e.isValid)return;e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");let n=new h;return n.target=i||e.node,n.component=e.comName,n.handler=t,n}showAni(e,t,i){let n,s=this,o=s.node.getComponent(p);switch(e){case 0:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(0,2*o.height)});break;case 1:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(2*o.width,0)});break;case 2:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(0,-2*o.height)});break;case 3:n=u(s.node).to(.2,{scale:new m(.7,.7)}).by(.3,{position:new m(-2*o.width,0)});break;default:n=u(s.node).to(.3,{scale:new m(.1,.1)})}(t||i)&&n.call((()=>{if(i){s.list._delSingleItem(s.node);for(let e=s.list.displayData.length-1;e>=0;e--)if(s.list.displayData[e].id==s.listId){s.list.displayData.splice(e,1);break}}t()})),n.start()}onClickThis(){this.list.selectedId=this.listId}}).prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(I.prototype,"title",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"selectedMode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.NONE}}),k=t(I.prototype,"selectedFlag",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(I.prototype,"selectedSpriteFrame",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(I.prototype,"adaptiveSize",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=I))||F)||F)||F)||F));n._RF.pop()}}}));

System.register("chunks:///_virtual/loading2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskData.ts"],(function(e){var r,t,s,n,a,o,i,c,l,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){s=e.cclegacy,n=e.ProgressBar,a=e._decorator,o=e.Component,i=e.tween,c=e.assetManager,l=e.director},function(e){p=e.TaskData}],execute:function(){var u,g,d,f,h;s._RF.push({},"46e23Mo2uNDSZPsw6CU1CMA","loading",void 0);const{ccclass:B,property:b}=a;e("loading",(u=B("loading"),g=b({type:n}),u((h=r((f=class extends o{constructor(...e){super(...e),t(this,"progressBar",h,this)}start(){p.getInstance();let e=1*Math.random()+2;this.progressBar.progress=0,i(this.progressBar).to(e,{progress:1},{easing:"sineIn",onStart:()=>{this.progressBar.progress=0,c.getBundle("b_bundle").loadScene("b_scenes/Game",((e,r)=>{l.runScene(r)}))}}).call((()=>{})).start()}update(e){}}).prototype,"progressBar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/MarqueeController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonClickHandler2.ts","./BundleLoader.ts","./SDKManager.ts","./CurrencyFormatter.ts"],(function(t){var e,i,n,o,r,s,a,l,h,c,u,p,d,g,m,f,y,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Prefab,r=t.Node,s=t.CCInteger,a=t.JsonAsset,l=t._decorator,h=t.Component,c=t.UITransform,u=t.Vec3,p=t.instantiate,d=t.RichText,g=t.Sprite},function(t){m=t.ButtonClickHandler},function(t){f=t.BundleLoader},function(t){y=t.SDKManager},function(t){b=t.CurrencyFormatter}],execute:function(){var w,C,x,B,H,S,v,_,M,N,P,F,z,I,A,D,E;n._RF.push({},"1deb0wIzZ1BXqR/hkJFlZQM","MarqueeController",void 0);const{ccclass:J,property:R}=l;t("MarqueeController",(w=J("MarqueeController"),C=R(o),x=R({type:r}),B=R({type:s,tooltip:"是否显示下拉箭头 (0:隐藏, 1:显示)"}),H=R({type:s,tooltip:"是否显示滚动背景 (0:隐藏, 1:显示)"}),S=R({type:r}),v=R(a),w((N=e((M=class extends h{constructor(...t){super(...t),i(this,"itemPrefab",N,this),i(this,"content",P,this),i(this,"scrollSpeed",F,this),i(this,"spacing",z,this),i(this,"show_expandBtn",I,this),i(this,"show_contentbg",A,this),i(this,"expandButton",D,this),i(this,"rateJson",E,this),this.items=[],this.itemHeight=0,this.viewHeight=0,this.currentOffset=0,this.isPlaying=!0,this.expandNum=10,this.isExpand=-1}getSign(){let t="$",e=1,i=1,n=.1,o=y.instance.getCountry();for(let r=0;r<this.rateJson.json.length;r++){const s=this.rateJson.json[r];s.country_code==String(o)&&(t=s.sign,e=s.rate,i=s.type,n=s.min_units)}return[t,e,i,n]}start(){f.loadJson("b_bundle","resources/data/rank").then((t=>{this.viewHeight=this.node.getComponent(c).height,this.createAllItems(t),this.schedule(this.updateScroll,.01),this.expandButton.active=!1})).catch((t=>{console.error("Failed to load level data:",t)})),1===this.show_expandBtn&&(this.expandButton.active=!0,m.handleBtnClickWithSound1(this.expandButton,(()=>{this.toggleExpand()}),this))}onDisable(){this.content.removeAllChildren(),this.unschedule(this.updateScroll)}toggleExpand(){this.isExpand=-this.isExpand,this.expandButton.scale=new u(1,-this.isExpand,1);let t=1==this.isExpand?this.expandNum:1;this.node.getChildByName("ScrollView").getComponent(c).height=this.itemHeight*t,this.viewHeight=this.itemHeight*t,this.node.getChildByName("ScrollView").getChildByName("view").getComponent(c).height=this.itemHeight*t,this.content.getComponent(c).height=this.itemHeight*t}createAllItems(t){const e=p(this.itemPrefab);this.itemHeight=e.getComponent(c).height,e.destroy();const i=Math.ceil(this.viewHeight/this.itemHeight)+7;for(let e=0;e<i;e++){const i=p(this.itemPrefab);this.content.addChild(i),this.setItemData(i,{icon_index:t[e].icon_index,playerName:t[e].player,challengeTimes:t[e].level,withdrawalAmount:t[e].withdrawals});const n=-e*(this.itemHeight+this.spacing);i.setPosition(0,n,0),this.items.push(i)}}setItemData(t,e){var i;let n=this.getSign(),o="",r=e.withdrawalAmount*Number(n[1]),s=b.formatCurrency(r,Number(n[3]),3==n[2]);o=n[0]+` ${s}`;const a=`<b>Congratulations <color=#E2B350>${e.playerName}</color><br/> by passing level <color=#FF0000>${e.challengeTimes}</color>,withdraw of <br/><color=#FF0000>${o}</color></b>`,l=null==(i=t.getChildByName("Label"))?void 0:i.getComponent(d);l&&(l.string=a),f.loadSpriteFrame("b_bundle",`resources/textures/popup/${e.icon_index}`).then((e=>{t&&t.getChildByName("channel_icon")&&(t.getChildByName("channel_icon").getComponent(g).spriteFrame=e)})).catch((t=>{console.error("Failed to load sprite data:",t)}))}updateScroll(t){if(this.isPlaying){this.currentOffset+=this.scrollSpeed*t,this.currentOffset>this.itemHeight+this.spacing&&(this.currentOffset-=this.itemHeight+this.spacing,this.recycleItem());for(const e of this.items)e.setPosition(0,e.position.y+this.scrollSpeed*t)}}recycleItem(){let t=this.items[0],e=t.position.y;for(const i of this.items)i.position.y>e&&(t=i,e=i.position.y);let i=e;for(const t of this.items)t.position.y<i&&(i=t.position.y);t.setPosition(0,i-(this.itemHeight+this.spacing))}play(){this.isPlaying=!0}pause(){this.isPlaying=!1}generateRandomName(t,e){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n="0123456789";let o="";for(let e=0;e<t;e++)o+=i.charAt(Math.floor(Math.random()*i.length));for(let t=0;t<e;t++)o+=n.charAt(Math.floor(Math.random()*n.length));return o}getRandomInRange(t,e){const i=Math.random()*(e-t)+t;return Math.round(100*i)/100}}).prototype,"itemPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(M.prototype,"content",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(M.prototype,"scrollSpeed",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),z=e(M.prototype,"spacing",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=e(M.prototype,"show_expandBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=e(M.prototype,"show_contentbg",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=e(M.prototype,"expandButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(M.prototype,"rateJson",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=M))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/marqueeUpdate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant2.ts","./BundleLoader.ts","./RateManager.ts","./CurrencyFormatter.ts"],(function(t){var e,i,a,n,o,r,s,l,u,c,h,p,d,y,m,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,n=t.Node,o=t.Sprite,r=t.RichText,s=t._decorator,l=t.Component,u=t.UIOpacity,c=t.v3,h=t.tween,p=t.UITransform},function(t){d=t.default},function(t){y=t.BundleLoader},function(t){m=t.default},function(t){g=t.CurrencyFormatter}],execute:function(){var b,f,w,x,v,C,D,F,q,I,U;a._RF.push({},"bb24ae3rU1LgqDij4PLftAX","marqueeUpdate",void 0);const{ccclass:_,property:j}=s;t("marqueeUpdate",(b=_("marqueeUpdate"),f=j(n),w=j(n),x=j(o),v=j(r),b((F=e((D=class extends l{constructor(...t){super(...t),i(this,"bg",F,this),i(this,"layout",q,this),i(this,"icon",I,this),i(this,"msg",U,this),this.index=-1,this.jsonData=null}start(){this.bg.getComponent(u).opacity=0,this.layout.scale=c(0,0,0),this.init()}async init(){this.jsonData=await y.loadJson("b_bundle","resources/data/rank"),await this.waitToPlay()}waitToPlay(){this.index++,this.index>=this.jsonData.length&&(this.index=0),this.initIconAndMsg(),h(this.node).delay(this.getRandomDuration()).call((()=>{this.playAnim()})).start()}async initIconAndMsg(){let t=this.jsonData[this.index],e=await y.loadSpriteFrame("b_bundle",`resources/textures/popup/${t.icon_index}`);this.icon.spriteFrame=e;let i=await m.instance.getSign(),a="",n=t.withdrawals*Number(i[1]),o=g.formatCurrency(n,Number(i[3]),3==i[2]);a=i[0]+` ${o}`;const r=`<b>Congratulations <color=#E2B350>${t.player}</color> by passing level <color=#FF0000>${t.level}</color>,withdraw of <color=#FF0000>${a}</color></b>`;this.msg.string=r}getRandomDuration(){return Math.random()*d.marqueeInterval[0]+(d.marqueeInterval[1]-d.marqueeInterval[0])}playAnim(){this.layout.scale=c(1,1,1);let t=.5*this.node.getComponent(p).width+.5*this.layout.getComponent(p).width,e=-1*t;this.layout.x=t;let i=this.bg.getComponent(u);i.opacity=0,h(i).to(.2,{opacity:255}).start(),h(this.layout).to(8,{x:e}).call((()=>{h(i).to(.2,{opacity:0}).start(),this.layout.scale=c(0,0,0),this.waitToPlay()})).start()}}).prototype,"bg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(D.prototype,"layout",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(D.prototype,"icon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(D.prototype,"msg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=D))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/mask.ts",["cc"],(function(s){var t,e,c,o;return{setters:[function(s){t=s.cclegacy,e=s.Component,c=s.Node,o=s._decorator}],execute:function(){var n;t._RF.push({},"8ddb7f36N1BOpdqOgzNmt8h","mask",void 0);const{ccclass:a,property:r}=o;s("mask",a("mask")(n=class extends e{start(){this.node.on(c.EventType.TOUCH_END,this.onMaskClick,this)}onMaskClick(s){console.log("Mask node clicked!")}update(s){}})||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager2.ts","./Constant2.ts","./EventManager2.ts","./ButtonClickHandler2.ts","./BundleLoader.ts","./SDKManager.ts"],(function(e){var t,i,n,a,o,s,r,l,c,d,h,p,u,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Button,o=e._decorator,s=e.Component,r=e.Label,l=e.Sprite},function(e){c=e.GameManager},function(e){d=e.default},function(e){h=e.eventManager},function(e){p=e.ButtonClickHandler},function(e){u=e.BundleLoader},function(e){m=e.SDKManager}],execute:function(){var g,b,f,y,_,v,C;n._RF.push({},"52709hrYExKRIvb+LH5diNN","move",void 0);const{ccclass:R,property:B}=o,D={1:d.BUY_MOVE,2:d.BUY_ROLLBACK,3:d.BUY_REFRESH};e("move",(g=R("move"),b=B(a),f=B(a),g((v=t((_=class extends s{constructor(...e){super(...e),i(this,"btn_receive",v,this),i(this,"btn_get",C,this),this.gameData=void 0,this.itemtype=0,this.target=null}start(){this.gameData=c.loadProgress(),p.handleBtnClickWithSound1(this.btn_receive,(()=>{this.onReceiveClick()}),this),p.handleBtnClickWithSound1(this.btn_get,(()=>{this.onGetClick()}),this)}onCloseClick(){this.node.destroy()}onReceiveClick(){m.instance.showRewardVideo(this,(()=>{this.onReward()}))}onGetClick(){const e=D[this.itemtype]||D[1];this.gameData.diamonds<e?h.emit(d.SHOW_TOAST,d.NO_ENOUGH_DIAMONDS):(this.gameData.diamonds-=e,this.target.gameData.diamonds=this.gameData.diamonds,c.saveProgress(this.gameData),h.emit(d.REFRESH_BUTTOM,this.itemtype),h.emit(d.REFRESH_TOP),this.node.destroy())}update(e){}setItemType(e){this.itemtype=e;const t=D[this.itemtype]||D[1];this.btn_get.node.getChildByName("Label").getComponent(r).string=`(${t})`;const i={1:{sprite:"popup/bang",text:"Remove 3 items from the slot and set them aside separately"},2:{sprite:"popup/rollback",text:"Undo the latest move and put the items back in place"},default:{sprite:"popup/refresh",text:"Refresh, rearrange all items on the board"}},n=i[e]||i.default,a=this.node.getChildByName("bang"),o=this.node.getChildByName("content");u.loadSpriteFrame("b_bundle",`resources/textures/${n.sprite}`).then((e=>{a.getComponent(l).spriteFrame=e})).catch((e=>{console.error("Failed to load sprite data:",e)})),o.getComponent(r).string=n.text}onReward(){this.node.destroy(),h.emit(d.REFRESH_BUTTOM,this.itemtype)}}).prototype,"btn_receive",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(_.prototype,"btn_get",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=_))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/OpenDiamond.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonClickHandler2.ts","./BundleLoader.ts","./SDKManager.ts","./gameManager2.ts","./Constant2.ts","./EventManager2.ts","./AudioManager.ts"],(function(e){var t,i,a,n,l,o,r,s,u,c,d,h,m,b,y,p,g,D,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){a=e.cclegacy,n=e.Node,l=e.Label,o=e.Button,r=e.SpriteFrame,s=e._decorator,u=e.Component,c=e.UITransform,d=e.Sprite,h=e.tween},function(e){m=e.ButtonClickHandler},function(e){b=e.BundleLoader},function(e){y=e.SDKManager},function(e){p=e.GameManager},function(e){g=e.default},function(e){D=e.eventManager},function(e){v=e.default}],execute:function(){var f,N,k,S,R,_,w,M,C,G,L,O,V,A,z,P,F,B,E;a._RF.push({},"7cee3RdHyNAZr/pMWe/dgOl","OpenDiamond",void 0);const{ccclass:H,property:T}=s;e("OpenDiamond",(f=H("OpenDiamond"),N=T(n),k=T(n),S=T(l),R=T(l),_=T(l),w=T({type:o}),M=T({type:o}),C=T(r),f((O=t((L=class extends u{constructor(...e){super(...e),i(this,"daily",O,this),i(this,"lucky",V,this),i(this,"receiveNum",A,this),i(this,"diamondValue",z,this),i(this,"luckyDiamondValue",P,this),i(this,"btn_daily_receive",F,this),i(this,"btn_lucky_receive",B,this),i(this,"zuan",E,this),this.updataCallback=null,this.GlobalData=void 0,this.targetPos=null}start(){}onEnable(){this.scheduleOnce((()=>{this.node.getChildByName("MarqueeNode").active=!0}),.5)}onDestroy(){var e;this.updataCallback&&(null==(e=this.updataCallback)||e.call(this),this.updataCallback=null)}setCallback(e){this.updataCallback=e}initData(e){this.targetPos=e}setModel(e){this.daily.active="Daily"==e,this.lucky.active="Lucky"==e,"Daily"==e?b.loadJson("b_bundle","resources/data/GlobalVariable").then((e=>{this.GlobalData=e[0];let t=this.getReceiveNum();this.setReceiveNum(t),this.diamondValue.string="+"+this.GlobalData.SeeAdvertisingDiamondNum,m.handleBtnClickWithSound1(this.btn_daily_receive,(()=>{let e=this.getReceiveNum();Number(e)<=0?D.emit(g.SHOW_TOAST,g.MAX_DAILY):y.instance.showRewardVideo(this,(()=>{this.onRewardDiary()}))}),this)})).catch((e=>{console.error("Failed to load GlobalVariable data:",e)})):b.loadJson("b_bundle","resources/data/GlobalVariable").then((e=>{this.GlobalData=e[0],this.luckyDiamondValue.string="+"+this.GlobalData.LuckyDiamondNum,m.handleBtnClickWithSound1(this.btn_lucky_receive,(()=>{y.instance.showRewardVideo(this,(()=>{this.onRewardLucky()}))}),this)})).catch((e=>{console.error("Failed to load GlobalVariable data:",e)}))}setReceiveNum(e){let t=(new Date).toLocaleDateString("en-US");this.receiveNum.string=e,cc.sys.localStorage.setItem("ReceiveNum"+t,e)}getReceiveNum(){let e=(new Date).toLocaleDateString("en-US"),t=cc.sys.localStorage.getItem("ReceiveNum"+e);return t||(t=this.GlobalData.SeeAdvertisingNum),t}onRewardDiary(){let e=this.getReceiveNum();e-=1,this.setReceiveNum(e);const t=p.loadProgress();t.diamonds+=this.GlobalData.SeeAdvertisingDiamondNum,p.saveProgress(t),D.emit(g.REFRESH_TOP),this.showMoneyFlyView(this.GlobalData.SeeAdvertisingDiamondNum)}onRewardLucky(){this.node.destroy();const e=p.loadProgress();e.diamonds+=this.GlobalData.LuckyDiamondNum,p.saveProgress(e),D.emit(g.REFRESH_TOP),D.emit(g.MONEY_FLY,[null,this.GlobalData.LuckyDiamondNum])}showMoneyFlyView(e){if(!this.node)return;v.inst.playOneShot(g.SOUND_REWARD);const t=this.node.getComponent(c).convertToNodeSpaceAR(this.targetPos);for(let i=0;i<e;i++){let a=new n;const l=a.addComponent(d);a.setPosition(0+10*i,0),a.setScale(.7,.7),l.spriteFrame=this.zuan,a.parent=this.node,h(a).to(.5,{position:t}).call((()=>{a.destroy(),0==i&&D.emit(g.DIAMOND_SHAKE,e)})).start()}}}).prototype,"daily",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(L.prototype,"lucky",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(L.prototype,"receiveNum",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(L.prototype,"diamondValue",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(L.prototype,"luckyDiamondValue",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"btn_daily_receive",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(L.prototype,"btn_lucky_receive",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(L.prototype,"zuan",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=L))||G));a._RF.pop()}}}));

System.register("chunks:///_virtual/OpenTask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskItem2.ts","./gameManager2.ts","./Constant2.ts","./EventManager2.ts","./TaskData.ts","./result.ts","./BundleLoader.ts","./AudioManager.ts","./List.ts"],(function(t){var e,a,s,i,n,o,l,r,u,h,c,d,p,g,D,b,m,f,k,_,R,I,w,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){s=t.cclegacy,i=t.Toggle,n=t.Node,o=t.Label,l=t.SpriteFrame,r=t._decorator,u=t.Component,h=t.Color,c=t.UITransform,d=t.Sprite,p=t.tween,g=t.ScrollView,D=t.instantiate},function(t){b=t.TaskItem},function(t){m=t.GameManager},function(t){f=t.default},function(t){k=t.eventManager},function(t){_=t.TaskData},function(t){R=t.result},function(t){I=t.BundleLoader},function(t){w=t.default},function(t){T=t.default}],execute:function(){var S,y,E,N,v,A,O,x,z,L,C,F,P,M,B,H,K,U,G,V,Z;s._RF.push({},"4c425QBBK9BZqXGTRrz8ZGn","OpenTask",void 0);const{ccclass:j,property:q}=r;t("OpenTask",(S=j("OpenTask"),y=q(i),E=q(i),N=q(n),v=q(n),A=q(n),O=q(o),x=q(o),z=q(l),L=q(T),S((P=e((F=class extends u{constructor(...t){super(...t),a(this,"toggle1",P,this),a(this,"toggle2",M,this),a(this,"contentNode",B,this),a(this,"redDot_1",H,this),a(this,"redDot_2",K,this),a(this,"label_1",U,this),a(this,"label_2",G,this),a(this,"zuan",V,this),a(this,"list",Z,this),this.taskIndex=null,this.targetPos=null,this.gameData=void 0,this.taskData=[]}start(){this.taskIndex=0,this.gameData=m.loadProgress(),this.toggle1.node.on("toggle",this.callback1,this),this.toggle2.node.on("toggle",this.callback2,this),this.loadTaskData(),this.updateRedDot(),k.once(f.REFRESH_TASK_RED_DOT,(()=>{this.updateRedDot()}),this),this.label_1.color=new h(30,93,189,255),this.label_2.color=new h(56,89,138,255)}onDestroy(){k.off(f.REFRESH_TASK_RED_DOT)}initData(t){this.targetPos=t}updateRedDot(){const t=_.getInstance().checkRedDot("Level"),e=_.getInstance().checkRedDot("Eliminate");this.redDot_1.active=t,this.redDot_2.active=e}loadTaskData(){I.loadJson("b_bundle","resources/data/task").then((t=>{this.taskData[0]=t[0].Reward,this.taskData[1]=t[1].Reward,this.updateList(this.taskIndex),this.list.numItems=this.taskData[this.taskIndex].length})).catch((t=>{console.error("Failed to load task data:",t)}))}updateList(t){let e=0==t?this.gameData.level-1:this.gameData.removeNum;this.taskData[t].sort(((t,a)=>{let s=Number(localStorage.getItem("TaskID"+t.taskID)),i=Number(localStorage.getItem("TaskID"+a.taskID));if(s==i){let s=e>=t.progress?0:1,i=e>=a.progress?0:1;return s!=i?s-i:t.taskID-a.taskID}return s-i}))}showMoneyFlyView(t){if(!this.node)return;w.inst.playOneShot(f.SOUND_REWARD);const e=this.node.getComponent(c).convertToNodeSpaceAR(this.targetPos);for(let a=0;a<t;a++){let s=new n;const i=s.addComponent(d);s.setPosition(0+10*a,0),s.setScale(.7,.7),i.spriteFrame=this.zuan,s.parent=this.node,p(s).to(.5,{position:e}).call((()=>{s.destroy(),0==a&&k.emit(f.DIAMOND_SHAKE,t)})).start()}}callback1(t){t.isChecked&&(this.label_1.color=new h(30,93,189,255),this.label_2.color=new h(56,89,138,255),w.inst.playOneShot(f.SOUND_BTN),this.taskIndex=0,this.list.numItems=this.taskData[this.taskIndex].length,this.list.node.getComponent(g).stopAutoScroll(),this.list.scrollTo(-1,0,0,!1),this.updateList(0),this.list.updateAll())}callback2(t){t.isChecked&&(this.label_2.color=new h(30,93,189,255),this.label_1.color=new h(56,89,138,255),w.inst.playOneShot(f.SOUND_BTN),this.taskIndex=1,this.list.numItems=this.taskData[this.taskIndex].length,this.list.node.getComponent(g).stopAutoScroll(),this.list.scrollTo(-1,0,0,!1),this.updateList(1),this.list.updateAll())}showResultPrefab(t,e,a){I.loadPrefab("b_bundle",f.RESULT_PRE).then((s=>{const i=D(s);this.node.addChild(i);const n=i.getComponent(R);n&&"function"==typeof n.showResult&&n.showResult(t,e,a)})).catch((t=>{console.error("Failed to load prefab data:",t)}))}onListRender(t,e){console.log("onListRender idx:",e);const a=t.getComponent(b);if(a){let t=0==this.taskIndex?this.gameData.level-1:this.gameData.removeNum,s=this.taskData[this.taskIndex][e];a.init(s,t,(t=>{this.showResultPrefab(3,(e=>{localStorage.setItem("TaskID"+t.taskID,"1"),this.updateList(this.taskIndex),this.list.updateAll(),k.emit(f.REFRESH_TASK_RED_DOT),k.emit(f.REFRESH_TASK_MAIN_RED_DOT);let a=s.rewardNum;e&&"GetDouble"==e&&(a=2*s.rewardNum),this.showMoneyFlyView(a)}),t)}))}}}).prototype,"toggle1",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(F.prototype,"toggle2",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(F.prototype,"contentNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(F.prototype,"redDot_1",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(F.prototype,"redDot_2",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(F.prototype,"label_1",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(F.prototype,"label_2",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(F.prototype,"zuan",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(F.prototype,"list",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=F))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/paymethod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager2.ts","./ButtonClickHandler2.ts","./Constant2.ts"],(function(t){var e,n,i,o,r,a,s,l,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.EditBox,r=t.Button,a=t._decorator,s=t.Component},function(t){l=t.eventManager},function(t){c=t.ButtonClickHandler},function(t){u=t.default}],execute:function(){var h,p,d,m,f,g,y;i._RF.push({},"98f72PqyQVKFJBK5pu2QOfl","paymethod",void 0);const{ccclass:_,property:b}=a;t("paymethod",(h=_("paymethod"),p=b(o),d=b(r),h((g=e((f=class extends s{constructor(...t){super(...t),this.emailRegex=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,this.phoneRegex=/^(?:[0-9] ?){5,14}[0-9]$/,n(this,"phone_emailEditBox",g,this),n(this,"btn_confirm",y,this)}start(){c.handleBtnClickWithSound1(this.btn_confirm,(()=>{const t=this.phone_emailEditBox.string.trim();this.validatePhoneNumber(t)||this.validateEmail(t)?this.node.destroy():l.emit(u.SHOW_TOAST,u.CHECK_INFO)}),this)}validateEmail(t){return!!t&&this.emailRegex.test(t)}validatePhoneNumber(t){if(!t)return!1;const e=t.replace(/\s/g,"");return this.phoneRegex.test(e)}}).prototype,"phone_emailEditBox",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(f.prototype,"btn_confirm",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/pending.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager2.ts","./ButtonClickHandler2.ts","./Constant2.ts","./EventManager2.ts"],(function(e){var t,n,i,a,o,s,r,l,c,u,g,p,h,m,d,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Button,o=e.Sprite,s=e.Label,r=e.Node,l=e._decorator,c=e.Component,u=e.Vec3,g=e.UITransform,p=e.tween},function(e){h=e.GameManager},function(e){m=e.ButtonClickHandler},function(e){d=e.default},function(e){b=e.eventManager}],execute:function(){var f,_,k,y,C,M,D,v,w,z,B;i._RF.push({},"f9587uaKMxBeKmA0S1MTxMz","pending",void 0);const{ccclass:N,property:S}=l;e("pending",(f=N("pending"),_=S(a),k=S(o),y=S(s),C=S(r),f((v=t((D=class extends c{constructor(...e){super(...e),n(this,"btn_close",v,this),n(this,"mask_icon",w,this),n(this,"get_label",z,this),n(this,"mask",B,this),this.gameData=void 0}start(){const e=this.node.getChildByName("mask"),t=new u(0,0,0),n=new u(1.1,1.1,1.1);this.gameData=h.loadProgress();let i=this.gameData.pendingNum;this.mask.getComponent(g).setContentSize(i*this.mask_icon.node.getComponent(g).width/d.PEDING_NUM,this.mask_icon.node.getComponent(g).height),this.get_label.string=Math.ceil(i)+"/"+d.PEDING_NUM,m.handleBtnClickWithSound1(this.btn_close,(()=>{e&&(e.active=!1),p(this.node).to(.1,{scale:n},{easing:"sineOut"}).to(.25,{scale:t},{easing:"sineOut"}).call((()=>{this.node.destroy()})).start(),b.emit(d.CLOSE_WALLET)}),this)}onDestroy(){}}).prototype,"btn_close",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(D.prototype,"mask_icon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(D.prototype,"get_label",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(D.prototype,"mask",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=D))||M));i._RF.pop()}}}));

System.register("chunks:///_virtual/rank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CurrencyFormatter.ts","./BundleLoader.ts","./List.ts"],(function(e){var t,r,n,a,i,o,l,s,c,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Node,i=e._decorator,o=e.Component,l=e.Label,s=e.Sprite},function(e){c=e.CurrencyFormatter},function(e){u=e.BundleLoader},function(e){d=e.default}],execute:function(){var g,h,p,m,y,k,b;n._RF.push({},"e90cfvq7QROiIKce+xwToU1","rank",void 0);const{ccclass:_,property:C}=i;e("RankManager",(g=_("RankManager"),h=C(d),p=C(a),g((k=t((y=class extends o{constructor(...e){super(...e),r(this,"list",k,this),r(this,"contentNode",b,this),this.rankData=null,this.signArry=[]}start(){this.loadRankData()}initData(e){this.signArry=e}loadRankData(){u.loadJson("b_bundle","resources/data/rank").then((e=>{const t=e;this.rankData=[...t].sort(((e,t)=>t.level-e.level)),this.list.numItems=this.rankData.length})).catch((e=>{console.error("Failed to load rank data:",e)}))}onListRender(e,t){const r=e.getChildByName("lab_rank"),n=e.getChildByName("lab_player"),a=e.getChildByName("lab_level"),i=e.getChildByName("lab_withdraw"),o=e.getChildByName("rank_icon"),d=e.getChildByName("rank_bg_1"),g=e.getChildByName("rank_bg_2");d.active=!1,g.active=!1;let h=this.rankData[t];r.getComponent(l).string=`${h.rank}`,n.getComponent(l).string=h.player,a.getComponent(l).string=`${h.level}`;let p=Number(h.withdrawals)*this.signArry[1],m=i.getComponent(l),y=c.formatCurrency(p,this.signArry[3],3==this.signArry[2]);m.string=this.signArry[0]+` ${y}`,o.active=!1,h.rank<=3&&(o.active=!0,u.loadSpriteFrame("b_bundle",`resources/textures/new_textures/icon_ranknumber_${h.rank}`).then((e=>{o.getComponent(s).spriteFrame=e})).catch((e=>{console.error("Failed to load sprite data:",e)}))),h.rank%2==0?d.active=!0:g.active=!0}}).prototype,"list",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(y.prototype,"contentNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/RateManager.ts",["cc","./BundleLoader.ts","./SDKManager.ts"],(function(t){var a,n,e;return{setters:[function(t){a=t.cclegacy},function(t){n=t.BundleLoader},function(t){e=t.SDKManager}],execute:function(){a._RF.push({},"a75c7dwBdFG4JOn43NfxYe5","RateManager",void 0);class i{constructor(){this.rateData=null}static get instance(){return i._instance||(i._instance=new i),i._instance}async initRateData(){this.rateData=await n.loadJson("b_bundle","resources/data/rate")}async getSign(){null==this.rateData&&await this.initRateData();let t="$",a=1,n=1,i=.1,s=e.instance.getCountry();for(let e=0;e<this.rateData.length;e++){const r=this.rateData[e];r.country_code==String(s)&&(t=r.sign,a=r.rate,n=r.type,i=r.min_units)}return[t,a,n,i]}}t("default",i),i._instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/record.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager2.ts","./ButtonClickHandler2.ts","./SDKManager.ts","./BundleLoader.ts","./Constant2.ts","./CurrencyFormatter.ts","./EventManager2.ts"],(function(t){var e,i,n,a,r,l,o,s,u,c,d,h,b,g,m,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Node,r=t.Button,l=t.Label,o=t._decorator,s=t.Component,u=t.instantiate},function(t){c=t.GameManager},function(t){d=t.ButtonClickHandler},function(t){h=t.SDKManager},function(t){b=t.BundleLoader},function(t){g=t.default},function(t){m=t.CurrencyFormatter},function(t){p=t.eventManager}],execute:function(){var _,f,y,S,D,w,N,M,v,z,A,C,B,P,T,E,L,F,I,O,k,Y,$,H,U,q,R,W,x;n._RF.push({},"d5167Od5sZP1amhVCYpYQIq","record",void 0);const{ccclass:J,property:V}=o;t("record",(_=J("record"),f=V(a),y=V(a),S=V({type:r}),D=V({type:r}),w=V({type:r}),N=V(l),M=V(l),v=V(l),z=V(l),A=V(l),C=V(l),B=V(l),P=V(l),_((L=e((E=class extends s{constructor(...t){super(...t),i(this,"detailNode",L,this),i(this,"recordNode",F,this),i(this,"btn_peding",I,this),i(this,"btn_down",O,this),i(this,"btn_speed",k,this),i(this,"withdraw_num_label",Y,this),i(this,"date_label",$,this),i(this,"label_acount",H,this),i(this,"label_date",U,this),i(this,"label_amount",q,this),i(this,"label_channel",R,this),i(this,"label_guid",W,this),i(this,"label_queueNum",x,this),this.gameData=void 0,this.signArry=[]}initData(t){this.signArry=t}start(){this.detailNode.active=!1,this.recordNode.active=!1,this.gameData=c.loadProgress(),this.gameData.submitTimestamp>0&&(this.recordNode.active=!0),d.handleBtnClickWithSound1(this.btn_speed,(()=>{let t=this.getSpeedNum();t-=1,this.setSpeedNum(t),t<0?p.emit(g.SHOW_TOAST,g.NO_SPEED_UP_AVAILABLE_TODAY):h.instance.showRewardVideo(this,(()=>{this.gameData.pendingNum=.9*this.gameData.pendingNum,c.saveProgress(this.gameData),this.node.destroy()}))}),this),d.handleBtnClickWithSound1(this.btn_peding,(()=>{b.loadPrefab("b_bundle",g.PENDING_PRE).then((t=>{const e=u(t);this.node.addChild(e)})).catch((t=>{console.error("Failed to load prefab data:",t)}))}),this);let t=0;d.handleBtnClickWithSound1(this.btn_down,(()=>{t+=1,t%2==1?(this.detailNode.active=!0,this.btn_down.node.setScale(1,1,1)):(this.detailNode.active=!1,this.btn_down.node.setScale(1,-1,1))}),this);let e=g.SUBMIT_MONEY[0]*this.signArry[1],i=m.formatCurrency(e,this.signArry[3],3==this.signArry[2]);this.withdraw_num_label.string=this.signArry[0]+i,this.date_label.string=this.formatTimestamp(this.gameData.submitTimestamp),this.label_acount.string=this.gameData.bindInfo.phoneNumber,this.label_date.string=this.formatTimestamp(this.gameData.submitTimestamp),this.label_amount.string=i,this.label_channel.string=this.gameData.submitChannel,this.label_guid.string=Math.floor(9e9*Math.random()+1e9),this.label_queueNum.string=this.gameData.pendingNum.toFixed(0)}formatTimestamp(t){const e=new Date(t);return`${e.getDate()} ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${e.getFullYear()} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`}onDestroy(){}setSpeedNum(t){let e=(new Date).toLocaleDateString("en-US");cc.sys.localStorage.setItem("SpeedNum"+e,t)}getSpeedNum(){let t=(new Date).toLocaleDateString("en-US"),e=cc.sys.localStorage.getItem("SpeedNum"+t);return e||(e=g.DAILY_SPEED_NUM),e}}).prototype,"detailNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(E.prototype,"recordNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(E.prototype,"btn_peding",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(E.prototype,"btn_down",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(E.prototype,"btn_speed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(E.prototype,"withdraw_num_label",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(E.prototype,"date_label",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(E.prototype,"label_acount",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(E.prototype,"label_date",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(E.prototype,"label_amount",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(E.prototype,"label_channel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(E.prototype,"label_guid",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(E.prototype,"label_queueNum",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=E))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/RepeatRotate.ts",["cc"],(function(e){var t,r,a,c,s;return{setters:[function(e){t=e.cclegacy,r=e.Component,a=e.tween,c=e.Vec3,s=e._decorator}],execute:function(){var n;t._RF.push({},"0401du+SV5ODrQDcqnshTeS","RepeatRotate",void 0);const{ccclass:o,property:p}=s;e("RepeatRotate",o("RepeatRotate")(n=class extends r{start(){a(this.node).by(4,{eulerAngles:new c(0,0,-360)}).repeatForever().start()}})||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/ReportManager.ts",["cc","./ABManager.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.ABManager}],execute:function(){t._RF.push({},"a41caTLUNtIxYZL51UcLtpH","ReportManager",void 0);class s{static reportEvent(e,t,r){let a={uid:n.instance.getUserID(),event_type:t,level_id:r};null!=a.uid&&""!=a.uid||(a.uid="unknown"),s.post(s.reportApi,a)}static post(e,t){return new Promise(((n,s)=>{const r=new XMLHttpRequest;r.open("POST",e,!0),r.responseType="json",r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=()=>{if(4===r.readyState)if(r.status>=200&&r.status<300)""!=r.response.data?n(r.response.data):n("");else{const t=`POST 请求失败: ${e}, 状态码: ${r.status}`;console.log(this.TAG,t),s(new Error(t))}},r.onerror=()=>{s(new Error(`POST 网络错误: ${e}`))};const a="object"==typeof t?JSON.stringify(t):t;r.send(a)}))}}e("ReportManager",s),s.reportApi="https://analytics.aigameplay.top/api/track.php",s.TAG="REPORTEVENT",t._RF.pop()}}}));

System.register("chunks:///_virtual/result.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./CurrencyFormatter.ts","./Constant2.ts","./ButtonClickHandler2.ts","./gameManager2.ts","./EventManager2.ts","./SDKManager.ts","./RateManager.ts"],(function(t){var e,i,a,n,l,s,r,o,u,h,c,b,_,g,d,m,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,n=t.Node,l=t.Button,s=t.Label,r=t._decorator,o=t.Component,u=t.v3,h=t.tween},function(t){c=t.default},function(t){b=t.CurrencyFormatter},function(t){_=t.default},function(t){g=t.ButtonClickHandler},function(t){d=t.GameManager},function(t){m=t.eventManager},function(t){f=t.SDKManager},function(t){p=t.default}],execute:function(){var v,y,C,D,w,k,R,E,N,z,M,S,A,O,B,I,F,L,W,T,H,P,V,G,$,x,U,q,Y,j,K,J,Q,X,Z;a._RF.push({},"807d48svudJtbNGuV28FpjU","result",void 0);const{ccclass:tt,property:et}=r;t("result",(v=tt("result"),y=et(n),C=et(n),D=et(n),w=et(l),k=et(l),R=et(l),E=et(s),N=et(s),z=et(s),M=et(l),S=et(l),A=et(l),O=et(l),B=et(s),I=et(s),F=et(s),v((T=e((W=class extends o{constructor(...t){super(...t),i(this,"success",T,this),i(this,"failed",H,this),i(this,"congratulation",P,this),i(this,"btn_continue",V,this),i(this,"mask",G,this),i(this,"btn_giveup",$,this),i(this,"qian_label",x,this),i(this,"zuan_label_a",U,this),i(this,"zuan_label_b",q,this),i(this,"btn_receive_a",Y,this),i(this,"btn_receive_b",j,this),i(this,"btn_getDouble",K,this),i(this,"btn_check",J,this),i(this,"value",Q,this),i(this,"fail_level_label",X,this),i(this,"fail_info_label",Z,this),this.gameData=void 0,this._closeCallback=null,this.task_rewardNum=0,this.result_type=1,this.signArry=[],this.target=null,this.levelReward=0,this.singleReward=0,this.singleReward2=0}async showResult(t,e,i,a,n=null){if(this.signArry=a,this.result_type=t,this.gameData=d.loadProgress(),this.success&&(this.success.active=!1),this.failed&&(this.failed.active=!1),this.congratulation&&(this.congratulation.active=!1,this.congratulation.getChildByName("a").active=!1,this.congratulation.getChildByName("b").active=!1),1===t&&this.success){c.inst.playOneShot(_.SOUND_WIN),this.success.active=!0,this.success.getChildByName("level_label").getComponent(s).string=`${this.gameData.level}`;let t=i;this.levelReward=t;let e=(a[1]*t).toFixed(2);this.value.string=a[0]+`${e}`,this.target=n}else if(0===t&&this.failed){this.fail_level_label.string=`Level - ${this.gameData.level}`;let t=_.FAIL_INFO,e=await p.instance.getSign(),i=e[0]+b.formatCurrency(_.CASH_MONEY*Number(e[1]),Number(e[3]),3==e[2]);t=t.replace("%s",i),this.fail_info_label.string=t,c.inst.playOneShot(_.SOUND_LOSE),this.failed.active=!0;let a=this.failed.getChildByName("value_Label").getComponent(s),n=e[1]*this.gameData.money,l=b.formatCurrency(n,e[3],3==e[2]);a.string=e[0]+` ${l}`}else 2===t&&this.congratulation?(this.congratulation.active=!0,this.congratulation.getChildByName("a").active=!0,this.singleReward=2,this.qian_label.getComponent(s).string=a[0]+this.singleReward,this.zuan_label_a.getComponent(s).string=`+${_.REMOVE_AD_DIAMOND}`,this.btn_giveup.node.scale=u(0,0,0),h(this.btn_giveup.node).delay(_.WAITTIME).to(.2,{scale:u(1,1,1)}).start()):3===t&&this.congratulation&&(c.inst.playOneShot(_.SOUND_REWARD),this.congratulation.active=!0,this.congratulation.getChildByName("b").active=!0,this.zuan_label_b.string=`+${i.rewardNum}`,this.task_rewardNum=i.rewardNum,this.gameData.diamonds+=this.task_rewardNum,d.saveProgress(this.gameData),m.emit(_.REFRESH_TOP),this.btn_receive_b.node.scale=u(0,0,0),h(this.btn_receive_b.node).delay(_.WAITTIME).to(.2,{scale:u(1,1,1)}).start());e&&(this._closeCallback=e)}start(){this.btn_continue&&g.handleBtnClickWithSound1(this.btn_continue,(()=>{var t;null==(t=this._closeCallback)||t.call(this,"Continue"),this._closeCallback=null,this.node.destroy()}),this),this.btn_check&&g.handleBtnClickWithSound1(this.btn_check,(()=>{this.btn_check.node.off("click"),this.onCheck()}),this),this.btn_giveup&&g.handleBtnClickWithSound1(this.btn_giveup,(()=>{var t;null==(t=this._closeCallback)||t.call(this,"Giveup"),this._closeCallback=null,this.onReward(1);let e=0;for(let t=0;t<_.LIMITLEVEL_AD.length;t++)if(this.gameData.level<=_.LIMITLEVEL_AD[t]){e=t;break}2===this.result_type&&this.gameData.level>=2&&this.gameData.removeNum%(_.REMOVE_AD[e]*_.FORCE_AD)==0&&!_.isTestModel&&(console.log("强制看广告......"),this.gameData.level>2&&f.instance.showInterstitial())}),this),this.btn_receive_b&&g.handleBtnClickWithSound1(this.btn_receive_b,(()=>{var t;null==(t=this._closeCallback)||t.call(this,"Giveup"),this._closeCallback=null,this.node.destroy()}),this),this.btn_receive_a&&g.handleBtnClickWithSound1(this.btn_receive_a,(()=>{f.instance.showRewardVideo(this,(()=>{var t;this.onReward(10),null==(t=this._closeCallback)||t.call(this,"Receive_A"),this._closeCallback=null}))}),this),this.btn_getDouble&&g.handleBtnClickWithSound1(this.btn_getDouble,(()=>{f.instance.showRewardVideo(this,(()=>{var t;this.onRewardDouble(),null==(t=this._closeCallback)||t.call(this,"GetDouble"),this._closeCallback=null}))}),this)}onReward(t){let e=_.REMOVE_AD_DIAMOND*t,i=this.singleReward;this.node.destroy(),this.gameData.diamonds+=e,this.gameData.money+=i,this.gameData.adEarnMoney+=i,d.saveProgress(this.gameData),m.emit(_.REFRESH_TOP);let a=this.signArry[0]+i.toFixed(2);m.emit(_.MONEY_FLY,[a,e])}onRewardDouble(){this.node.destroy(),this.gameData.diamonds+=this.task_rewardNum,d.saveProgress(this.gameData),m.emit(_.REFRESH_TOP)}onCheck(){this.target?(this.node.destroy(),m.emit(_.SHOW_WITHDRAW)):this.onCheckAnimEnd()}onCheckAnimEnd(){var t;null==(t=this._closeCallback)||t.call(this,"Giveup"),this._closeCallback=null,this.node.destroy()}}).prototype,"success",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(W.prototype,"failed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(W.prototype,"congratulation",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(W.prototype,"btn_continue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(W.prototype,"mask",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(W.prototype,"btn_giveup",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(W.prototype,"qian_label",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(W.prototype,"zuan_label_a",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(W.prototype,"zuan_label_b",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(W.prototype,"btn_receive_a",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(W.prototype,"btn_receive_b",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(W.prototype,"btn_getDouble",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(W.prototype,"btn_check",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(W.prototype,"value",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(W.prototype,"fail_level_label",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(W.prototype,"fail_info_label",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=W))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/RotaryTable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonClickHandler2.ts","./gameManager2.ts","./EventManager2.ts","./Constant2.ts","./AudioManager.ts","./CurrencyFormatter.ts"],(function(t){var e,i,n,o,a,s,r,l,h,d,g,c,m,p,y,u,f,b,C,B,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Button,a=t.Label,s=t.Node,r=t.ProgressBar,l=t._decorator,h=t.Component,d=t.tween,g=t.UIOpacity,c=t.UITransform,m=t.Tween,p=t.Vec3,y=t.Sprite},function(t){u=t.ButtonClickHandler},function(t){f=t.GameManager},function(t){b=t.eventManager},function(t){C=t.default},function(t){B=t.default},function(t){N=t.CurrencyFormatter}],execute:function(){var _,A,D,M,T,S,w,P,v,k,W,O,E,L,R;n._RF.push({},"a91e3xOhrdO1LA4ihk/deLm","RotaryTable",void 0);const{ccclass:F,property:H}=l;t("RotaryTable",(_=F("doubleReward"),A=H(o),D=H(o),M=H(a),T=H({type:s}),S=H({type:r}),w=H(a),_((k=e((v=class extends h{constructor(...t){super(...t),i(this,"btn_spin",k,this),i(this,"btn_close",W,this),i(this,"msg",O,this),i(this,"top",E,this),i(this,"progressBar",L,this),i(this,"jinduL",R,this),this.baseMoney=0,this.fortuneWheelData=[],this.callbackTarget=null,this.isPlaying=!1,this._originalAddMoneyPos=void 0,this._originalAddDiamondPos=void 0,this.gameData=null}start(){u.handleBtnClickWithSound1(this.btn_spin,(()=>{this.onSpin()}),this),u.handleBtnClickWithSound1(this.btn_close,(()=>{this.close()}),this);for(let t of this.fortuneWheelData)"money"==t[0]&&(t[1]*=this.baseMoney);d(this.top.getComponent(g)).delay(.5).to(.3,{opacity:255}).start(),this.node.getComponent(c).setContentSize(this.callbackTarget.node.getComponent(c).contentSize);const t=this.top.getChildByName("AddMoneyNode");this._originalAddMoneyPos=t.position.clone();const e=this.top.getChildByName("AddDiamondNode");this._originalAddDiamondPos=e.position.clone(),this.initWheelData(),this.initLoading(!1),this.refreshTop()}initWheelData(){}initLoading(t=!0){let e=this.callbackTarget.gameData.restMatchNum,i=C.USEMATCH_NUM,n=e/i;if(n>1&&(n=1),e>=i)this.msg.string=C.MSG_WHEEL_ENOUGH;else{let t=C.MSG_WHEEL_NOT_ENOUGH.replace("%d",(i-e).toString());this.msg.string=t}this.progressBar.barSprite.node.active=n<1,this.progressBar.node.getChildByName("fullbar").active=!this.progressBar.barSprite.node.active,t?(m.stopAllByTarget(this.progressBar),d(this.progressBar).to(.3,{progress:n}).start()):this.progressBar.progress=n,this.jinduL.string=`${e}/${i}`}onSpin(){if(this.isPlaying)return;let t=this.callbackTarget.gameData.restMatchNum,e=C.USEMATCH_NUM;if(t<e)return void b.emit(C.SHOW_TOAST,C.MSG_WHEEL_TOAST);m.stopAllByTarget(this.btn_close.node),d(this.btn_close.node).to(.2,{scale:new p(0,0,0)},{easing:"sineIn"}).start(),this.btn_spin.node.getComponent(y).grayscale=!0;let i=t-e;this.callbackTarget.gameData.restMatchNum=i,this.callbackTarget.initBtnRotaryTable(),this.initLoading(),this.isPlaying=!0;let n=this.node.getChildByName("wheel"),o=n.angle%360;o<0&&(o+=360),n.angle=o;let a=Math.floor(1e4*Math.random()),s=0,r=0;for(let t=0;t<this.fortuneWheelData.length;t++)if(s+=this.fortuneWheelData[t][2],a<s){r=t;break}console.log("rand = ",a," selectedIndex = ",r);let l=-2160+(60*r+5+50*Math.random())-o,h=this.fortuneWheelData[r][1];"money"==this.fortuneWheelData[r][0]?this.callbackTarget.gameData.money+=h:"diamond"==this.fortuneWheelData[r][0]&&(this.callbackTarget.gameData.diamonds+=h),f.saveProgress(this.callbackTarget.gameData),d(n).by(5,{angle:l},{easing:"quadInOut"}).call((()=>{this.isPlaying=!1,b.emit(C.REFRESH_TOP),this.refreshTop(),"money"==this.fortuneWheelData[r][0]?this.showMoneyFlyView([h,null]):"diamond"==this.fortuneWheelData[r][0]&&this.showMoneyFlyView([null,h]),this.btn_spin.node.getComponent(y).grayscale=!1,m.stopAllByTarget(this.btn_close.node),d(this.btn_close.node).to(.2,{scale:new p(1,1,1)},{easing:"sineIn"}).start()})).start()}close(){if(this.isPlaying)return;this.top.active=!1;const t=this.node.getChildByName("mask");t&&(t.active=!1);const e=new p(0,0,0),i=new p(1.1,1.1,1.1);d(this.node).to(.1,{scale:i},{easing:"sineOut"}).to(.25,{scale:e},{easing:"sineOut"}).call((()=>{this.node.destroy()})).start()}refreshTop(){if(!this.node)return;this.gameData=f.loadProgress();let t=this.callbackTarget;t.moneypoints||(t.moneypoints=t.top.getChildByName("money").getChildByName("money").getWorldPosition());let e=this.top.getChildByName("money").getChildByName("value").getComponent(a),i=t.signArry[1]*this.gameData.money,n=N.formatCurrency(i,t.signArry[3],3==t.signArry[2]);e.string=t.signArry[0]+` ${n}`,this.top.getChildByName("diamond").getChildByName("value").getComponent(a).string=this.gameData.diamonds.toString()}showMoneyFlyView(t){if(!this.node)return;B.inst.playOneShot(C.SOUND_REWARD);let e=this.top.getChildByName("money").getChildByName("money").getWorldPosition(),i=this.top.getChildByName("diamond").getChildByName("money").getWorldPosition();const n=this.node.getComponent(c).convertToNodeSpaceAR(e),o=this.node.getComponent(c).convertToNodeSpaceAR(i);if(t[1])for(let e=0;e<3;e++){let i=new s;const n=i.addComponent(y);i.setPosition(0+50*e,0),i.setScale(.7,.7),n.spriteFrame=this.top.getChildByName("diamond").getChildByName("money").getComponent(y).spriteFrame,i.parent=this.node,d(i).to(.5,{position:o}).call((()=>{i.destroy(),0==e&&this.showDiamondShake(t[1])})).start()}if(t[0])for(let e=0;e<3;e++){let i=new s;const o=i.addComponent(y);i.setPosition(0-50*e,0),i.setScale(.7,.7),o.spriteFrame=this.top.getChildByName("money").getChildByName("money").getComponent(y).spriteFrame,i.parent=this.node,d(i).to(.5,{position:n}).call((()=>{i.destroy(),0==e&&this.showMoneyShake(t[0])})).start()}}showMoneyShake(t){if(!this.top)return;const e=this.top.getChildByName("AddMoneyNode"),i=e.getChildByName("add_value").getComponent(a);let n=this.callbackTarget,o=n.signArry[1]*t,s=N.formatCurrency(o,n.signArry[3],3==n.signArry[2]);i.string=n.signArry[0]+s;const r=this.top.getChildByName("money");e.active=!0,e.setPosition(this._originalAddMoneyPos);const l=p.ONE.clone(),h=new p(.5,.5,.5);d(r).repeat(3,d().to(.1,{scale:h}).to(.1,{scale:l})).start(),d(e).to(1,{position:new p(this._originalAddMoneyPos.x,this._originalAddMoneyPos.y+50,this._originalAddMoneyPos.z)}).call((()=>{e.active=!1})).start()}showDiamondShake(t){if(!this.top)return;const e=this.top.getChildByName("AddDiamondNode");e.getChildByName("add_value").getComponent(a).string=t;const i=this.top.getChildByName("diamond");e.active=!0,e.setPosition(this._originalAddDiamondPos);const n=p.ONE.clone(),o=new p(.5,.5,.5);d(i).repeat(3,d().to(.1,{scale:o}).to(.1,{scale:n})).start(),d(e).to(1,{position:new p(this._originalAddDiamondPos.x,this._originalAddDiamondPos.y+50,this._originalAddDiamondPos.z)}).call((()=>{e.active=!1})).start()}}).prototype,"btn_spin",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(v.prototype,"btn_close",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(v.prototype,"msg",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(v.prototype,"top",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(v.prototype,"progressBar",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(v.prototype,"jinduL",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=v))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/SignInManager.ts",["cc"],(function(t){var a,s,n;return{setters:[function(t){a=t.cclegacy,s=t._decorator,n=t.sys}],execute:function(){var e,i;a._RF.push({},"4223dIh/VdEKar6QIbTSY8Y","SignInManager",void 0);const{ccclass:o,property:c}=s,r="SIGN_IN_DATA";t("SignInManager",o("SignInManager")(((i=class t{static get instance(){return this._instance||(this._instance=new t),this._instance}constructor(){this._data={lastSignInDate:"",continuousDays:0,totalDays:0},this.loadData()}loadData(){const t=n.localStorage.getItem(r);if(t)try{this._data=JSON.parse(t)}catch(t){console.error("[SignInManager] Failed to parse sign in data",t),this._data={lastSignInDate:"",continuousDays:0,totalDays:0}}}saveData(){n.localStorage.setItem(r,JSON.stringify(this._data))}getFormattedDate(t){const a=t.getFullYear(),s=t.getMonth()+1,n=t.getDate();return`${a}-${s<10?"0"+s:""+s}-${n<10?"0"+n:""+n}`}getSignInStatus(){const t=this.getFormattedDate(new Date);return{isSignedToday:this._data.lastSignInDate===t,continuousDays:this._data.continuousDays,totalDays:this._data.totalDays}}getContinuousDays(){return this._data.continuousDays}signIn(){const t=new Date,a=this.getFormattedDate(t);return this._data.lastSignInDate===a?{success:!1,msg:"今天已经签到过了",continuousDays:this._data.continuousDays}:(this._data.continuousDays++,this._data.lastSignInDate=a,this._data.totalDays++,this.saveData(),console.log(`[SignInManager] 签到成功! 当前进度: 第 ${this._data.continuousDays} 天, 总签到: ${this._data.totalDays} 天`),{success:!0,msg:"签到成功",continuousDays:this._data.continuousDays})}retroactiveSignIn(t){return!1}resetData(){this._data={lastSignInDate:"",continuousDays:0,totalDays:0},this.saveData(),console.log("[SignInManager] 数据已重置")}})._instance=void 0,e=i))||e);a._RF.pop()}}}));

System.register("chunks:///_virtual/SignInUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SignInManager.ts","./ButtonClickHandler2.ts","./LayerScale2.ts","./gameManager2.ts","./Constant2.ts","./EventManager2.ts","./RateManager.ts","./CurrencyFormatter.ts"],(function(t){var e,n,i,a,o,s,l,r,u,g,c,d,m,y,h,p,C,f,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Node,o=t.Label,s=t._decorator,l=t.Component,r=t.Sprite,u=t.Color,g=t.tween,c=t.Button},function(t){d=t.SignInManager},function(t){m=t.ButtonClickHandler},function(t){y=t.LayerScale},function(t){h=t.GameManager},function(t){p=t.default},function(t){C=t.eventManager},function(t){f=t.default},function(t){I=t.CurrencyFormatter}],execute:function(){var S,N,b,B,L,w,R,v,M;i._RF.push({},"8d773u6cp1N7IhE9Jh7vtj1","SignInUI",void 0);const{ccclass:D,property:E}=s;t("SignInUI",(S=D("SignInUI"),N=E(a),b=E(o),B=E(o),S((R=e((w=class extends l{constructor(...t){super(...t),n(this,"signInBtnNode",R,this),n(this,"daysLabel",v,this),n(this,"statusLabel",M,this),this.RewardList=[{type:"money",amount:35},{type:"demand",amount:100},{type:"money",amount:10},{type:"demand",amount:200},{type:"money",amount:5},{type:"demand",amount:400},{type:"demand",amount:1e3}]}onEnable(){this.updateUI();if(d.instance.getSignInStatus().isSignedToday){this.signInBtnNode.getChildByName("icon").getComponent(r).grayscale=!0;let t=this.signInBtnNode.getChildByName("label").getComponent(o);t.color=new u(90,90,90,200),t.outlineColor=new u(255,255,255)}g(this.node).delay(.5).call((()=>{if(this.signInBtnNode){const t=this.signInBtnNode.getComponent(c);t&&m.handleBtnClickWithSound2(t,this.onSignInClick,this)}})).start()}async start(){let t=d.instance.getSignInStatus().continuousDays,e=this.node.getChildByName("signRoot");for(let n=1;n<=7;n++){let i=e.getChildByName(String(n)),a=null;if(a=n-1>t?i.getChildByName("BuKeLingQu"):n-1==t?i.getChildByName("WeiLingQu"):i.getChildByName("Claimed"),a.active=!0,a.getChildByName("Day")){a.getChildByName("Day").getComponent(o).string=`Day ${n}`}if(a.getChildByName("amount")){let t=this.RewardList[n-1],e=a.getChildByName("amount").getComponent(o);if("money"==t.type){let n=await f.instance.getSign(),i=n[0]+I.formatCurrency(t.amount*Number(n[1]),Number(n[3]),3==n[2]);e.string=i}else e.string=`${t.amount}`}}}updateUI(){const t=d.instance.getSignInStatus();if(this.daysLabel&&(this.daysLabel.string=`累计签到: ${t.continuousDays} 天`),this.signInBtnNode){const e=this.signInBtnNode.getComponent(c);e&&(e.interactable=!t.isSignedToday)}this.statusLabel&&(this.statusLabel.string=t.isSignedToday?"今日已签到":"点击签到")}onSignInClick(){const t=d.instance.signIn();t.success?(console.log(t.msg),this.updateUI(),this.showReward()):console.log(t.msg)}async showReward(){console.log("展示签到奖励动画..."),this.node.getComponent(y).close();let t=(d.instance.getSignInStatus().continuousDays-1)%this.RewardList.length,e=this.RewardList[t];if("money"===e.type){let t=e.amount;const n=h.loadProgress();let i=t;n.money+=i,h.saveProgress(n),C.emit(p.REFRESH_TOP);let a=await f.instance.getSign(),o=a[0]+I.formatCurrency(t*Number(a[1]),Number(a[3]),3==a[2]);C.emit(p.MONEY_FLY,[o,null])}else{let t=e.amount;const n=h.loadProgress();let i=t;n.diamonds+=i,h.saveProgress(n),C.emit(p.REFRESH_TOP),C.emit(p.MONEY_FLY,[null,i])}}}).prototype,"signInBtnNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(w.prototype,"daysLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(w.prototype,"statusLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=w))||L));i._RF.pop()}}}));

System.register("chunks:///_virtual/startover.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonClickHandler2.ts"],(function(t){var e,n,i,r,s,a,l,o,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,r=t.Button,s=t._decorator,a=t.Component,l=t.Vec3,o=t.tween},function(t){c=t.ButtonClickHandler}],execute:function(){var u,h,d,p,b,v,y;i._RF.push({},"5d481PAPTpF2LtMb3yyyAUL","startover",void 0);const{ccclass:C,property:f}=s;t("startover",(u=C("startover"),h=f(r),d=f(r),u((v=e((b=class extends a{constructor(...t){super(...t),n(this,"btnOver",v,this),n(this,"btnContinue",y,this),this._restartCallback=null}initData(t){t&&(this._restartCallback=t)}start(){const t=this.node.getChildByName("mask"),e=new l(0,0,0),n=new l(1.1,1.1,1.1);c.handleBtnClickWithSound1(this.btnContinue,(()=>{t&&(t.active=!1),o(this.node).to(.1,{scale:n},{easing:"sineOut"}).to(.25,{scale:e},{easing:"sineOut"}).call((()=>{this.node.destroy()})).start()}),this),c.handleBtnClickWithSound1(this.btnOver,(()=>{var i;null==(i=this._restartCallback)||i.call(this),this._restartCallback=null,t&&(t.active=!1),o(this.node).to(.1,{scale:n},{easing:"sineOut"}).to(.25,{scale:e},{easing:"sineOut"}).call((()=>{this.node.destroy()})).start()}),this)}update(t){}}).prototype,"btnOver",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(b.prototype,"btnContinue",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=b))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/TaskData.ts",["cc","./gameManager2.ts","./BundleLoader.ts"],(function(t){var a,e,s;return{setters:[function(t){a=t.cclegacy},function(t){e=t.GameManager},function(t){s=t.BundleLoader}],execute:function(){a._RF.push({},"5abcbj/HZZPh4+AGLfNKyta","TaskData",void 0);class n{constructor(){this.redDotLevel=!1,this.redDotElimination=!1,this.taskJosnData=void 0}static getInstance(){if(null===n.s_TaskData){const t=new n;if(!t.init())return n.s_TaskData=null,null;n.s_TaskData=t}return n.s_TaskData}static destroyInstance(){n.s_TaskData&&(n.s_TaskData=null)}init(){return null==this.taskJosnData&&this.loadTaskData(),!0}loadTaskData(){s.loadJson("b_bundle","resources/data/task").then((t=>{this.taskJosnData=t})).catch((t=>{console.error("Failed to load level data:",t)}))}checkRedDot(t){if(null==this.taskJosnData)return!1;const a="Level"==t?0:1,s=this.taskJosnData[a].Reward,n="Level"==t?e.getGameData().level-1:e.getGameData().removeNum;for(let t=0;t<s.length;t++){let a=cc.sys.localStorage.getItem("TaskID"+s[t].taskID);if(n>=s[t].progress&&null==a)return!0}return!1}checkTaskBtnRedDot(){return this.checkRedDot("Level")||this.checkRedDot("Eliminate")}}t("TaskData",n),n.s_TaskData=null,a._RF.pop()}}}));

System.register("chunks:///_virtual/TaskItem2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant2.ts","./EventManager2.ts","./ButtonClickHandler2.ts"],(function(e){var t,i,r,a,s,l,n,o,c,u,p,b,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,a=e.Sprite,s=e.Node,l=e.Button,n=e.Label,o=e.ProgressBar,c=e._decorator,u=e.Component},function(e){p=e.default},function(e){b=e.eventManager},function(e){h=e.ButtonClickHandler}],execute:function(){var g,d,f,m,v,y,k,w,_,D,I,z,T,N,S,C,R,B,E,F,H,L,M,P,A;r._RF.push({},"19510mECapKmZePa7wo4k0F","TaskItem",void 0);const{ccclass:K,property:x}=c;e("TaskItem",(g=K("TaskItem"),d=x(a),f=x(s),m=x(l),v=x(s),y=x(s),k=x(n),w=x(n),_=x(n),D=x({type:o}),I=x(s),z=x(s),g((S=t((N=class extends u{constructor(...e){super(...e),i(this,"receiveSp",S,this),i(this,"receiveNode",C,this),i(this,"receivebtn",R,this),i(this,"difficulty",B,this),i(this,"simple",E,this),i(this,"rewardNum",F,this),i(this,"detailsLab",H,this),i(this,"progress_label",L,this),i(this,"progressBar",M,this),i(this,"receive_disable",P,this),i(this,"inprogress",A,this),this.taskItemData=null,this.updataCallback=null}start(){h.handleBtnClickWithSound1(this.receivebtn,(()=>{this.getReward()}),this)}init(e,t,i){this.taskItemData=e,this.updataCallback=i,this.difficulty.active=2==e.rewardTitle,this.simple.active=1==e.rewardTitle,this.rewardNum.string="+"+e.rewardNum,this.detailsLab.string=e.details,this.progressBar.progress=t<=e.progress?t/e.progress:1,this.progress_label.string=`${t}/${e.progress}`;let r=cc.sys.localStorage.getItem("TaskID"+e.taskID);this.inprogress.active=!1,t>=e.progress&&null==r?(this.receiveNode.active=!0,this.receivebtn.interactable=!0,this.receive_disable.active=!1):t>=e.progress&&1==r?(this.receiveNode.active=!1,this.receivebtn.interactable=!1,this.receive_disable.active=!0):t<e.progress&&(this.receiveNode.active=!1,this.receive_disable.active=!1,this.inprogress.active=!0)}getReward(){var e;cc.sys.localStorage.setItem("TaskID"+this.taskItemData.taskID,1),null==(e=this.updataCallback)||e.call(this,this.taskItemData),this.updataCallback=null,b.emit(p.REFRESH_TASK_RED_DOT),b.emit(p.REFRESH_TASK_MAIN_RED_DOT)}}).prototype,"receiveSp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(N.prototype,"receiveNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(N.prototype,"receivebtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(N.prototype,"difficulty",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(N.prototype,"simple",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(N.prototype,"rewardNum",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(N.prototype,"detailsLab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(N.prototype,"progress_label",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(N.prototype,"progressBar",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(N.prototype,"receive_disable",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(N.prototype,"inprogress",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=N))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/toast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant2.ts"],(function(t){var e,o,n,r,s,i,a,c,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Node,s=t._decorator,i=t.Component,a=t.Label,c=t.tween,l=t.Vec3},function(t){u=t.default}],execute:function(){var p,d,f,h,v;n._RF.push({},"e86caqaoZNJVbZ+LYaHEbCW","toast",void 0);const{ccclass:b,property:g}=s;t("toast",(p=b("toast"),d=g(r),p((v=e((h=class extends i{constructor(...t){super(...t),o(this,"value",v,this)}start(){}setString(t){this.value.getComponent(a).string=t;const e=this.node.position.clone();c(this.node).to(u.WAITTIME,{position:new l(e.x,e.y+80,e.z)}).call((()=>{this.node.removeFromParent()})).start()}}).prototype,"value",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/VictoryAccolade.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ButtonClickHandler2.ts","./gameManager2.ts","./EventManager2.ts","./Constant2.ts","./LayerScale2.ts","./RateManager.ts"],(function(t){var e,n,i,o,a,c,r,s,l,u,h,y,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Button,a=t.Label,c=t._decorator,r=t.Component},function(t){s=t.ButtonClickHandler},function(t){l=t.GameManager},function(t){u=t.eventManager},function(t){h=t.default},function(t){y=t.LayerScale},function(t){g=t.default}],execute:function(){var d,m,p,b,f,_,k;i._RF.push({},"e84fb1VYnlLEpoYv9a21xlo","VictoryAccolade",void 0);const{ccclass:v,property:M}=c;t("VictoryAccolade",(d=v("VictoryAccolade"),m=M({type:o}),p=M({type:a}),d((_=e((f=class extends r{constructor(...t){super(...t),n(this,"btn_check",_,this),n(this,"lb_money",k,this),this.target=null,this.money=0,this.money2=0,this.sign=[]}start(){s.handleBtnClickWithSound1(this.btn_check,(()=>{s.clearEvent(this.btn_check),this.onCheck()}),this),this.money=this.target.getAccoladeRewardMoeny(),this.initLabel()}async initLabel(){let t=await g.instance.getSign();this.sign=t;let e=(Math.floor(this.money*Number(t[1])*100)/100).toFixed(2);this.money2=Number(e),this.lb_money.string="+"+t[0]+e}onCheck(){let t=l.getGameData();t.checkedAccoladeIndex++,t.money+=this.money,l.saveProgress(t),this.target.gameData=t,this.target.onRefreshVictoryAccolade(),u.emit(h.REFRESH_TOP);let e=this.sign[0]+this.money2.toFixed(2);u.emit(h.MONEY_FLY,[e,null]),this.node.getComponent(y).close()}}).prototype,"btn_check",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(f.prototype,"lb_money",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/wallet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager2.ts","./ButtonClickHandler2.ts","./BundleLoader.ts","./Constant2.ts","./EventManager2.ts","./CurrencyFormatter.ts","./record.ts"],(function(t){var e,i,n,r,a,s,l,o,h,c,m,u,g,d,b,y,p,_,f,C,A,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Button,a=t.Sprite,s=t.SpriteFrame,l=t.Node,o=t.ToggleContainer,h=t.ScrollView,c=t.Label,m=t.EditBox,u=t._decorator,g=t.Component,d=t.instantiate,b=t.Layout},function(t){y=t.GameManager},function(t){p=t.ButtonClickHandler},function(t){_=t.BundleLoader},function(t){f=t.default},function(t){C=t.eventManager},function(t){A=t.CurrencyFormatter},function(t){w=t.record}],execute:function(){var S,E,B,N,T,D,L,O,v,M,k,z,F,W,P,I,R,x,H,U,V,Y,K,Z,G,j,$,q,J,Q,X;n._RF.push({},"6e338Cgao9AO4gHooyDLlO2","wallet",void 0);const{ccclass:tt,property:et}=u;t("wallet",(S=tt("wallet"),E=et({type:r}),B=et({type:r}),N=et({type:r}),T=et({type:r}),D=et({type:r}),L=et({type:r}),O=et({type:r}),v=et(a),M=et({type:[s],tooltip:""}),k=et(l),z=et(o),F=et(h),W=et(c),P=et(m),S((x=e((R=class extends g{constructor(...t){super(...t),i(this,"btn_submit",x,this),i(this,"btn_down",H,this),i(this,"btn_record",U,this),i(this,"item1",V,this),i(this,"item2",Y,this),i(this,"item3",K,this),i(this,"item4",Z,this),i(this,"channel_icon",G,this),i(this,"channel_spriteFrames",j,this),i(this,"channelNode",$,this),i(this,"channelToggle",q,this),i(this,"scrollViewNode",J,this),i(this,"withdraw_num_label",Q,this),this.gameData=void 0,i(this,"emailEditBox",X,this),this.signArry=[],this.click_num=0,this.emailRegex=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/}initData(t){this.signArry=t}start(){console.log("wallet signArry",this.signArry),this.gameData=y.loadProgress();let t=this.gameData.wallentMoney*this.signArry[1],e=A.formatCurrency(t,this.signArry[3],3==this.signArry[2]);this.withdraw_num_label.string=this.signArry[0]+e;let i=f.SUBMIT_MONEY[0]*this.signArry[1],n=A.formatCurrency(i,this.signArry[3],3==this.signArry[2]);this.item1.node.getChildByName("Label").getComponent(c).string=this.signArry[0]+n;let r=f.SUBMIT_MONEY[1]*this.signArry[1],a=A.formatCurrency(r,this.signArry[3],3==this.signArry[2]);this.item2.node.getChildByName("Label").getComponent(c).string=this.signArry[0]+a;let s=f.SUBMIT_MONEY[2]*this.signArry[1],l=A.formatCurrency(s,this.signArry[3],3==this.signArry[2]);this.item3.node.getChildByName("Label").getComponent(c).string=this.signArry[0]+l;let o=f.SUBMIT_MONEY[3]*this.signArry[1],h=A.formatCurrency(o,this.signArry[3],3==this.signArry[2]);if(this.item4.node.getChildByName("Label").getComponent(c).string=this.signArry[0]+h,this.gameData.submitTimestamp>0&&this.item1.node&&this.deleteFirstItemWithLayout(),this.click_num=0,p.handleBtnClickWithSound1(this.btn_down,(()=>{this.click_num+=1,this.click_num%2==1?(this.channelNode.active=!0,this.btn_down.node.setScale(1,1,1)):(this.channelNode.active=!1,this.btn_down.node.setScale(1,-1,1))}),this),p.handleBtnClickWithSound1(this.btn_record,(()=>{_.loadPrefab("b_bundle",f.RECORD_PRE).then((t=>{const e=d(t);this.node.addChild(e);e.getComponent(w).initData(this.signArry)})).catch((t=>{console.error("Failed to load prefab data:",t)}))}),this),p.handleBtnClickWithSound1(this.btn_submit,(()=>{if(0==this.onConfim())return;if(!this.item1.node||this.item1.node&&0==this.item1.node.getChildByName("select").active)return void C.emit(f.SHOW_TOAST,f.SELECT_WITHDRAW_AMOUNT);_.loadPrefab("b_bundle",f.PENDING_PRE).then((t=>{const e=d(t);this.node.addChild(e),this.item1.node&&this.deleteFirstItemWithLayout()})).catch((t=>{console.error("Failed to load prefab data:",t)})),this.gameData=y.loadProgress(),this.gameData.submitTimestamp=Date.now(),this.gameData.wallentMoney-=f.SUBMIT_MONEY[0];let t=this.gameData.wallentMoney*this.signArry[1],e=A.formatCurrency(t,this.signArry[3],3==this.signArry[2]);this.withdraw_num_label.string=this.signArry[0]+e,C.emit(f.ACTIVE_RANK_SYSTEM),y.saveProgress(this.gameData)}),this),this.channelToggle.node.children.forEach((t=>{t.on("toggle",this.toggle_channel,this)})),this.item1.node.getChildByName("select").active=!1,this.item1.node.getChildByName("unselect").active=!0,this.gameData.level>=0){this.item1.node.getChildByName("unselect").active=!1,this.item1.node.getChildByName("select").active=!0;let t=0;p.handleBtnClickWithSound1(this.item1,(()=>{t+=1,this.item1.node.getChildByName("select").active=t%2==1}),this)}p.handleBtnClickWithSound1(this.item2,(()=>{C.emit(f.SHOW_TOAST,f.PASS_LEVEL_TO_UNLOCK.replace("%d","5"))}),this),p.handleBtnClickWithSound1(this.item3,(()=>{C.emit(f.SHOW_TOAST,f.PASS_LEVEL_TO_UNLOCK.replace("%d","10"))}),this),p.handleBtnClickWithSound1(this.item4,(()=>{C.emit(f.SHOW_TOAST,f.PASS_LEVEL_TO_UNLOCK.replace("%d","20"))}),this)}deleteFirstItemWithLayout(){const t=this.scrollViewNode.content,e=t.children;if(0===e.length)return;e[0].destroy();const i=t.getComponent(b);i&&i.updateLayout()}toggle_channel(t){if(t.isChecked)switch(this.click_num+=1,this.btn_down.node.setScale(1,-1,1),this.channelNode.active=!1,t.node.name){case"Toggle1":this.channel_icon.spriteFrame=this.channel_spriteFrames[0];break;case"Toggle2":this.channel_icon.spriteFrame=this.channel_spriteFrames[1],this.gameData.submitChannel="Zelle";break;case"Toggle3":this.channel_icon.spriteFrame=this.channel_spriteFrames[2],this.gameData.submitChannel="Venmo"}}onEnable(){if(this.gameData=y.loadProgress(),this.gameData.bindInfo){let t=this.gameData.bindInfo.phoneNumber;t&&""!=t&&(this.emailEditBox.string=t)}}onConfim(){let t=!1;const e=this.emailEditBox.string.trim();return t=this.validateEmail(e),t?(t&&(this.gameData=y.loadProgress(),console.log("Email is 有效!"),this.gameData.bindInfo.phoneNumber=this.emailEditBox.string.trim(),y.saveProgress(this.gameData)),t):(console.log("Email is 无效!"),C.emit(f.SHOW_TOAST,f.ENTER_EMAIL),!1)}validateEmail(t){return!!t&&this.emailRegex.test(t)}}).prototype,"btn_submit",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(R.prototype,"btn_down",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(R.prototype,"btn_record",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(R.prototype,"item1",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(R.prototype,"item2",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(R.prototype,"item3",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(R.prototype,"item4",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(R.prototype,"channel_icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(R.prototype,"channel_spriteFrames",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=e(R.prototype,"channelNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(R.prototype,"channelToggle",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(R.prototype,"scrollViewNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(R.prototype,"withdraw_num_label",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(R.prototype,"emailEditBox",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=R))||I));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/b_bundle', 'chunks:///_virtual/b_bundle'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});